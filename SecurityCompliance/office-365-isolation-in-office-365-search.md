---
title: Изоляция клиента Office 365 в Office 365 поиска
ms.author: robmazz
author: robmazz
manager: laurawi
ms.date: 8/21/2018
audience: ITPro
ms.topic: article
ms.service: Office 365 Administration
localization_priority: None
search.appverid:
- MET150
ms.collection: Strat_O365_Enterprise
description: 'Сводка: Пояснения изоляция клиента в Office 365 поиска.'
ms.openlocfilehash: cc73f3c157ffd20b3891a6b7c58e7d0b2adf4e55
ms.sourcegitcommit: 36c5466056cdef6ad2a8d9372f2bc009a30892bb
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/27/2018
ms.locfileid: "22534245"
---
# <a name="tenant-isolation-in-office-365-search"></a><span data-ttu-id="38db3-103">Изоляция клиента в поиске Office 365</span><span class="sxs-lookup"><span data-stu-id="38db3-103">Tenant Isolation in Office 365 Search</span></span>
<span data-ttu-id="38db3-p101">SharePoint Online поиска используется модель разделения клиента, который обеспечивает оптимальное сочетание эффективности совместно используемых структур данных с помощью защиты от утечки между клиентами сведения. В этой модели мы предотвратить функции поиска из:</span><span class="sxs-lookup"><span data-stu-id="38db3-p101">SharePoint Online search uses a tenant separation model that balances the efficiency of shared data structures with protection against information leaking between tenants. With this model, we prevent the Search features from:</span></span>
- <span data-ttu-id="38db3-106">Возвращение результатов запроса, которые содержат документов из других клиентов</span><span class="sxs-lookup"><span data-stu-id="38db3-106">Returning query results that contain documents from other tenants</span></span>
- <span data-ttu-id="38db3-107">Предоставление доступа к достаточно сведений в результатах запроса, что квалифицированного пользователей может определить сведения о других клиентов</span><span class="sxs-lookup"><span data-stu-id="38db3-107">Exposing sufficient information in query results that a skilled user could infer information about other tenants</span></span>
- <span data-ttu-id="38db3-108">Отображение схемы или параметров от другого клиента</span><span class="sxs-lookup"><span data-stu-id="38db3-108">Showing schema or settings from another tenant</span></span>
- <span data-ttu-id="38db3-109">Совместное использование данных между клиентами и хранилища результатов в неправильную клиентов обработки аналитики</span><span class="sxs-lookup"><span data-stu-id="38db3-109">Mixing analytics processing information between tenants or store results in the wrong tenant</span></span>
- <span data-ttu-id="38db3-110">С помощью записи словаря от другого клиента</span><span class="sxs-lookup"><span data-stu-id="38db3-110">Using dictionary entries from another tenant</span></span>

<span data-ttu-id="38db3-p102">Для каждого типа данных клиента мы используем один или несколько уровней защиты в коде для предотвращения случайного утечки информации. Наиболее важных данных имеет большинство слоев защиты, чтобы убедиться в том, что одной ошибки не приведет к защиты от утечки информации фактических или обнаруженных.</span><span class="sxs-lookup"><span data-stu-id="38db3-p102">For each type of tenant data, we use one or more layers of protection in the code to prevent accidental leaking of information. The most critical data has the most layers of protection to make sure that a single defect doesn't result in actual or perceived information leakage.</span></span>

## <a name="tenant-separation-for-the-search-index"></a><span data-ttu-id="38db3-113">Разделение клиента для индекса поиска</span><span class="sxs-lookup"><span data-stu-id="38db3-113">Tenant Separation for the Search Index</span></span>
<span data-ttu-id="38db3-p103">Индекс поиска хранятся на диске, серверы, на которых размещаются компоненты индекса и клиенты общий доступ к файлам индекса. Индексированные документы клиента отображаются только для запросов для этого клиента. Три независимых механизма предотвратить защиты от утечки информации:</span><span class="sxs-lookup"><span data-stu-id="38db3-p103">The search index is stored on disk in the servers hosting the index components and the tenants share the index files. A tenant's indexed documents are visible only for queries for that tenant. Three independent mechanisms prevent information leakage:</span></span>
- <span data-ttu-id="38db3-117">Фильтрация идентификатора клиента</span><span class="sxs-lookup"><span data-stu-id="38db3-117">Tenant ID filtering</span></span>
- <span data-ttu-id="38db3-118">Задание терминов префикса идентификатор клиента</span><span class="sxs-lookup"><span data-stu-id="38db3-118">Tenant ID term prefixing</span></span>
- <span data-ttu-id="38db3-119">Проверки списка управления Доступом</span><span class="sxs-lookup"><span data-stu-id="38db3-119">ACL checks</span></span>

<span data-ttu-id="38db3-120">Все три механизма бы к ошибке для поиска для возвращения документы в неправильную клиент.</span><span class="sxs-lookup"><span data-stu-id="38db3-120">All three mechanisms would have to fail for Search to return documents to the wrong tenant.</span></span>

## <a name="tenant-id-filtering-and-tenant-id-term-prefixing"></a><span data-ttu-id="38db3-121">Фильтрация идентификатора клиента и префикса терминов идентификатор клиента</span><span class="sxs-lookup"><span data-stu-id="38db3-121">Tenant ID Filtering and Tenant ID Term Prefixing</span></span>
<span data-ttu-id="38db3-p104">Префиксы поиска каждый термин, индексируются в полнотекстовый индекс с идентификатором клиента. Например, при индексации термин «*foo*» для клиента с Идентификатором «*123*», запись в полнотекстовый индекс будет "*123foo.*"</span><span class="sxs-lookup"><span data-stu-id="38db3-p104">Search prefixes every term that is indexed in the full-text index with the tenant ID. For example, when the term "*foo*" is indexed for a tenant with an ID of "*123*", the entry in the full-text index is "*123foo.*"</span></span>

<span data-ttu-id="38db3-p105">Каждый запрос преобразуется в включают идентификатор клиента, используя процесс с именем Фильтрация идентификатора клиента. Например запрос «*foo*» преобразуется в «<*guid*>. *foo* И *tenantID*: <*guid*> «, где <*guid*> представляет клиента для выполнения запроса. Это преобразование запроса происходит в каждом узле индексирования и обработки запросов, ни содержимое, которые влияют на его. Так как ИД клиента добавляется для каждого запроса, частоты терминов в других клиентов могут быть определены по крайней лучше всего совпадение ранжирования в одну для клиентов.</span><span class="sxs-lookup"><span data-stu-id="38db3-p105">Every query is converted to include the tenant ID using a process called tenant ID filtering. For example, the query "*foo*" is converted to "<*guid*>.*foo* AND *tenantID*:<*guid*>", where <*guid*> represents the tenant performing the query. This query conversion occurs within each index node and neither query nor content processing can influence it. Because the tenant ID is added to every query, the frequency of a term in other tenants can't be inferred by looking at best match ranking in one tenant.</span></span>

<span data-ttu-id="38db3-p106">Задание терминов префикса идентификатор клиента возникает только в полнотекстовый индекс. Были операций поиска, такие как «*Название: foo*», перейдите к искусственных поискового индекса где термины префиксом по идентификатору клиента. Вместо этого были поисков начинаются с префикса имя поля. Например, запрос «*заголовок: foo*» преобразуется в "*fields.title:foo fields.tenantID и*: <*guid*>.» Так как частоты терминов не влияют на ранжирование совпадений в индексе поиска искусственных, нет необходимости для разделения клиента с помощью префикса терминов. Fielded поиска как «*заголовок: foo*» разделение контента клиента зависит от ИД клиента, фильтрация по преобразования запроса.</span><span class="sxs-lookup"><span data-stu-id="38db3-p106">Tenant ID term prefixing occurs only in the full-text index. Fielded searches, such as "*title:foo*", go to a synthetic search index where terms aren't prefixed by tenant ID. Instead, fielded searches are prefixed with the field name. For example, the query "*title:foo*" is converted to "*fields.title:foo AND fields.tenantID*:<*guid*>." Because the frequency of a term doesn't influence ranking of hits in the synthetic search index, there's no need for tenant separation by term prefixing. For a fielded search like "*title:foo*", tenant content separation depends on tenant ID filtering by query conversion.</span></span>

## <a name="document-access-control-list-checks"></a><span data-ttu-id="38db3-134">Проверки списка контроля доступа документа</span><span class="sxs-lookup"><span data-stu-id="38db3-134">Document Access Control List Checks</span></span>
<span data-ttu-id="38db3-p107">Управляет доступом поиска документов с помощью списков управления доступом, сохраненных в индексе поиска. Каждый элемент индексируются с помощью набора терминов в специальные поля списка управления Доступом. В поле списка управления Доступом содержит один термин каждой группы или пользователя, который можно просмотреть документ. Каждый запрос дополняется со списком управления доступом элемента управления терминов, access, один для каждой группы, к которой принадлежит прошедшего проверку пользователя.</span><span class="sxs-lookup"><span data-stu-id="38db3-p107">Search controls access to documents through ACLs that are saved in the search index. Every item is indexed with a set of terms in a special ACL field. The ACL field contains one term per group or user that can view the document. Every query is augmented with a list of access control entry (ACE) terms, one for each group to which the authenticated user belongs.</span></span>

<span data-ttu-id="38db3-139">Например, для запроса как «<*guid*>. *foo и tenantID*: <*guid*>» становится: «<*guid*>. *foo и tenantID*: <*guid*> *AND* (*docACL:*<*ace1*> *или docACL*: <*ace2*> *или docACL*: <*ace3*> *... *)"</span><span class="sxs-lookup"><span data-stu-id="38db3-139">For example, a query like "<*guid*>.*foo AND tenantID*:<*guid*>" becomes: "<*guid*>.*foo AND tenantID*:<*guid*> *AND* (*docACL:*<*ace1*> *OR docACL*:<*ace2*> *OR docACL*:<*ace3*> *...*)"</span></span>

<span data-ttu-id="38db3-p108">Так как идентификаторов пользователей и групп и поэтому записи ACE, то это обеспечивает дополнительный уровень безопасности между клиентами для документов, которые отображаются только для некоторых пользователей. То же самое обоснование для специальных «все за исключением внешних пользователей» элемент управления ДОСТУПОМ, который предоставляет доступ для обычных пользователей в клиентов. Но поскольку элементов ACE для «Все», общим для всех клиентов, разделение клиента для общих документов, зависит от Фильтрация идентификатора клиента. Запретите также поддерживаются элементы управления доступом. Расширение запроса добавляет предложение, удаляет документ из результат, если совпадение с запрещающий элемент управления ДОСТУПОМ.</span><span class="sxs-lookup"><span data-stu-id="38db3-p108">Because user and group identifiers and hence ACEs are unique, this provides an extra level of security between tenants for documents that are only visible to some users. The same is the case for the special "Everyone except external users" ACE that grants access to regular users in the tenant. But since ACEs for "Everyone" are the same for all tenants, tenant separation for public documents depends on tenant ID filtering. Deny ACEs are also supported. The query augmentation adds a clause that removes a document from the result when there is a match with a deny ACE.</span></span>

<span data-ttu-id="38db3-p109">Exchange Online поиска в индексе секционируются на идентификатор почтового ящика для отдельных пользователей почтовых ящиков вместо ИД клиента (подписки с Идентификатором), как и в SharePoint Online. Механизмом секционирования совпадает с SharePoint Online, однако это не имеет нет списка управления Доступом фильтрации.</span><span class="sxs-lookup"><span data-stu-id="38db3-p109">In Exchange Online search, the index is partitioned on mailbox ID for individual user's mailboxes instead of tenant ID (subscription ID) as in SharePoint Online. The partitioning mechanism is the same as SharePoint Online, but there is no ACL filtering.</span></span>
