---
title: Изоляция клиента Office 365 в поиске Office 365
ms.author: robmazz
author: robmazz
manager: laurawi
ms.date: 8/21/2018
audience: ITPro
ms.topic: article
ms.service: Office 365 Administration
localization_priority: None
search.appverid:
- MET150
ms.collection:
- Strat_O365_IP
- M365-security-compliance
description: Сводка. Описание изоляции клиентов в поиске Office 365.
ms.openlocfilehash: b9faae9f1d61af181807f60243890b5115c0d679
ms.sourcegitcommit: c94cb88a9ce5bcc2d3c558f0fcc648519cc264a2
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/20/2019
ms.locfileid: "30090811"
---
# <a name="tenant-isolation-in-office-365-search"></a>Изоляция клиента в поиске Office 365
Служба поиска SharePoint Online использует модель разделения клиентов, которая балансирует эффективность общих структур данных с защитой от утечки данных между клиентами. С помощью этой модели мы не будем предотвращать функции поиска:
- Получение результатов запроса, содержащих документы от других клиентов
- Предоставление достаточной информации в результатах запроса, которые квалифицированный пользователь может получить сведения о других клиентах
- Показ схемы или параметров из другого клиента
- Смешивание сведений об обработке аналитики между клиентами или сохранение результатов в неправильном клиенте
- Использование записей словаря из другого клиента

Для каждого типа данных клиента мы используем один или несколько уровней защиты в коде для предотвращения случайной утечки информации. Наиболее важные данные имеют большинство уровней защиты, чтобы убедиться в том, что одна ошибка не приводит к утечке фактических или воспринимаемых данных.

## <a name="tenant-separation-for-the-search-index"></a>Разделение клиентов для индекса поиска
Индекс поиска хранится на диске серверов, на которых размещаются компоненты индекса, а клиенты совместно используют файлы индекса. Индексированные документы клиента отображаются только для запросов для этого клиента. Три независимых механизма предотвращают утечку информации:
- Фильтрация ИДЕНТИФИКАТОРов клиентов
- Префикс термина идентификатора клиента
- Проверки ACL

Всем трем механизмам потребуется выполнить поиск, чтобы возвратить документы в неверном клиенте.

## <a name="tenant-id-filtering-and-tenant-id-term-prefixing"></a>Фильтрация ИД клиента и префикс идентификатора клиента
Поиск префиксов для каждого термина, индексируемого в полнотекстовом индексе, с ИДЕНТИФИКАТОРом клиента. Например, если термин "*foo*" индексируется для клиента с идентификатором "*123*", запись в полнотекстовом индексе будет иметь значение "*123foo".*

Каждый запрос преобразуется, чтобы включить идентификатор клиента, используя процесс, называемый фильтрацией кода клиента. Например, запрос "*foo*" преобразуется в "_лт_*GUID*_гт_. *foo* И *tenantID*: _лт_*GUID*_Гт_ ", где _лт_*GUID*_гт_ представляет клиент, выполняющий запрос. Это преобразование запроса выполняется в каждом узле индекса, и на него не могут влиять ни запросы, ни обработка контента. Так как идентификатор клиента добавляется в каждый запрос, то частота терминов в других клиентах не может быть определена при поиске ранжирования по наилучшему совпадению в одном клиенте.

Предварительное исправление терминов идентификатора клиента выполняется только в полнотекстовом индексе. Поиск с полями, например "*Title: foo*", перейдите по искусственному индексу поиска, где термины не предВАРЯются идентификатором клиента. Вместо этого для поиска с полями указывается имя поля. Например, запрос "*Title: foo*" преобразуется в "Fields *. Title: foo и Fields. tenantID*: _лт_*GUID*_гт_". Так как частота терминов не влияет на ранжирование совпадений в индексе искусственного поиска, разделение клиентов по терминам не требуется. Для поиска по полям, например "*Title: foo*", разделение контента клиента зависит от фильтрации идентификатора клиента по преобразованию запроса.

## <a name="document-access-control-list-checks"></a>Проверки списка управления доступом к документам
Поиск управляет доступом к документам с помощью списков управления доступом, сохраненных в индексе поиска. Каждый элемент индексируется с помощью набора терминов в специальном поле списка управления доступом (ACL). Поле списка управления доступом содержит один термин для группы или пользователя, который может просматривать документ. Каждый запрос дополняется списком терминов элемента управления доступом (ACE), по одному для каждой группы, к которой принадлежит пользователь, прошедшему проверку подлинности.

Например, запрос Like "_Лт_*GUID*_гт_. *foo и tenantID*: _лт_*GUID*_гт_ "выглядит следующим образом:" _лт_*GUID*_гт_. *foo и tenantID*: _лт_*GUID*> *и* (*докакл:*<*ace1*> *или докакл*: _лт_*ace2*> *или докакл*: _лт_*ace3*> *... *)"

Так как идентификаторы пользователей и групп, а также, следовательно, являются уникальными, это обеспечивает дополнительный уровень безопасности между клиентами для документов, которые видны только некоторым пользователям. То же самое относится к особым учетным ЗАПИСЯМ "все, кроме внешних пользователей", которые предоставляют доступ к обычным пользователям в клиенте. Но поскольку ACE для "все" одинаковы для всех клиентов, разделение клиентов для общедоступных документов зависит от фильтрации идентификатора клиента. Кроме того, поддерживаются запрещенные элементы управления доступом. При приращении запроса добавляется предложение, которое удаляет документ из результата, если найдено соответствующее значение ACE Deny.

При поиске в Exchange Online индекс секционируется на идентификатор почтового ящика для отдельных почтовых ящиков пользователя, а не на идентификатор клиента (идентификатор подписки), как в SharePoint Online. Механизм секционирования аналогичен SharePoint Online, но фильтрация ACL отсутствует.
