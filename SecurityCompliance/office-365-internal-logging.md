---
title: Внутреннее ведение журнала Office 365 для разработки Office 365
ms.author: robmazz
author: robmazz
manager: laurawi
audience: ITPro
ms.topic: article
ms.service: O365-seccomp
localization_priority: Normal
search.appverid:
- MET150
ms.collection:
- Strat_O365_IP
- M365-security-compliance
description: Сведения о том, как работает внутреннее ведение журнала для инженеров отдела Office 365.
ms.openlocfilehash: e8798d4c6d4ba7393612f9a2b22bc282956a2aa9
ms.sourcegitcommit: 0017dc6a5f81c165d9dfd88be39a6bb17856582e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2019
ms.locfileid: "32262681"
---
# <a name="internal-logging-for-office-365-engineering"></a><span data-ttu-id="05b0e-103">Внутренняя регистрация для инженеров Office 365</span><span class="sxs-lookup"><span data-stu-id="05b0e-103">Internal Logging for Office 365 Engineering</span></span>
<span data-ttu-id="05b0e-104">Помимо событий и данных журналов, доступных для клиентов, существует также внутренняя система сбора данных журнала, доступная для инженеров Office 365.</span><span class="sxs-lookup"><span data-stu-id="05b0e-104">In addition to the events and log data available for customers, there is also an internal log data collection system that is available to Office 365 engineers.</span></span> <span data-ttu-id="05b0e-105">Многие типы данных журналов передаются с серверов Office 365 во внутреннюю, общую службу информационных данных с именем Cosmos.</span><span class="sxs-lookup"><span data-stu-id="05b0e-105">Many different types of log data are uploaded from Office 365 servers to an internal, big data computing service called Cosmos.</span></span> <span data-ttu-id="05b0e-106">Каждая группа обслуживания отправляет журналы аудита из соответствующих серверов в базу данных Cosmos для объединения и анализа.</span><span class="sxs-lookup"><span data-stu-id="05b0e-106">Each service team uploads audit logs from their respective servers into the Cosmos database for aggregation and analysis.</span></span> <span data-ttu-id="05b0e-107">Эта передача данных выполняется через FIPS 140-2-проверенное TLS-подключение на специально утвержденных портах и протоколах с помощью специализированного средства автоматизации, называемого загрузчиком данных Office (ODL).</span><span class="sxs-lookup"><span data-stu-id="05b0e-107">This data transfer occurs over a FIPS 140-2-validated TLS connection on specifically approved ports and protocols using a proprietary automation tool called the Office Data Loader (ODL).</span></span> <span data-ttu-id="05b0e-108">Средства, используемые в Office 365 для сбора и обработки записей аудита, не допускают постоянных или необратимых изменений исходного контента записи аудита или порядка времени.</span><span class="sxs-lookup"><span data-stu-id="05b0e-108">The tools used in Office 365 to collect and process audit records do not allow permanent or irreversible changes to the original audit record content or time ordering.</span></span>

<span data-ttu-id="05b0e-109">Службы Teams используют Cosmos как централизованный репозиторий для проведения анализа использования приложений, для измерения производительности системы и производительности, а также для поиска аварийных и нестандартных шаблонов, которые могут указывать на проблемы или проблемы безопасности.</span><span class="sxs-lookup"><span data-stu-id="05b0e-109">Service teams use Cosmos as a centralized repository to conduct an analysis of application usage, to measure system and operational performance, and to look for abnormalities and patterns that may indicate problems or security issues.</span></span> <span data-ttu-id="05b0e-110">Каждая группа обслуживания отправляет базовые файлы журналов в Cosmos, в зависимости от того, что они анализируются, что часто включает в себя следующее:</span><span class="sxs-lookup"><span data-stu-id="05b0e-110">Each service team uploads a baseline of logs into Cosmos, depending on what they are looking to analyze, that often include:</span></span>
- <span data-ttu-id="05b0e-111">Журналы событий</span><span class="sxs-lookup"><span data-stu-id="05b0e-111">Event logs</span></span>
- <span data-ttu-id="05b0e-112">Журналы AppLocker</span><span class="sxs-lookup"><span data-stu-id="05b0e-112">AppLocker logs</span></span>
- <span data-ttu-id="05b0e-113">Данные о производительности</span><span class="sxs-lookup"><span data-stu-id="05b0e-113">Performance data</span></span>
- <span data-ttu-id="05b0e-114">System Center Data</span><span class="sxs-lookup"><span data-stu-id="05b0e-114">System Center data</span></span>
- <span data-ttu-id="05b0e-115">Записи сведений о вызовах</span><span class="sxs-lookup"><span data-stu-id="05b0e-115">Call detail records</span></span>
- <span data-ttu-id="05b0e-116">Данные качества взаимодействия</span><span class="sxs-lookup"><span data-stu-id="05b0e-116">Quality of experience data</span></span>
- <span data-ttu-id="05b0e-117">Журналы веб-сервера IIS</span><span class="sxs-lookup"><span data-stu-id="05b0e-117">IIS Web Server logs</span></span>
- <span data-ttu-id="05b0e-118">Журналы SQL Server</span><span class="sxs-lookup"><span data-stu-id="05b0e-118">SQL Server logs</span></span>
- <span data-ttu-id="05b0e-119">Данные syslog</span><span class="sxs-lookup"><span data-stu-id="05b0e-119">Syslog data</span></span>
- <span data-ttu-id="05b0e-120">Журналы аудита безопасности</span><span class="sxs-lookup"><span data-stu-id="05b0e-120">Security audit logs</span></span>

<span data-ttu-id="05b0e-121">Перед отправкой данных в Cosmos приложение ODL использует службу очистки для маскировки любых полей, содержащих данные клиента, таких как сведения о клиентах и конечных пользователей, и замените эти поля на хэш-значение.</span><span class="sxs-lookup"><span data-stu-id="05b0e-121">Prior to uploading data into Cosmos, the ODL application uses a scrubbing service to obfuscate any fields that contain customer data, such as tenant information and end-user identifiable information, and replace those fields with a hash value.</span></span> <span data-ttu-id="05b0e-122">Анонимные и хэшированные журналы перезаписываются, а затем передаются в Cosmos.</span><span class="sxs-lookup"><span data-stu-id="05b0e-122">The anonymized and hashed logs are rewritten and then uploaded into Cosmos.</span></span> <span data-ttu-id="05b0e-123">Службы Teams запускают запросы в пределах своих данных в Cosmos для корреляции, предупреждений и отчетов.</span><span class="sxs-lookup"><span data-stu-id="05b0e-123">Service teams run scoped queries against their data in Cosmos for correlation, alerting, and reporting.</span></span> <span data-ttu-id="05b0e-124">Период хранения данных журнала аудита в Cosmos определяется командами службы; Большинство данных журнала аудита хранятся в течение 90 или более дней для поддержки расследования инцидентов безопасности и соблюдения нормативных требований к хранению.</span><span class="sxs-lookup"><span data-stu-id="05b0e-124">The period of audit log data retention in Cosmos is determined by the service teams; most audit log data is retained for 90 days or longer to support security incident investigations and to meet regulatory retention requirements.</span></span>

<span data-ttu-id="05b0e-125">Доступ к данным Office 365, хранящимся в Cosmos, ограничен уполномоченными сотрудниками.</span><span class="sxs-lookup"><span data-stu-id="05b0e-125">Access to Office 365 data stored in Cosmos is restricted to authorized personnel.</span></span> <span data-ttu-id="05b0e-126">Корпорация Майкрософт ограничивает возможности управления аудитом ограниченным подмножеством участников группы обслуживания, ответственных за функции аудита.</span><span class="sxs-lookup"><span data-stu-id="05b0e-126">Microsoft restricts the management of audit functionality to the limited subset of service team members that are responsible for audit functionality.</span></span> <span data-ttu-id="05b0e-127">Эти участники группы не могут изменять или удалять данные из Cosmos, а все изменения механизмов ведения журнала для Cosmos записываются и подлежат аудиту.</span><span class="sxs-lookup"><span data-stu-id="05b0e-127">These team members do not have the ability to modify or delete data from Cosmos, and all changes to logging mechanisms for Cosmos are recorded and audited.</span></span>

<span data-ttu-id="05b0e-128">Каждая группа служб получает доступ к данным журнала для анализа путем авторизации определенных приложений для выполнения определенных анализа.</span><span class="sxs-lookup"><span data-stu-id="05b0e-128">Each service team accesses its log data for analysis by authorizing certain applications to conduct specific analysis.</span></span> <span data-ttu-id="05b0e-129">Например, группа безопасности Office 365 использует данные из Cosmos с помощью специализированного средства синтаксического анализа журнала событий для корреляции, оповещения и создания интерактивных отчетов о возможных подозрительных действиях в рабочей среде Office 365.</span><span class="sxs-lookup"><span data-stu-id="05b0e-129">For example, the Office 365 Security team uses data from Cosmos through a proprietary event log parser to correlate, alert, and generate actionable reports on possible suspicious activity in the Office 365 production environment.</span></span> <span data-ttu-id="05b0e-130">Отчеты из этих данных используются для исправления уязвимостей и для улучшения общей производительности службы.</span><span class="sxs-lookup"><span data-stu-id="05b0e-130">The reports from this data are used to correct vulnerabilities, and to improve the overall performance of the service.</span></span> <span data-ttu-id="05b0e-131">Если конкретному оповещению или отчету требуется дополнительное исследование, сотрудники службы могут запросить импорт данных обратно в службу Office 365.</span><span class="sxs-lookup"><span data-stu-id="05b0e-131">If a specific alert or report requires further investigation, service personnel can request that data be imported back into the Office 365 service.</span></span> <span data-ttu-id="05b0e-132">Так как определенный журнал, импортированный из Cosmos, зашифрованы, а сотрудники службы не имеют доступа к ключам расшифровки, целевой журнал программной передачи передается через службу расшифровки, возвращающую результаты с областью авторизованному персоналу службы.</span><span class="sxs-lookup"><span data-stu-id="05b0e-132">Since the specific log being imported from Cosmos is in encrypted and service personnel do not have access to decryption keys, the target log is programmatically passed through a decryption service that returns scoped results to the authorized service personnel.</span></span> <span data-ttu-id="05b0e-133">Все уязвимые места, обнаруженные в этом упражнении, предоставляются и расширяются с помощью стандартных каналов управления инцидентами безопасности Майкрософт.</span><span class="sxs-lookup"><span data-stu-id="05b0e-133">Any vulnerabilities found from this exercise are reported and escalated using Microsoft's standard security incident management channels.</span></span>
