---
title: Отпечатки документов
ms.author: stephow
author: stephow-msft
manager: laurawi
ms.date: 11/17/2014
ms.audience: ITPro
ms.topic: article
search.appverid: MET150
ms.service: exchange-online
localization_priority: Normal
ms.assetid: 1e0c579c-26e0-462a-a1b0-d7506dfe05fa
description: Информационные сотрудники Организации обрабатывают многие виды конфиденциальной информации в течение типичного дня. ОтПечатки документов позволяют упростить защиту этих данных, определив стандартные формы, используемые в Организации. В этом разделе описываются понятия, связанные с использованием отпечатков документов, и способы их создания с помощью PowerShell.
ms.openlocfilehash: 20b9f59902c52d347e7c439cb6f380ee9fd4a30e
ms.sourcegitcommit: 48fa456981b5c52ab8aeace173c8366b9f36723b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/28/2019
ms.locfileid: "30341290"
---
# <a name="document-fingerprinting"></a><span data-ttu-id="c7b0a-105">Создание отпечатка документа</span><span class="sxs-lookup"><span data-stu-id="c7b0a-105">Document Fingerprinting</span></span>

<span data-ttu-id="c7b0a-p102">Информационные сотрудники Организации обрабатывают многие виды конфиденциальной информации в течение типичного дня. В центре безопасности &amp; и соответствия требованиям к отПечатку документов упрощается защита этих сведений путем определения стандартных форм, используемых в Организации. В этом разделе описываются понятия, связанные с использованием отпечатков документов, и способы их создания с помощью PowerShell.</span><span class="sxs-lookup"><span data-stu-id="c7b0a-p102">Information workers in your organization handle many kinds of sensitive information during a typical day. In the Security &amp; Compliance Center, Document Fingerprinting makes it easier for you to protect this information by identifying standard forms that are used throughout your organization. This topic describes the concepts behind Document Fingerprinting and how to create one by using PowerShell.</span></span>
  
## <a name="basic-scenario-for-document-fingerprinting"></a><span data-ttu-id="c7b0a-109">Основной сценарий использования отпечатков документов</span><span class="sxs-lookup"><span data-stu-id="c7b0a-109">Basic scenario for Document Fingerprinting</span></span>

<span data-ttu-id="c7b0a-p103">ОтПечатки документов — это функция защиты от потери данных, преобразующая стандартную форму в тип конфиденциальной информации, которую можно использовать в правилах политик защиты от потери данных. Например, можно создать отпечаток документа на основе пустого шаблона патента, а затем создать политику защиты от потери данных, которая будет обнаруживать и блокировать все исходящие шаблоны патентов с конфиденциальным контентом, заполненным. Кроме того, можно настроить [подсказки политики](use-notifications-and-policy-tips.md) , чтобы уведомить отправителей о том, что они могут отправлять конфиденциальную информацию, а отправителю необходимо убедиться, что получатели являются квалифицированными для получения патентов. Этот процесс работает с текстовыми формами, используемыми в Организации. Ниже приведены дополнительные примеры форм, которые можно отправить.</span><span class="sxs-lookup"><span data-stu-id="c7b0a-p103">Document Fingerprinting is a Data Loss Prevention (DLP) feature that converts a standard form into a sensitive information type, which you can use in the rules of your DLP policies. For example, you can create a document fingerprint based on a blank patent template and then create a DLP policy that detects and blocks all outgoing patent templates with sensitive content filled in. Optionally, you can set up [policy tips](use-notifications-and-policy-tips.md) to notify senders that they might be sending sensitive information, and the sender should verify that the recipients are qualified to receive the patents. This process works with any text-based forms used in your organization. Additional examples of forms that you can upload include:</span></span> 
  
- <span data-ttu-id="c7b0a-115">Правительственные формы</span><span class="sxs-lookup"><span data-stu-id="c7b0a-115">Government forms</span></span>
    
- <span data-ttu-id="c7b0a-116">Формы соответствия требованиям обязательного медицинского страхования</span><span class="sxs-lookup"><span data-stu-id="c7b0a-116">Health Insurance Portability and Accountability Act (HIPAA) compliance forms</span></span>
    
- <span data-ttu-id="c7b0a-117">Формы сведений о сотрудниках для отделов кадров</span><span class="sxs-lookup"><span data-stu-id="c7b0a-117">Employee information forms for Human Resources departments</span></span>
    
- <span data-ttu-id="c7b0a-118">Настраиваемые формы, созданные специально для вашей организации</span><span class="sxs-lookup"><span data-stu-id="c7b0a-118">Custom forms created specifically for your organization</span></span>
    
<span data-ttu-id="c7b0a-p104">В идеале у вашей организации уже есть настроенная бизнес-практика использования определенных форм для передачи конфиденциальной информации. После отправки пустой формы для преобразования в отпечаток документа и настройки соответствующей политики DLP обнаруживает все документы в исходящей почте, соответствующие этому отпечатку.</span><span class="sxs-lookup"><span data-stu-id="c7b0a-p104">Ideally, your organization already has an established business practice of using certain forms to transmit sensitive information. After you upload an empty form to be converted to a document fingerprint and set up a corresponding policy, the DLP detects any documents in outbound mail that match that fingerprint.</span></span>
  
## <a name="how-document-fingerprinting-works"></a><span data-ttu-id="c7b0a-121">Принцип работы отпечатков документов</span><span class="sxs-lookup"><span data-stu-id="c7b0a-121">How Document Fingerprinting works</span></span>

<span data-ttu-id="c7b0a-p105">Вероятно, вы уже предполагаюи, что документы не имеют фактических отпечатков пальцев, но это имя поможет объяснить эту функцию. Так же, как отпечатки лица имеют уникальные шаблоны, документы имеют уникальные шаблоны Word. При отправке файла DLP определяет уникальный шаблон Word в документе, создает отпечаток документа на основе этого шаблона и использует этот отпечаток документа для обнаружения исходящих документов, содержащих такой же шаблон. Именно поэтому при отправке формы или шаблона создается наиболее эффективный тип отпечатка документа. Все, заполняющие форму, используют один и тот же исходный набор слов, а затем добавляет в документ свои слова. Пока исходящий документ не защищен паролем и содержит весь текст из исходной формы, DLP может определить, соответствует ли документ отпечатка документа.</span><span class="sxs-lookup"><span data-stu-id="c7b0a-p105">You've probably already guessed that documents don't have actual fingerprints, but the name helps explain the feature. In the same way that a person's fingerprints have unique patterns, documents have unique word patterns. When you upload a file, DLP identifies the unique word pattern in the document, creates a document fingerprint based on that pattern, and uses that document fingerprint to detect outbound documents containing the same pattern. That's why uploading a form or template creates the most effective type of document fingerprint. Everyone who fills out a form uses the same original set of words and then adds his or her own words to the document. As long as the outbound document isn't password protected and contains all the text from the original form, DLP can determine if the document matches the document fingerprint.</span></span>
  
<span data-ttu-id="c7b0a-128">В примере ниже показано, что происходит, если вы создаете отпечаток документа на основе шаблона патента, но вы можете использовать любую форму в качестве основы для создания отпечатка документа.</span><span class="sxs-lookup"><span data-stu-id="c7b0a-128">The following example shows what happens if you create a document fingerprint based on a patent template, but you can use any form as a basis for creating a document fingerprint.</span></span>
  
<span data-ttu-id="c7b0a-129">**Пример патентного документа, соответствующего отпечатку документа для шаблона патента**</span><span class="sxs-lookup"><span data-stu-id="c7b0a-129">**Example of a patent document matching a document fingerprint of a patent template**</span></span>

![Документ_финжерпринтинг_диаграм. png](media/Document_Fingerprinting_diagram.png)
  
<span data-ttu-id="c7b0a-p106">Шаблон патента содержит пустые поля "название патента", "товарные запасы" и "Описание" и описания для каждого из этих полей — это шаблон Word. Когда вы отправляете исходный шаблон патента, он находится в одном из поддерживаемых типов файлов и в виде обычного текста. DLP преобразует этот шаблон Word в отпечаток документа, который представляет собой небольшой XML-файл в формате Юникод с уникальным значением хэша, представляющим исходный текст, а отпечаток сохраняется как классификация данных в Active Directory. (В качестве меры безопасности исходный документ не хранится в службе, сохраняется только значение хэша, и исходный документ нельзя восстановить из хэш-значения.) После этого отпечаток патента становится типом конфиденциальной информации, который можно связать с политикой защиты от потери данных. После связывания отпечатка пальца с политикой защиты от потери данных, DLP определяет все исходящие сообщения, содержащие документы, соответствующие отпечатку патента и работающие с ними в соответствии с политикой Организации.</span><span class="sxs-lookup"><span data-stu-id="c7b0a-p106">The patent template contains the blank fields "Patent title," "Inventors," and "Description" and descriptions for each of those fields—that's the word pattern. When you upload the original patent template, it's in one of the supported file types and in plain text. DLP converts this word pattern into a document fingerprint, which is a small Unicode XML file containing a unique hash value representing the original text, and the fingerprint is saved as a data classification in Active Directory. (As a security measure, the original document itself isn't stored on the service; only the hash value is stored, and the original document can't be reconstructed from the hash value.) The patent fingerprint then becomes a sensitive information type that you can associate with a DLP policy. After you associate the fingerprint with a DLP policy, DLP detects any outbound emails containing documents that match the patent fingerprint and deals with them according to your organization's policy.</span></span> 

<span data-ttu-id="c7b0a-p107">Например, может потребоваться настроить политику DLP, которая запрещает обычным сотрудникам отправлять исходящие сообщения, содержащие патенты. DLP будет использовать патентный отпечаток для обнаружения патентов и блокировки этих сообщений. Кроме того, вы можете предоставить своему юридическому отделу возможность отправлять патенты другим организациям, так как для этого требуется бизнес-решение. Вы можете разрешить определенным отделам отправлять конфиденциальную информацию, создав исключения для этих отделов в политике защиты от потери данных, или разрешить им переопределять подсказку политики с бизнес-обоснованием.</span><span class="sxs-lookup"><span data-stu-id="c7b0a-p107">For example, you might want to set up a DLP policy that prevents regular employees from sending outgoing messages containing patents. DLP will use the patent fingerprint to detect patents and block those emails. Alternatively, you might want to let your legal department to be able to send patents to other organizations because it has a business need for doing so. You can allow specific departments to send sensitive information by creating exceptions for those departments in your DLP policy, or you can allow them to override a policy tip with a business justification.</span></span>
  
### <a name="supported-file-types"></a><span data-ttu-id="c7b0a-140">Поддерживаемые типы файлов</span><span class="sxs-lookup"><span data-stu-id="c7b0a-140">Supported file types</span></span>

<span data-ttu-id="c7b0a-p108">ОтПечатки документов поддерживают те же типы файлов, что и в правилах для обработки почты (также называемых правилами транспорта). Список поддерживаемых типов файлов приведен в разделе [Поддерживаемые типы файлов для проверки содержимого правила для почтового процесса](https://docs.microsoft.com/en-us/exchange/security-and-compliance/mail-flow-rules/inspect-message-attachments#supported-file-types-for-mail-flow-rule-content-inspection). Одна быстрая заметка о типах файлов: правила обработки почтового ящика и отПечатки документов поддерживают тип файла. dotx, который может быть запутанным из-за того, что это файл шаблона в Word. Если вы видите слово "Template" (шаблон) в этой и другой теме отПечатка пальца документа, он ссылается на документ, который вы установили как стандартную форму, а не тип файла шаблона.</span><span class="sxs-lookup"><span data-stu-id="c7b0a-p108">Document Fingerprinting supports the same file types that are supported in mail flow rules (also known as transport rules). For a list of supported file types, see [Supported file types for mail flow rule content inspection](https://docs.microsoft.com/en-us/exchange/security-and-compliance/mail-flow-rules/inspect-message-attachments#supported-file-types-for-mail-flow-rule-content-inspection). One quick note about file types: neither mail flow rules nor Document Fingerprinting supports the .dotx file type, which can be confusing because that's a template file in Word. When you see the word "template" in this and other Document Fingerprinting topics, it refers to a document that you have established as a standard form, not the template file type.</span></span>
  
#### <a name="limitations-of-document-fingerprinting"></a><span data-ttu-id="c7b0a-145">Ограничения относительно отпечатков документов</span><span class="sxs-lookup"><span data-stu-id="c7b0a-145">Limitations of document fingerprinting</span></span>

<span data-ttu-id="c7b0a-146">ОтПечатки документов не обнаруживают конфиденциальные сведения в следующих случаях:</span><span class="sxs-lookup"><span data-stu-id="c7b0a-146">Document Fingerprinting won't detect sensitive information in the following cases:</span></span>
  
- <span data-ttu-id="c7b0a-147">Файлы защищены паролем.</span><span class="sxs-lookup"><span data-stu-id="c7b0a-147">Password protected files</span></span>
    
- <span data-ttu-id="c7b0a-148">Файлы содержат только изображения.</span><span class="sxs-lookup"><span data-stu-id="c7b0a-148">Files that contain only images</span></span>
    
- <span data-ttu-id="c7b0a-149">Документы не содержат весь текст из исходной формы, которая использовалась для создания отпечатка документа.</span><span class="sxs-lookup"><span data-stu-id="c7b0a-149">Documents that don't contain all the text from the original form used to create the document fingerprint</span></span>
    
## <a name="use-powershell-to-create-a-classification-rule-package-based-on-document-fingerprinting"></a><span data-ttu-id="c7b0a-150">Создание пакета правил классификации на основе отпечатков документов с помощью PowerShell</span><span class="sxs-lookup"><span data-stu-id="c7b0a-150">Use PowerShell to create a classification rule package based on document fingerprinting</span></span>

<span data-ttu-id="c7b0a-p109">Обратите внимание, что в настоящее время вы можете создать отпечаток документа только &amp; с помощью PowerShell в центре безопасности и соответствия требованиям. Чтобы подключиться, ознакомьтесь [со статьЕй подключение к Office 365 Security _амп_ в PowerShell центра соответствия требованиям](https://docs.microsoft.com/en-us/powershell/exchange/office-365-scc/connect-to-scc-powershell/connect-to-scc-powershell).</span><span class="sxs-lookup"><span data-stu-id="c7b0a-p109">Note that you can currently create a document fingerprint only by using PowerShell in the Security &amp; Compliance Center. To connect, see [Connect to Office 365 Security & Compliance Center PowerShell](https://docs.microsoft.com/en-us/powershell/exchange/office-365-scc/connect-to-scc-powershell/connect-to-scc-powershell).</span></span>

<span data-ttu-id="c7b0a-p110">DLP использует пакеты правил классификации для обнаружения конфиденциального содержимого. Чтобы создать пакет правил классификации на основе отпечатка документа, используйте командлеты **New – длпфинжерпринт** и **New – DlpSensitiveInformationType** . Так как результаты **New-длпфинжерпринт** не хранятся вне правила классификации данных, всегда выполняются командлеты **New-длпфинжерпринт** и **New-DlpSensitiveInformationType** или **Set-DlpSensitiveInformationType** в той же Сеанс PowerShell. В примере ниже показано, как создать новый отпечаток документа на основе файла \ \ Documents\Contoso Employee Template. docx. Новый отпечаток сохраняется в виде переменной, поэтому его можно использовать с командлетом **New – DlpSensitiveInformationType** в том же сеансе PowerShell.</span><span class="sxs-lookup"><span data-stu-id="c7b0a-p110">DLP uses classification rule packages to detect sensitive content. To create a classification rule package based on a document fingerprint, use the **New-DlpFingerprint** and **New-DlpSensitiveInformationType** cmdlets. Because the results of **New-DlpFingerprint** aren't stored outside the data classification rule, you always run **New-DlpFingerprint** and **New-DlpSensitiveInformationType** or **Set-DlpSensitiveInformationType** in the same PowerShell session. The following example creates a new document fingerprint based on the file C:\My Documents\Contoso Employee Template.docx. You store the new fingerprint as a variable so you can use it with the **New-DlpSensitiveInformationType** cmdlet in the same PowerShell session.</span></span> 
  
```
$Employee_Template = Get-Content "C:\My Documents\Contoso Employee Template.docx" -Encoding byte -ReadCount 0
$Employee_Fingerprint = New-DlpFingerprint -FileData $Employee_Template -Description "Contoso Employee Template"
```

<span data-ttu-id="c7b0a-158">Давайте создадим новое правило классификации данных с именем "Contoso Employee Confidential", использующее отпечаток документа из файла C:\My Documents\Contoso Customer Information Form.docx.</span><span class="sxs-lookup"><span data-stu-id="c7b0a-158">Now, let's create a new data classification rule named "Contoso Employee Confidential" that uses the document fingerprint of the file C:\My Documents\Contoso Customer Information Form.docx.</span></span>
  
```
$Employee_Template = Get-Content "C:\My Documents\Contoso Customer Information Form.docx" -Encoding byte -ReadCount 0
$Customer_Fingerprint = New-DlpFingerprint -FileData $Customer_Form -Description "Contoso Customer Information Form"
New-DlpSensitiveInformationType -Name "Contoso Customer Confidential" -Fingerprints $Customer_Fingerprint -Description "Message contains Contoso customer information." 
```

<span data-ttu-id="c7b0a-159">Теперь вы можете использовать командлет **Get-DlpSensitiveInformationType** для поиска всех пакетов правил классификации данных защиты от потери данных, а в этом примере "Contoso Customer Confidential" входит в список пакетов правил классификации данных.</span><span class="sxs-lookup"><span data-stu-id="c7b0a-159">You can now use the **Get-DlpSensitiveInformationType** cmdlet to find all DLP data classification rule packages, and in this example, "Contoso Customer Confidential" is part of the data classification rule packages list.</span></span> 
  
<span data-ttu-id="c7b0a-p111">Наконец, добавьте пакет правил классификации данных "Contoso Customer Confidential" в политику защиты от потери данных в центре &amp; соответствия требованиям безопасности. В этом примере показано, как добавить правило к существующей политике защиты от потери данных с именем "Конфидентиалполици".</span><span class="sxs-lookup"><span data-stu-id="c7b0a-p111">Finally, add the "Contoso Customer Confidential" data classification rule package to a DLP policy in the Security &amp; Compliance Center. This example adds a rule to an existing DLP policy named "ConfidentialPolicy".</span></span>

```
New-DlpComplianceRule -Name "ContosoConfidentialRule" -Policy "ConfidentialPolicy" -ContentContainsSensitiveInformation @{Name="Contoso Customer Confidential"} -BlockAccess $True
```

<span data-ttu-id="c7b0a-p112">Вы также можете использовать пакет правил классификации данных в правилах обработки почтового ящика в Exchange Online, как показано в следующем примере. Чтобы выполнить эту команду, сначала необходимо [подключиться к Exchange Online PowerShell](https://docs.microsoft.com/en-us/powershell/exchange/exchange-online/connect-to-exchange-online-powershell/connect-to-exchange-online-powershell). Также обратите внимание на то, что пакет правил должен синхронизироваться с центром &amp; безопасности Exchange в центре администрирования Exchange.</span><span class="sxs-lookup"><span data-stu-id="c7b0a-p112">You can also use the data classification rule package in mail flow rules in Exchange Online, as shown in the following example. To run this command, you first need to [Connect to Exchange Online PowerShell](https://docs.microsoft.com/en-us/powershell/exchange/exchange-online/connect-to-exchange-online-powershell/connect-to-exchange-online-powershell). Also note that it takes time for the rule package to sync from the Security &amp; Compliance Center to the Exchange admin center.</span></span>
  
```
New-TransportRule -Name "Notify :External Recipient Contoso confidential" -NotifySender NotifyOnly -Mode Enforce -SentToScope NotInOrganization -MessageContainsDataClassification @{Name=" Contoso Customer Confidential"}

```

<span data-ttu-id="c7b0a-165">Теперь DLP обнаруживает документы, которые совпадают с отпечаткой документа Contoso Customer Form. docx.</span><span class="sxs-lookup"><span data-stu-id="c7b0a-165">DLP now detects documents that match the Contoso Customer Form.docx document fingerprint.</span></span>
  
<span data-ttu-id="c7b0a-166">Сведения о синтаксисе и параметрах можно найти в следующих статьях:</span><span class="sxs-lookup"><span data-stu-id="c7b0a-166">For syntax and parameter information, see:</span></span>

- [<span data-ttu-id="c7b0a-167">New — Длпфинжерпринт</span><span class="sxs-lookup"><span data-stu-id="c7b0a-167">New-DlpFingerprint</span></span>](https://docs.microsoft.com/powershell/module/exchange/policy-and-compliance-dlp/New-DlpFingerprint)
- [<span data-ttu-id="c7b0a-168">New — DlpSensitiveInformationType</span><span class="sxs-lookup"><span data-stu-id="c7b0a-168">New-DlpSensitiveInformationType</span></span>](https://docs.microsoft.com/powershell/module/exchange/policy-and-compliance-dlp/New-DlpSensitiveInformationType)
- [<span data-ttu-id="c7b0a-169">ReMove — DlpSensitiveInformationType</span><span class="sxs-lookup"><span data-stu-id="c7b0a-169">Remove-DlpSensitiveInformationType</span></span>](https://docs.microsoft.com/powershell/module/exchange/policy-and-compliance-dlp/Remove-DlpSensitiveInformationType)
- [<span data-ttu-id="c7b0a-170">Set — DlpSensitiveInformationType</span><span class="sxs-lookup"><span data-stu-id="c7b0a-170">Set-DlpSensitiveInformationType</span></span>](https://docs.microsoft.com/powershell/module/exchange/policy-and-compliance-dlp/Set-DlpSensitiveInformationType)
- [<span data-ttu-id="c7b0a-171">Get — DlpSensitiveInformationType</span><span class="sxs-lookup"><span data-stu-id="c7b0a-171">Get-DlpSensitiveInformationType</span></span>](https://docs.microsoft.com/powershell/module/exchange/policy-and-compliance-dlp/Get-DlpSensitiveInformationType)
