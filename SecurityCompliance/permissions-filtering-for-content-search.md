---
title: Настройка фильтрации разрешений для поиска содержимого
ms.author: markjjo
author: markjjo
manager: laurawi
ms.date: 5/14/2018
audience: Admin
ms.topic: article
ms.service: O365-seccomp
localization_priority: Normal
ms.collection:
- Strat_O365_IP
- M365-security-compliance
search.appverid:
- MOE150
- MET150
ms.assetid: 1adffc35-38e5-4f7d-8495-8e0e8721f377
description: Используйте фильтрацию разрешений поиска контента, чтобы позволить диспетчеру обнаружения электронных данных искать только подмножество почтовых ящиков и сайтов в организации Office 365.
ms.openlocfilehash: 32db709132ff8e635ee42f2029cf3394c3820105
ms.sourcegitcommit: 803baca9f99a6691fb41a3308e799752e4d8f20c
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/25/2019
ms.locfileid: "35222273"
---
# <a name="configure-permissions-filtering-for-content-search"></a>Настройка фильтрации разрешений для поиска содержимого

Можно использовать фильтрацию разрешений поиска, чтобы позволить диспетчеру обнаружения электронных данных искать только подмножество почтовых ящиков и сайтов в организации Office 365. Кроме того, фильтрацию разрешений можно использовать, чтобы разрешить диспетчеру eDiscovery поиск только содержимого почтовых ящиков или сайтов, которое отвечает определенным условиям поиска. Например, вы можете разрешить диспетчеру eDiscovery поиск только в почтовых ящиках пользователей в определенном расположении или подразделении. Для этого нужно создать фильтр, который использует поддерживаемый фильтр получателей для ограничения доступных для поиска почтовых ящиков. Вы также можете создать фильтр, определяющий доступное для поиска содержимое почтового ящика. Для этого нужно создать фильтр, который использует свойство сообщений, поддерживающее поиск. Аналогичным образом можно разрешить диспетчеру eDiscovery искать в Организации только определенные сайты SharePoint. Для этого нужно создать фильтр, ограничивающий доступные для поиска сайты. Кроме того, вы можете создать фильтр, определяющий доступное для поиска содержимое сайта. Для этого нужно создать фильтр, который использует свойство сайта, поддерживающее поиск.

Вы также можете использовать фильтрацию разрешений поиска для создания логических границ (называемых *границами соответствия*) в организации Office 365, управляющей расположением содержимого пользователя (например, почтовыми ящиками, сайтами SharePoint и учетными записями OneDrive), которые конкретные менеджеры обнаружения электронных данных могут выполнять поиск. Для получения дополнительных сведений см. [Настройка ограничений на соответствие для исследований обнаружения электронных данных в Office 365](set-up-compliance-boundaries.md).
  
Фильтрация разрешений поиска поддерживается компонентом "поиск контента" в центре безопасности & соответствия требованиям. Эти четыре командлета позволяют настраивать фильтры разрешений поиска и управлять ими.
  
[New — ComplianceSecurityFilter](#new-compliancesecurityfilter)

[Get — ComplianceSecurityFilter](#get-compliancesecurityfilter)

[Set — ComplianceSecurityFilter](#set-compliancesecurityfilter)

[Remove — ComplianceSecurityFilter](#remove-compliancesecurityfilter)

## <a name="before-you-begin"></a>Приступая к работе

- Для запуска командлетов фильтра безопасности соответствия необходимо быть членом группы ролей "Управление организацией" в центре безопасности & соответствия требованиям. Дополнительные сведения см. [в разделе разрешения в центре безопасности & соответствия требованиям](permissions-in-the-security-and-compliance-center.md).
    
- Чтобы использовать командлеты фильтра безопасности соответствия требованиям, необходимо подключить Windows PowerShell к центру безопасности & соответствия требованиям и организации Exchange Online. Это необходимо из-за того, что для этих командлетов требуется доступ к свойствам почтового ящика, поэтому необходимо подключиться к Exchange Online. Просмотрите действия, описанные в следующем разделе. 
    
- Дополнительные сведения о фильтрах разрешений поиска см. в статье [More information](#more-information). 
    
- Фильтрация разрешений поиска применяется к неактивным почтовым ящикам, что означает, что можно использовать фильтрацию почтовых ящиков и содержимого почтовых ящиков, чтобы ограничить круг пользователей, которые могут выполнять поиск Дополнительные сведения о фильтрации разрешений и неактивных почтовых ящиках можно найти в разделе [More Information (Дополнительные сведения](#more-information) ). 
    
-  Фильтрация разрешений на поиск не позволяет ограничить круг пользователей, которые могут выполнять поиск в общедоступных папках в Exchange. 
    
- Количество фильтров разрешений поиска, которые могут быть созданы в Организации, не ограничено. Но производительность поиска окажет влияние на более 100 фильтров разрешений поиска. Чтобы максимально уменьшить количество фильтров разрешений поиска в Организации, создайте фильтры, которые объединяют правила для Exchange, SharePoint и OneDrive в едином фильтре везде, где это возможно.
    
## <a name="connect-to-the-security--compliance-center-and-exchange-online-in-a-single-remote-powershell-session"></a>Подключение к центру безопасности & соответствия требованиям и Exchange Online в едином удаленном сеансе PowerShell

1. Сохраните приведенный ниже текст в файле скрипта Windows PowerShell с помощью суффикса имени файла **. ps1**. Например, вы можете сохранить его в файл с именем **коннектексо-КК. ps1**.
    
    ```
    $UserCredential = Get-Credential
    $Session = New-PSSession -ConfigurationName Microsoft.Exchange -ConnectionUri https://ps.outlook.com/powershell-liveid -Credential $UserCredential -Authentication Basic -AllowRedirection
    Import-PSSession $Session -DisableNameChecking
    $Session = New-PSSession -ConfigurationName Microsoft.Exchange -ConnectionUri https://ps.compliance.protection.outlook.com/powershell-liveid -Credential $UserCredential -Authentication Basic -AllowRedirection
    Import-PSSession $Session -AllowClobber -DisableNameChecking
    $Host.UI.RawUI.WindowTitle = $UserCredential.UserName + " (Exchange Online + Compliance Center)"
    ```

2. На локальном компьютере откройте Windows PowerShell, перейдите к папке, в которой расположен скрипт, созданный на предыдущем шаге, и запустите его. Например:
    
    ```
    .\ConnectEXO-CC.ps1
    ```
 
Как узнать, работает ли это? После выполнения скрипта командлеты из центра безопасности & соответствия требованиям и Exchange Online импортируются в локальный сеанс Windows PowerShell. Если при этом не возникают ошибки, подключение установлено. Быстрая проверка состоит в том, чтобы выполнить командлет центра безопасности & соответствия требованиям и командлет Exchange Online. Например, можно выполнить командлет **Install – унифиедкомплианцепререкуисите** и **Get/Mailbox**. 
  
Если возникают ошибки, просмотрите список возможных причин ниже.
  
- Распространенная проблема — неправильный пароль. Повторите два описанных выше действия. Особенное внимание уделите вводу имени пользователя и пароля на шаге 1.
    
- Убедитесь, что у вашей учетной записи есть разрешение на доступ к центру безопасности & соответствия требованиям. Дополнительные сведения приведены в разделе [предоставление пользователям доступа к центру безопасности & соответствия требованиям](grant-access-to-the-security-and-compliance-center.md).
    
- Для предотвращения атак типа "отказ в обслуживании" (DoS) можно открыть не более трех подключений удаленной оболочки PowerShell к центру безопасности & соответствия требованиям.
    
- Windows PowerShell необходимо настроить для запуска сценариев. Эта настройка выполняется на компьютере только однажды, а не каждый раз при подключении. Чтобы включить выполнение подписанных сценариев в Windows PowerShell, выполните следующую команду в окне Windows PowerShell с повышенными привилегиями (окно Windows PowerShell, которое открывается с помощью параметра **Запуск от имени администратора**).

    ```
    Set-ExecutionPolicy RemoteSigned
    ```
- Необходимо открыть TCP-порт 80 для трафика между локальным компьютером и Office 365. Вполне вероятно, что он уже открыт, то в этом следует убедиться, если в вашей организации действует политика ограниченного доступа к Интернету.
    

  
## <a name="new-compliancesecurityfilter"></a>New — ComplianceSecurityFilter

**New-ComplianceSecurityFilter** используется для создания фильтра разрешений поиска. В следующей таблице описываются параметры для этого командлета. Все они необходимы для создания фильтра соответствия требованиям безопасности. 
  
|**Parameter**|**Описание**|
|:-----|:-----|
| _Действие_ <br/> | Параметр _Action_ указывает тип действия поиска, к которому применяется фильтр. Возможные действия для поиска содержимого:  <br/><br/> **Export** — фильтр применяется при экспорте результатов поиска.  <br/> **Предварительный просмотр** — фильтр применяется при просмотре результатов поиска.  <br/> **Очистить** — фильтр применяется при очистке результатов поиска.  <br/> **Поиск** — фильтр применяется при выполнении поиска.  <br/> **ALL** — фильтр применяется ко всем действиям поиска.  <br/> |
| _FilterName_ <br/> |Параметр _filtername_ указывает имя фильтра разрешений. Это имя используется для определения фильтра при запуске командлетов **Get-ComplianceSecurityFilter**, **Set-ComplianceSecurityFilter,** и **Remove-ComplianceSecurityFilter**.  <br/> |
| _Filters_ <br/> | Параметр _Filters_ указывает критерии поиска для фильтра безопасности соответствия. Можно создать три различных типа фильтров, указанные ниже.  <br/><br/> **Фильтрация** почтовых ящиков — этот тип фильтра указывает почтовые ящики, __ в которых назначенные пользователи (указанные с помощью параметра Users) могут выполнять поиск. Синтаксис этого типа фильтра — **маилбокс_** _Маилбокспропертинаме_, где _маилбокспропертинаме_ указывает свойство почтового ящика, используемое для определения области почтовых ящиков, в которых можно выполнять поиск. Например, фильтр `"Mailbox_CustomAttribute10 -eq 'OttawaUsers'"` почтовых ящиков позволит пользователю назначить этому фильтру только те почтовые ящики поиска со значением "оттаваусерс" в свойстве CustomAttribute10.  <br/>  Для свойства _маилбокспропертинаме_ можно использовать любые поддерживаемые фильтруемые свойства получателей. Список поддерживаемых свойств представлен в разделе Фильтруемые [свойства для параметра – RecipientFilter](https://go.microsoft.com/fwlink/p/?LinkId=784903).  <br/><br/> **Фильтрация содержимого почтового ящика** — этот тип фильтра применяется к контенту, в котором можно выполнять поиск. В нем указывается содержимое почтового ящика, для которого назначенные пользователи могут выполнять поиск. Синтаксис для этого типа фильтра — **маилбоксконтент_** _сеарчаблепропертинаме: значение_, где _сеарчаблепропертинаме_ указывает свойство языка запросов по ключевым словам (KQL), которое может быть указано при поиске контента. Например, фильтр `MailboxContent_recipients:contoso.com` содержимого почтовых ящиков позволяет пользователю, назначенному этому фильтру, искать сообщения, отправленные получателям в домене contoso.com.  <br/>  Список свойств сообщений, включаемых в поиск, приведен в разделе [запросы ключевых слов и условия поиска контента](keyword-queries-and-search-conditions.md).  <br/><br/> **Фильтрация содержимого сайта и сайта** — существуют два фильтра SharePoint и OneDrive для бизнеса, связанные с сайтами, которые можно использовать для указания контента сайта или сайта, который могут выполнять пользователи.  <br/><br/> - **Сите_** _Сеарчаблеситепроперти_ <br/> - **Ситеконтент_** _Сеарчаблеситепроперти_ <br/><br/>  Эти два фильтра являются взаимозаменяемыми. Например, `"Site_Path -like 'https://contoso.sharepoint.com/sites/doctors*'"` и `"SiteContent_Path -like 'https://contoso.sharepoint.com/sites/doctors*'"` будет возвращать те же результаты. Но чтобы помочь определить, что делает фильтр, можно `Site_` указать свойства, связанные с сайтом (например, URL-адрес сайта), и указать `SiteContent_` свойства, связанные с контентом (например, типы документов). Например, фильтр `"Site_Path -like 'https://contoso.sharepoint.com/sites/doctors*'"` позволит пользователю назначить этот фильтр только для поиска контента в семействе https://contoso.sharepoint.com/sites/doctors веб-сайтов. Фильтр `"SiteContent_FileExtension -eq 'docx'"` позволит пользователю назначить этот фильтр только поиску документов Word (Word 2007 и более поздних версий).  <br/><br/>  Список свойств сайта, поддерживающих поиск, представлен [в статье Обзор свойств для обхода и управляемых свойств в SharePoint](https://go.microsoft.com/fwlink/p/?LinkId=331599). Свойства, помеченные с помощью параметра **Да** в столбце **Queryable** , можно использовать для создания фильтра содержимого сайта или сайта.  <br/> <br/> **Важно!**  Один фильтр поиска может иметь только один тип фильтра; Он не может содержать фильтр почтовых ящиков и фильтр сайта; Аналогично, он не может содержать фильтр почтовых ящиков и фильтр содержимого почтового ящика. Однако фильтр может содержать более сложный запрос того же типа. Например,  `"Mailbox_CustomAttribute10 -eq 'FTE' -and Mailbox_MemberOfGroup -eq '$($DG.DistinguishedName)'"`. <br/><br/> **Важно!** Необходимо создать фильтр разрешений поиска, чтобы явно запретить пользователям выполнять поиск в расположении содержимого в определенной службе Office 365 (например, предотвратить Поиск пользователя в любом почтовом ящике Exchange или на любом сайте SharePoint). Другими словами, создание фильтра "разрешения поиска", позволяющего пользователю выполнять поиск по всем сайтам SharePoint в Организации, не запрещает этому пользователю выполнять поиск в почтовых ящиках. Например, чтобы разрешить администраторам SharePoint выполнять поиск только на сайтах SharePoint, необходимо создать фильтр, который запрещает им выполнять поиск в почтовых ящиках. Аналогичным образом, чтобы разрешить администраторам Exchange выполнять поиск только в почтовых ящиках, необходимо создать фильтр, который не позволит им выполнять поиск на сайтах.           |
| _пользователи_; <br/> |Параметр _Users_ указывает пользователей, которые применяют этот фильтр к поиску контента. Пользователи определяются по псевдониму или основному SMTP-адресу. Вы можете указать несколько значений, разделенных запятыми, или назначить фильтр всем пользователям, используя значение **All**.  <br/> Вы также можете использовать параметр _Users_ , чтобы указать группу ролей центра безопасности & соответствия требованиям. С его помощью можно создать настраиваемую группу ролей, а затем назначить ей фильтр разрешений поиска. Предположим, у вас есть настраиваемая группа ролей для диспетчеров eDiscovery в дочернем подразделении международной корпорации, находящемся в США. Вы можете использовать параметр _Users_ , чтобы указать эту группу ролей (с помощью свойства Name группы ролей), а затем с помощью параметра _Filter_ разрешить поиск только почтовых ящиков в США.  <br/> Этот параметр не позволяет указать группы рассылки.  <br/> |
   

## <a name="examples-of-creating-search-permissions-filters"></a>Примеры создания фильтров разрешений поиска

Ниже приведены примеры использования командлета **New-ComplianceSecurityFilter** для создания фильтра разрешений поиска. 
  
В этом примере пользователю annb@contoso.com разрешено выполнять все действия по поиску контента только для почтовых ящиков в Канаде. Этот фильтр содержит трехзначный числовой код Канады по стандарту ISO 3166-1.

```
New-ComplianceSecurityFilter -FilterName CountryFilter  -Users annb@contoso.com -Filters "Mailbox_CountryCode  -eq '124'" -Action All
```

В этом примере пользователи донх и сузанф могут искать только почтовые ящики, для которых в свойстве Mailbox CustomAttribute1 задано значение "Marketing".

```
New-ComplianceSecurityFilter -FilterName MarketingFilter  -Users donh,suzanf -Filters "Mailbox_CustomAttribute1  -eq 'Marketing'" -Action Search
```
   
В этом примере членам группы ролей US Discovery Managers разрешается выполнять все действия поиска содержимого только в почтовых ящиках на территории США. Этот фильтр содержит трехзначный числовой код США по стандарту ISO 3166-1.
  
```
New-ComplianceSecurityFilter -FilterName USDiscoveryManagers  -Users "US Discovery Managers" -Filters "Mailbox_CountryCode  -eq '840'" -Action All
```

В этом примере члены группы ролей "Диспетчер обнаружения электронных данных" могут выполнять поиск только почтовых ящиков участников группы рассылки Ottawa Users. 
  
```
$DG = Get-DistributionGroup "Ottawa Users"
```

```
New-ComplianceSecurityFilter -FilterName DGFilter  -Users eDiscoveryManager -Filters "Mailbox_MemberOfGroup -eq '$($DG.DistinguishedName)'" -Action Search
```
В этом примере пользователи не могут удалять содержимое из почтовых ящиков членов группы рассылки Executive Team (Руководство).

```
$DG = Get-DistributionGroup "Executive Team"
```

```
New-ComplianceSecurityFilter -FilterName NoExecutivesPreview  -Users All -Filters "Mailbox_MemberOfGroup -ne '$($DG.DistinguishedName)'" -Action Purge
```
   
В этом примере члены настраиваемой группы ролей "менеджеры обнаружения электронных данных" могут выполнять поиск только контента в ресурсах OneDrive для бизнеса в Организации.

```
New-ComplianceSecurityFilter -FilterName OneDriveOnly  -Users "OneDrive eDiscovery Managers" -Filters "Site_Path -like 'https://contoso-my.sharepoint.com/personal*'" -Action Search
```
   
> [!NOTE]
> Чтобы запретить пользователям выполнять поиск на определенных сайтах, используйте фильтр `Site_Path`, как показано в предыдущем примере. Использование `Site_Site` не будет работать. 
  
В этом примере пользователю разрешается выполнять все действия поиска содержимого только с сообщениями, отправленными в 2015 году.

```
New-ComplianceSecurityFilter -FilterName EmailDateRestrictionFilter -Users donh@contoso.com -Filters "MailboxContent_Received -ge '01-01-2015' -and MailboxContent_Received -le '12-31-2015'" -Action All
```
   
Как и в предыдущем примере, в этом примере пользователю разрешается выполнять все действия поиска содержимого только с документами, измененными в последний раз в 2015 году.

```
New-ComplianceSecurityFilter -FilterName DocumentDateRestrictionFilter -Users donh@contoso.com -Filters "SiteContent_LastModifiedTime -ge '01-01-2015' -and SiteContent_LastModifiedTime -le '12-31-2015'" -Action All
```
   
В этом примере показано, как запретить членам группы ролей "диспетчеры обнаружения OneDrive" выполнять действия по поиску контента для любого почтового ящика в Организации. 

```
New-ComplianceSecurityFilter -FilterName NoEXO -Users "OneDrive Discovery Managers" -Filters "Mailbox_Alias -notlike '*'"  -Action All
```

В этом примере все пользователи в Организации не смогут выполнять поиск сообщений электронной почты, отправленных или полученных пользователями жанетс или сарад.

```
New-ComplianceSecurityFilter -FilterName NoSaraJanet -Users All -Filters "MailboxContent_Participants -notlike 'janets@contoso.onmicrosoft.com' -and MailboxContent_Participants -notlike 'sarad@contoso.onmicrosoft.com'" -Action Search
```
  
## <a name="get-compliancesecurityfilter"></a>Get — ComplianceSecurityFilter

**Get-ComplianceSecurityFilter** используется для возврата списка фильтров разрешений поиска. Используйте параметр _filtername_ , чтобы получить сведения об определенном фильтре поиска. 
  
## <a name="set-compliancesecurityfilter"></a>Set — ComplianceSecurityFilter

**Set-ComplianceSecurityFilter** используется для изменения существующего фильтра разрешений поиска. Единственный обязательный параметр — _filtername_. 
  
|**Parameter**|**Описание**|
|:-----|:-----|
| _Действие_| Параметр _Action_ указывает тип действия поиска, к которому применяется фильтр. Возможные действия для поиска содержимого: <br/><br/> **Export** — фильтр применяется при экспорте результатов поиска.  <br/> **Предварительный просмотр** — фильтр применяется при просмотре результатов поиска.  <br/> **Очистить** — фильтр применяется при очистке результатов поиска.  <br/> **Поиск** — фильтр применяется при выполнении поиска.  <br/> **ALL** — фильтр применяется ко всем действиям поиска.  <br/> |
| _FilterName_|Параметр _filtername_ указывает имя фильтра разрешений. |
| _Filters_| Параметр _Filters_ указывает критерии поиска для фильтра безопасности соответствия. Можно создать два различных типа фильтров: <br/><br/>**Фильтрация** почтовых ящиков — этот тип фильтра указывает почтовые ящики, __ в которых назначенные пользователи (указанные с помощью параметра Users) могут выполнять поиск. Синтаксис этого типа фильтра — **маилбокс_** _Маилбокспропертинаме_, где _маилбокспропертинаме_ указывает свойство почтового ящика, используемое для определения области почтовых ящиков, в которых можно выполнять поиск. Например, фильтр `"Mailbox_CustomAttribute10 -eq 'OttawaUsers'"` почтовых ящиков позволит пользователю назначить этому фильтру только те почтовые ящики поиска со значением "оттаваусерс" в свойстве CustomAttribute10.  Для свойства _маилбокспропертинаме_ можно использовать любые поддерживаемые фильтруемые свойства получателей. Список поддерживаемых свойств представлен в разделе Фильтруемые [свойства для параметра – RecipientFilter](https://go.microsoft.com/fwlink/p/?LinkId=784903). <br/><br/>**Фильтрация содержимого почтового ящика** — этот тип фильтра применяется к контенту, в котором можно выполнять поиск. В нем указывается содержимое почтового ящика, для которого назначенные пользователи могут выполнять поиск. Синтаксис для этого типа фильтра — **маилбоксконтент_** _сеарчаблепропертинаме: значение_, где _сеарчаблепропертинаме_ указывает свойство языка запросов по ключевым словам (KQL), которое может быть указано при поиске контента. Например, фильтр `MailboxContent_recipients:contoso.com` содержимого почтовых ящиков позволяет пользователю, назначенному этому фильтру, искать сообщения, отправленные получателям в домене contoso.com.  Список свойств сообщений, включаемых в поиск, приведен в разделе [запросы ключевых слов для поиска контента](keyword-queries-and-search-conditions.md). <br/><br/>**Фильтрация содержимого сайта и сайта** — существуют два фильтра SharePoint и OneDrive для бизнеса, связанные с сайтами, которые можно использовать для указания контента сайта или сайта, который могут выполнять пользователи. <br/><br/>- **Сите_** *Сеарчаблеситепроперти* <br/>- **Ситеконтент**_*сеарчаблеситепроперти*<br/><br/>Эти два фильтра являются взаимозаменяемыми. Например, `"Site_Path -like 'https://contoso.spoppe.com/sites/doctors*'"` и `"SiteContent_Path -like 'https://contoso.spoppe.com/sites/doctors*'"` возвращает те же результаты. Но чтобы помочь определить, что делает фильтр, можно `Site_` указать свойства, связанные с сайтом (например, URL-адрес сайта), и указать `SiteContent_` свойства, связанные с контентом (например, типы документов). Например, фильтр `"Site_Path -like 'https://contoso.spoppe.com/sites/doctors*'"` позволит пользователю назначить этот фильтр только для поиска контента в семействе https://contoso.spoppe.com/sites/doctors веб-сайтов. Фильтр `"SiteContent_FileExtension -eq 'docx'"` позволит пользователю назначить этот фильтр только поиску документов Word (Word 2007 и более поздних версий).  <br/><br/>Список свойств сайта, поддерживающих поиск, представлен [в статье Обзор свойств для обхода и управляемых свойств в SharePoint](https://go.microsoft.com/fwlink/p/?LinkId=331599). Свойства, помеченные с помощью параметра **Да** в столбце **Queryable** , можно использовать для создания фильтра содержимого сайта или сайта. <br/><br/> **Важно!** Один фильтр поиска может иметь только один тип фильтра; Он не может содержать фильтр почтовых ящиков и фильтр сайта; Аналогично, он не может содержать фильтр почтовых ящиков и фильтр содержимого почтового ящика. Однако фильтр может содержать более сложный запрос того же типа. Например,  `"Mailbox_CustomAttribute10 -eq 'FTE' -and Mailbox_MemberOfGroup -eq '$($DG.DistinguishedName)'"`.          |
| _пользователи_;|Параметр _Users_ указывает пользователей, которые применяют этот фильтр к поиску контента. Так как это свойство с несколькими значениями, при указании пользователя или группы пользователей с этим параметром заменяется существующий список пользователей. В следующих примерах представлен синтаксис для добавления и удаления выбранных пользователей. <br/><br/>Вы также можете использовать параметр _Users_ , чтобы указать группу ролей центра безопасности & соответствия требованиям. С его помощью можно создать настраиваемую группу ролей, а затем назначить ей фильтр разрешений поиска. Предположим, у вас есть настраиваемая группа ролей для диспетчеров eDiscovery в дочернем подразделении международной корпорации, находящемся в США. Вы можете использовать параметр _Users_ , чтобы указать эту группу ролей (с помощью свойства Name группы ролей), а затем с помощью параметра _Filter_ разрешить поиск только почтовых ящиков в США. <br/><br/>Этот параметр не позволяет указать группы рассылки. |

## <a name="examples-of-changing-search-permissions-filters"></a>Примеры изменения фильтров разрешений поиска

В этих примерах показано, как использовать командлеты **Get-ComplianceSecurityFilter** и **Set-ComplianceSecurityFilter** , чтобы добавить или удалить пользователя в существующем списке пользователей, которому назначен фильтр. При добавлении или удалении пользователей из фильтра укажите их SMTP-адрес. 
  
В этом примере пользователь добавляется к фильтру.

```
$filterusers = Get-ComplianceSecurityFilter -FilterName OttawaUsersFilter
```
```
$filterusers.users.add("pilarp@contoso.com")
```

```
Set-ComplianceSecurityFilter -FilterName OttawaUsersFilter -Users $filterusers.users
```
   
В этом примере пользователь удаляется из фильтра.

```
$filterusers = Get-ComplianceSecurityFilter -FilterName OttawaUsersFilter
```

```
$filterusers.users.remove("annb@contoso.com")
```

```
Set-ComplianceSecurityFilter -FilterName OttawaUsersFilter -Users $filterusers.users
```
  
## <a name="remove-compliancesecurityfilter"></a>Remove — ComplianceSecurityFilter

Для удаления фильтра поиска используется **Remove-ComplianceSecurityFilter** . Используйте параметр _filtername_ , чтобы указать фильтр, который требуется удалить. 
  
## <a name="more-information"></a>Дополнительные сведения

- **Как работает фильтрация разрешений поиска?** При выполнении поиска содержимого фильтр разрешений добавляется в поисковый запрос. Фильтр разрешений присоединяется к запросу поиска оператором **and** Boolean. Например, у вас есть фильтр разрешений, который позволяет Бобу выполнять все действия поиска в почтовых ящиках участников группы рассылки "работники". Затем Боб выполняет поиск контента во всех почтовых ящиках в Организации с поисковым запросом `sender:jerry@adatum.com`. Так как фильтр разрешений и запрос поиска логически объединены оператором **and** , поиск возвращает любое сообщение, отправленное Jerry@adatum.com, любому участнику группы рассылки "работники". 
    
- **Что происходит, если у вас несколько фильтров разрешений поиска?** В запросе поиска содержимого несколько фильтров разрешений объединяются при помощи логических операторов **OR**. Поэтому результаты возвращаются, если применяется любой из фильтров. В поиске содержимого все фильтры (объединенные оператором **OR**) объединяются с поисковым запросом с помощью оператора **AND**. Возьмем предыдущий пример, где фильтр поиска позволяет Ивану выполнять поиск только в почтовых ящиках членов группы рассылки "Сотрудники". Затем создадим другой фильтр, который запрещает Ивану выполнять поиск в почтовом ящике Глеба (Mailbox_Alias -ne 'Gleb'). Допустим, что Глеб входит в группу "Сотрудники". Когда Боб выполняет поиск содержимого (из предыдущего примера) для всех почтовых ящиков в Организации, возвращаются результаты поиска для почтового ящика Фил, несмотря на то, что вы применил фильтр, чтобы запретить Бобу искать почтовый ящик Фил. Дело в том, что применяется первый фильтр (который разрешает Ивану выполнять поиск в группе "Сотрудники"). А так как Глеб входит в группу "Сотрудники", Иван может выполнять поиск в почтовом ящике Глеба. 
    
- **Работает ли фильтрация разрешений поиска для неактивных почтовых ящиков?** Да, вы можете использовать фильтры почтового ящика и содержимого почтового ящика, чтобы ограничить круг пользователей, которые могут искать Неактивные почтовые ящики Как и обычный почтовый ящик, для неактивного почтового ящика необходимо настроить свойство Recipient, которое используется для создания фильтра разрешений. При необходимости можно использовать команду **Get/Mailbox – инактивемаилбоксонли** для отображения свойств неактивных почтовых ящиков. Дополнительные сведения см в статье [Создание неактивных почтовых ящиков и управление ими в Office 365](create-and-manage-inactive-mailboxes.md).
    
- **Работает ли фильтрация разрешений поиска для общедоступных папок?** Нет. Как было сказано выше, фильтрация разрешений поиска не позволяет ограничить круг пользователей, которые могут выполнять поиск в общедоступных папках в Exchange. Например, нельзя исключить элементы из папок общедоступных папок из результатов поиска с помощью фильтра разрешений. 
    
- **Позволяет ли пользователь выполнять поиск по всем расположениям в определенной службе, а также запрещать им выполнять поиск в расположении контента в другой службе?** Нет. Как описывалось ранее, необходимо создать фильтр разрешений поиска, чтобы явно запретить пользователям выполнять поиск в расположении содержимого в определенной службе Office 365 (например, предотвратить Поиск пользователя в любом почтовом ящике Exchange или на любом сайте SharePoint). Другими словами, создание фильтра "разрешения поиска", позволяющего пользователю выполнять поиск по всем сайтам SharePoint в Организации, не запрещает этому пользователю выполнять поиск в почтовых ящиках. Например, чтобы разрешить администраторам SharePoint выполнять поиск только на сайтах SharePoint, необходимо создать фильтр, который запрещает им выполнять поиск в почтовых ящиках. Аналогичным образом, чтобы разрешить администраторам Exchange выполнять поиск только в почтовых ящиках, необходимо создать фильтр, который не позволит им выполнять поиск на сайтах.
