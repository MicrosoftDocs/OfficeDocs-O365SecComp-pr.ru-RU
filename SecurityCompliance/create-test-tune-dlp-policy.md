---
title: Создание, тестирование и настройка политики защиты от потери данных
ms.author: deniseb
author: denisebmsft
manager: laurawi
ms.audience: Admin
ms.topic: article
f1_keywords:
- ms.o365.cc.NewPolicyFromTemplate
ms.service: O365-seccomp
localization_priority: Normal
ms.collection:
- M365-security-compliance
search.appverid:
- MET150
ms.assetid: 59414438-99f5-488b-975c-5023f2254369
description: 'Самый простой и распространенный способ приступить к работе с политиками защиты от потери данных — использовать один из шаблонов, включенных в Office 365. '
ms.openlocfilehash: 0c6b3bce7b336b08595a432c29601ecb63155589
ms.sourcegitcommit: e7a776a04ef6ed5e287a33cfdc36aa2d72862b55
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/29/2019
ms.locfileid: "31000862"
---
# <a name="create-test-and-tune-a-dlp-policy"></a>Создание, тестирование и настройка политики защиты от потери данных

**Автор участника** <br/>
Пол Куннингхам, Microsoft MVP <br/>
[Практическая 365](https://practical365.com/) <br/>
[@Practical365](https://twitter.com/practical365)<br/>
__________________________________________________

Защита от потери данных — это функция соответствия требованиям Office 365, которая помогает организации предотвратить преднамеренное или случайное воздействие конфиденциальной информации нежелательным сторонам. У защиты от потери данных есть корни в Exchange Server и Exchange Online, и он также применяется в SharePoint Online и OneDrive для бизнеса.

DLP использует модуль анализа контента для просмотра содержимого сообщений и файлов электронной почты, а также для поиска конфиденциальных данных, таких как номера кредитных карт и персональные данные (PII). Конфиденциальные сведения обычно не следует отправлять в сообщениях электронной почты или включать в документы, не требуя дополнительных действий, таких как шифрование сообщения электронной почты или файлов. С помощью DLP можно определять конфиденциальные данные и выполнять следующие действия:

- Запись события в журнал для целей аудита
- Отображение предупреждения конечному пользователю, который отправляет сообщение электронной почты или предоставление общего доступа к файлу
- Активная блокировка электронной почты или общего доступа к файлам

Иногда клиенты могут прекратить защиту от потери данных, так как они не расказываются о типе данных, требующих защиты. Предполагается, что конфиденциальные данные, такие как медицинские записи или финансовая информация, существуют только для таких отраслей, как здравоохранение или организациям, которые работают с Интернет-магазинами. Но любой бизнес может обрабатывать конфиденциальные данные на регулярной основе, даже если они не реализуют их. Электронная таблица имен сотрудников и дат рождения аналогична электронной таблице имен клиентов и сведений о кредитных картах. Кроме того, этот тип данных, как можно ожидать, может привести к тому, что сотрудники не заходят о своих повседневных задачах, но не смогут экспортировать CSV-файл из системы и отправить его по электронной почте. Вы также можете быть удивлены тем, как часто сотрудники отправляют электронные сообщения, содержащие сведения о кредитных картах или банковские сведения, без учета последствий.

## <a name="how-sensitive-information-is-detected-by-dlp"></a>Обнаружение конфиденциальной информации с помощью DLP

Конфиденциальные сведения определяются в соответствии с шаблоном регулярных выражений (RegEx) в сочетании с другими показателями, такими как расстояние между определенными ключевыми словами и соответствующими шаблонами. Например, это номера кредитных карт. Номер кредитной карты VISA состоит из 16 цифр. Тем не менее, эти цифры могут быть записаны различными способами, например 1111-1111-1111-1111, 1111 1111 1111 1111 или 1111111111111111.

Любая строка из 16 цифр не обязательно является номером кредитной карты, она может представлять собой регистрационный номер из системы службы поддержки или серийный номер устройства. Чтобы узнать разницу между номером кредитной карты и строкой из 16 цифр, выполняется вычисление (контрольная сумма), чтобы убедиться, что номера совпадают с известным шаблоном из различных торговых марок кредитных карт.

Кроме того, можно принять решение о том, является ли данные номером кредитной карты, а также ключевыми словами, например "VISA" или "АМЕКС", а также значениями, которые могут быть сроками действия кредитной карты.

Другими словами, защита от потери данных обычно достаточно интеллектуальна для того, чтобы распознавать различия между этими двумя текстами в электронной почте:

- "Можно заказать новый портативный компьютер. Используйте мое приложение VISA Number 1111-1111-1111-1111, истечение срока действия 11/22 и отправьте мне оценочную дату доставки, когда она есть. "
- "Мой номер моего ноутбука — 2222-2222-2222-2222, и он был приобретен на 11/2010. Кстати, это еще все одобрение Visa? "

В этом разделе приведены полезные [сведения о типах конфиденциальной информации](what-the-sensitive-information-types-look-for.md) , объясняющих, как определяется каждый тип данных.

## <a name="where-to-start-with-data-loss-prevention"></a>Где начать с защиты от потери данных

Если риски, связанные с утечкой данных, не полностью очевидны, трудно решить, что именно следует начать с реализации защиты от потери данных. К счастью, политики защиты от потери данных можно запускать в режиме тестирования, что позволяет оценивать эффективность и точность перед включением.

Политики DLP для Exchange Online можно управлять с помощью центра администрирования Exchange. Однако политики защиты от потери данных можно настроить для всех рабочих нагрузок в центре безопасности _Амп_ соответствия требованиям, поэтому для демонстраций, описанных в этой статье, мы будем использовать эту политику. В центре безопасности _амп_ соответствие политике защиты от потери данных вы найдете в разделе > **Политика** **защиты от потери данных**. Щелкните **создать политику** для запуска.

Office 365 предоставляет ряд [шаблонов политики защиты от потери](what-the-dlp-policy-templates-include.md) данных, которые можно использовать для создания политик защиты от потери данных. Предположим, что вы используете Австралийский бизнес. Вы можете отфильтровать шаблоны политик, чтобы отображались только те, которые относятся к Австралии, которые относятся к общим категориям финансовых, медицинских и исПравных и конфиденциальности.

![Возможность выбора страны или региона](media/DLP-create-test-tune-choose-country.png)

В этой демонстрации я буду выбирать персональные данные персональных данных (PII), которые включают типы сведений о номере файла (ТФН) и номер водительского удостоверения (Австралия).

![Возможность выбора шаблона политики](media/DLP-create-test-tune-choose-policy-template.png)

ПриСвойте новой политике DLP имя. Имя по умолчанию будет соответствовать шаблону политики защиты от потери данных, но вам следует выбрать более понятное имя, так как в одном шаблоне можно создать несколько политик.

![Возможность присвоить политике имя](media/DLP-create-test-tune-name-policy.png)

Выберите расположения, к которым будет применяться политика. Политики защиты от потери данных могут применяться к Exchange Online, SharePoint Online и OneDrive для бизнеса. Я собираюсь оставить эту политику настроенной для всех расположений.

![Возможность выбора всех расположений](media/DLP-create-test-tune-choose-locations.png)

На первом шаге **Параметры политики** просто примите значения по умолчанию. Существует множество настроек, которые можно выполнять в политиках защиты от потери данных, но по умолчанию лучше начать.

![Параметры для настройки типа содержимого для защиты](media/DLP-create-test-tune-default-customization-settings.png)

После нажатия кнопки **Далее** откроется страница дополнительных **параметров политики** с дополнительными параметрами настройки. Для политики, которую вы только тестируете, здесь можно приступить к внесению некоторых корректировок.

- Я отключил подсказку политики, что является разумным действием, если вы только что тестируете и не хотите, чтобы все пользователи ни выходили на себя. Подсказка политики отображает предупреждения для пользователей о том, что они нарушают политику защиты от потери данных. Например, пользователь Outlook видит предупреждение о том, что вложенный файл содержит номера кредитных карт, и из-за чего их электронная почта будет отклонена. Цель советов политики — остановить поведение, не соответствующее требованиям, прежде чем это произойдет.
- Я также сократил количество экземпляров с 10 до 1, чтобы эта политика определяла любой общий доступ к данным в Австралии, а не только массовый общий доступ к данным.
- Я также добавил еще одного получателя в электронное сообщение с отчетом об инциденте.

![Дополнительные параметры политики](media/DLP-create-test-tune-more-policy-settings.png)

Наконец, я настроил эту политику для первоначального запуска в тестовом режиме. Обратите внимание, что также есть возможность отключить подсказки политики в тестовом режиме. Это позволяет обеспечить возможность включения подсказок политики в политику, а затем решить, следует ли отображать их в ходе тестирования.

![Возможность сначала проверить политику](media/DLP-create-test-tune-test-mode.png)

На экране "завершение проверки" нажмите кнопку **создать** , чтобы завершить создание политики.

## <a name="test-a-dlp-policy"></a>Проверка политики DLP

Новая политика защиты от потери данных начнет действовать в течение примерно 1 часа. Вы можете подождать и подождать, пока она не будет активирована обычными действиями пользователей, или вы можете попробовать запустить ее самостоятельно. Ранее я подключился к этой [теме в разделе Типы конфиденциальной информации](what-the-sensitive-information-types-look-for.md), в которой представлены сведения о том, как активировать соответствия DLP.

Например, политика защиты от потери данных, созданная для этой статьи, будет определять австралийские номера файлов (ТФН). В соответствии с документацией соответствие основано на указанных ниже условиях.

![Документация по номеру файла налога для Австралии](media/DLP-create-test-tune-Australia-Tax-File-Number-doc.png)
 
Чтобы продемонстрировать обнаружение ТФН в блунт способом, адрес электронной почты со словами "номер налогового файла" и строка из 9 цифр в близких пределах будут Саил без каких бы то ни было проблем. Причина, по которой он не запускает политику DLP, заключается в том, что строка из 9 цифр должна передавать контрольную сумму, указывающую на то, что это действительный ТФН, а не только небезопасная строка чисел.

![Номер файла налога для Австралии, который не проходит контрольную сумму](media/DLP-create-test-tune-email-test1.png)

При сравнении сообщения электронной почты со словами "номер налогового файла" и допустимым ТФН, которые продают контрольную сумму, будут активировать политику. Для этой записи ТФН я использовался на веб-сайте, который создает действительные, но не подлинность, Тфнс. Существуют похожие сайты, которые создают [действительные, но фиктивные номера кредитных карт](http://www.fakecreditcardgenerator.net/). Такие сайты очень полезны, так как одна из самых распространенных ошибок при тестировании политики DLP — использование поддельного номера, который не является допустимым и не передает контрольную сумму (и поэтому не запускает политику).

![Номер файла налога для Австралии, который передает контрольную сумму](media/DLP-create-test-tune-email-test2.png)

Электронное сообщение с отчетом об инциденте включает тип обнаруженных конфиденциальных сведений, количество обнаруженных экземпляров и степень вероятности обнаружения.

![Отчет об инциденте с обнаруженным номером налогового файла](media/DLP-create-test-tune-email-incident-report.png)

Если вы оставляете политику защиты от потери данных в тестовом режиме и анализируете электронную почту отчета об инциденте, вы можете приступить к работе с политикой защиты от потери данных и насколько эффективнее ее применять. Кроме отчетов об инцидентах, вы можете [использовать отчеты DLP](view-the-dlp-reports.md) , чтобы увидеть сводное представление соответствия политик в клиенте.

## <a name="tune-a-dlp-policy"></a>Настройка политики защиты от потери данных

При анализе обращений к политикам может потребоваться внести некоторые изменения в поведение этих политик. В качестве простого примера вы можете определить, что один ТФН в сообщении электронной почты не является проблемой (я думаю, что он по-прежнему есть), но еще один экземпляр является проблемой. Несколько экземпляров могут быть рискованными сценариями, такими как служащие для отправки электронной почты по экспорту в формате CSV из базы данных HR во внешнюю сторону (например, внешняя служба учета). Безусловно, вы предпочитаете обнаруживать и блокировать.

В центре безопасности _Амп_ соответствие требованиям можно изменить существующую политику, чтобы настроить поведение.

![Возможность изменения политики](media/DLP-create-test-tune-edit-policy.png)
 
Вы можете настроить параметры расположения так, чтобы политика применялась только к определенным рабочим нагрузкам, а также к определенным сайтам и учетным записям.

![Параметры для выбора определенных расположений](media/DLP-create-test-tune-edit-locations.png)

Кроме того, можно настроить параметры политики и изменить правила, чтобы они соответствовали вашим потребностям.

![Возможность изменить правило](media/DLP-create-test-tune-edit-rule.png)

При редактировании правила в политике защиты от потери данных можно изменить:

- Условия, в том числе тип и количество экземпляров конфиденциальных данных, которые будут вызывать правило.
- Выполняемые действия, например ограничение доступа к содержимому.
- Уведомления пользователей, которые являются подсказками политики, которые отображаются для пользователя в почтовом клиенте или в веб-браузере.
- Переопределение пользователей, которое определяет, могут ли пользователи продолжить работу с электронной почтой или предоставлением общего доступа к файлам.
- Отчеты об инцидентах для уведомления администраторов.

![Параметры редактирования частей правила](media/DLP-create-test-tune-editing-options.png)

В этом примере я добавил в политику уведомления пользователя (Будьте внимательны, не выполняя это без адекватного обучения пользователей), а также разрешить пользователям переопределять политику с помощью делового обоснования или помечая его как ложное срабатывание. Обратите внимание, что вы также можете настроить текст подсказок политики, чтобы включить дополнительные сведения о политиках Организации, или предложить пользователям обратиться в службу поддержки, если у них возникнут вопросы.

![Параметры уведомлений и переопределений пользователей](media/DLP-create-test-tune-user-notifications.png)

Политика содержит два правила для обработки большого объема и минимального объема, поэтому не забудьте изменить их, указав нужные действия. Эта возможность может различаться в зависимости от их характеристик. Например, вы можете разрешить переопределение для нарушений громкости, но не разрешать переопределения для обеспечения высокой степени нарушения громкости.

![Одно правило для высокого уровня громкости и одно правило для недостаточно громкости](media/DLP-create-test-tune-two-rules.png)

Кроме того, если вы хотите заблокировать или ограничить доступ к контенту, который находится в нарушениех политики, необходимо настроить действие для этого правила.

![Возможность ограничения доступа к содержимому](media/DLP-create-test-tune-restrict-access-action.png)

После сохранения этих изменений в параметрах политики также необходимо вернуться на основную страницу параметров политики и включить возможность отображения подсказок политики для пользователей, когда политика находится в тестовом режиме. Это эффективный способ внедрения политик защиты от потери данных для конечных пользователей и проведения обучения пользователей, но при этом не рискуя слишком много ложных срабатываний, влияющих на производительность.

![Параметр для отображения подсказок политики в тестовом режиме](media/DLP-create-test-tune-show-policy-tips.png)

На стороне сервера (или на стороне облака) изменения могут не вступить в силу немедленно из-за различных интервалов обработки. Если вы вносите изменения политики защиты от потери данных, которые будут отображать новые подсказки политики для пользователя, пользователь может не увидеть, что изменения вступают в силу немедленно в своем клиенте Outlook, который проверяет изменения политики каждые 24 часа. Чтобы ускорить тестирование, можно [удалить штамп времени последней загрузки из раздела полицинуджес с](https://support.microsoft.com/en-au/help/2823261/changes-to-a-data-loss-prevention-policy-don-t-take-effect-in-outlook?__hstc=18650278.46377037dc0a82baa8a30f0ef07a7b2f.1538687978676.1538693509953.1540315763430.3&__hssc=18650278.1.1540315763430&__hsfp=3446956451)помощью этого исправления в реестре. Outlook загрузит последние сведения о политике при следующем запуске и создании сообщения электронной почты.

Если включены подсказки политики, пользователь начнет просматривать подсказки в Outlook и может сообщать о ложных срабатываниях при их возникновении.

![Подсказка политики с параметром для отчета о ложном срабатывании](media/DLP-create-test-tune-policy-tip-in-outlook.png)

## <a name="investigate-false-positives"></a>Анализ ложных срабатываний

Шаблоны политик защиты от потери данных не идеально подходят. Скорее всего, вы обнаружите некоторые ложные срабатывания в вашей среде, поэтому важно упростить процесс развертывания защиты от потери данных, учитывая время, необходимое для тестирования и настройки политик.

Ниже приведен пример ложного срабатывания. Это сообщение является довольно безвредным. Пользователь предоставляет свой номер мобильного телефона для кого-либо, включая свою электронную подпись.

![Электронная почта, в которой показаны ложные положительные сведения](media/DLP-create-test-tune-false-positive-email.png)
 
Но пользователь видит подсказку политики, предупреждающее о том, что сообщение содержит конфиденциальные сведения, а именно номер водительского удостоверения для австралийского драйвера.

![Параметр для создания отчета о ложном срабатывании в подсказке политики](media/DLP-create-test-tune-policy-tip-closeup.png)

Пользователь может сообщить о ложном срабатывании, и администратор может узнать, почему она возникла. В электронном письме с отчетом об инциденте сообщение помечается как ложное срабатывание.

![Отчет об инциденте, в котором отображается ложное срабатывание](media/DLP-create-test-tune-false-positive-incident-report.png)

Это хороший пример с лицензией на этот драйвер. Причина, по которой это ложный положительный результат, заключается в том, что тип лицензии "Австралийский драйвер" будет срабатывать любой строкой из 9 цифр (даже из 10-значных строк), в пределах 300 символов от точки зрения "Сидней NSW" (без учета регистра). Поэтому она инициируется номером телефона и подписью электронной почты, только потому что пользователь находится в Сидней.

Интересно, что если для "Сидней, NSW" задана запятая, политика защиты от потери данных не активируется. Я не знаю, почему запятая делает какие – либо различия, или почему другие города и Штаты в Австралии не включены в ключевые слова для типа сведений о лицензии для австралийского драйвера. Итак, что можно сделать? Существует несколько вариантов.

Один из вариантов — удалить тип сведений о лицензии австралийского драйвера для Австралии из политики. Она есть в наличии, так как она является частью шаблона политики защиты от потери данных, но мы не вынуждены его использовать. Если вас интересуют только номера налоговых файлов и не являются лицензиями драйвера, можно просто удалить его. Например, вы можете удалить его из правила "недостаточно громкости" в политике, но оставить его в правиле "высокая громкость", чтобы списки с лицензиями на несколько драйверов по-прежнему были обнаружены.

![Параметр для удаления типа конфиденциальной информации из правила](media/DLP-create-test-tune-delete-low-volume-rule.png)
 
Кроме того, можно просто увеличить количество экземпляров, чтобы при наличии нескольких экземпляров было обнаружено только небольшое количество лицензий на драйвер.

![Параметр для изменения числа экземпляров](media/DLP-create-test-tune-edit-instance-count.png)

В дополнение к изменению числа экземпляров можно также настроить точность соответствия (или уровень вероятности). Если тип конфиденциальной информации имеет несколько шаблонов, можно настроить точность соответствия в правиле, чтобы правило соответствовало только определенным шаблонам. Например, чтобы уменьшить количество ложных срабатываний, можно установить точность соответствия для правила, чтобы она соответствовала только шаблону с наивысшим уровнем достоверности. Понимание того, как рассчитывается уровень вероятности, немного сложнее (и выходит за рамки этой записи), но здесь подробно [описывается, как использовать уровень вероятности для настройки правил](https://docs.microsoft.com/en-us/office365/securitycompliance/data-loss-prevention-policies#match-accuracy).

Наконец, если вы хотите сделать еще более сложным, вы можете настроить любой тип конфиденциальной информации — например, вы можете удалить "Сидней NSW" из списка ключевых слов для [лицензии на австралийский драйвер](https://docs.microsoft.com/en-us/office365/securitycompliance/what-the-sensitive-information-types-look-for#australia-drivers-license-number), чтобы исключить ложное срабатывание выше. Чтобы узнать, как это сделать, используя XML и PowerShell, ознакомьтесь с разделом, посвященным [настройке встроенного типа конфиденциальной информации](customize-a-built-in-sensitive-information-type.md).

## <a name="turn-off-a-dlp-policy"></a>Отключение политики защиты от потери данных

Когда вы уверены, что политика защиты от потери данных правильно и эффективно определяет типы конфиденциальной информации и что ваши конечные пользователи готовы к работе с политиками, вы можете включить эту политику.

![Параметр, чтобы включить политику](media/DLP-create-test-tune-turn-on-policy.png)
 
Если вы ждете, когда политика вступит в силу, подключитесь [к PowerShell центра безопасности _амп_](https://docs.microsoft.com/en-us/powershell/exchange/office-365-scc/connect-to-scc-powershell/connect-to-scc-powershell?view=exchange-ps) и запустите [командлет Get – dlpcompliancepolicy позволяет](https://docs.microsoft.com/en-us/powershell/module/exchange/policy-and-compliance-dlp/get-dlpcompliancepolicy?view=exchange-ps) , чтобы просмотреть дистрибутионстатус.

![Выполнение командлета в PowerShell](media/DLP-create-test-tune-PowerShell.png)

После включения политики защиты от потери данных необходимо выполнить некоторые завершающие тесты, чтобы убедиться, что выполняются ожидаемые действия политики. Если вы тестируете данные, например данные кредитных карт, веб-сайты в Интернете, содержащие сведения о том, как создать пример кредитной карты или другие персональные данные, которые будут передавать контрольные суммы и активировать политики.

Политики, позволяющие переопределять пользователей, будут представлять собой параметр для пользователя в рамках подсказки политики.

![Подсказка политики, позволяющая переопределять пользователя](media/DLP-create-test-tune-override-option.png)

Политики, которые ограничивают контент, будут представлять предупреждение пользователю в рамках подсказки политики и предотвращают отправку электронной почты.

![Подсказка политики, содержимое которой ограничено](media/DLP-create-test-tune-restrict-warning.png)

## <a name="summary"></a>Сводка

Политики защиты от потери данных используются в организациях всех типов. Тестирование некоторых политик защиты от потери данных — это небольшое снижение риска из-за таких элементов управления, как подсказки политики, переопределение конечных пользователей и отчеты об инцидентах. Вы можете протестировать политики защиты от потери данных, чтобы узнать, какие типы нарушений уже существуют в вашей организации, а затем с помощью политик с низкие ложными срабатываний, попросите пользователей определить, что разрешено и не разрешено, а затем выполнить развертывание политик защиты от потери данных в предприятии.
