---
title: Используйте сетевой загрузки для импорта файлов организации PST-файлов в Office 365
ms.author: markjjo
author: markjjo
manager: laurawi
ms.date: ''
ms.audience: Admin
ms.topic: article
ms.service: o365-administration
localization_priority: Normal
ms.collection: Strat_O365_IP
search.appverid:
- MOE150
- MED150
- MET150
ms.assetid: 103f940c-0468-4e1a-b527-cc8ad13a5ea6
description: 'Для администраторов: сведения об использовании сетевой загрузки нескольких файлов PST-файлов для почтовых ящиков пользователей в Office 365 массового импорта.'
ms.openlocfilehash: 81c799a8c820e9d9287f4792fe463d6a99b90e36
ms.sourcegitcommit: 25f1028643d8a20d17306e8b09cafea46eaf7a58
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/31/2019
ms.locfileid: "29666159"
---
# <a name="use-network-upload-to-import-your-organization-pst-files-to-office-365"></a>Используйте сетевой загрузки для импорта файлов организации PST-файлов в Office 365

> [!NOTE]
> Эта статья предназначена для администраторов. Вы пытаетесь Импорт PST-файлов для почтового ящика? Просмотреть [импорта электронной почты, контактов и календаря из Outlook PST-файл](https://go.microsoft.com/fwlink/p/?LinkID=785075)
  
Ниже приведены пошаговые инструкции, необходимые для использования сетевой загрузки нескольких файлов PST-файлов в Office 365 почтовые ящики массового импорта. Часто задаваемые вопросы об использовании сетевой загрузки для массового импорта PST-файлов в Office 365 почтовые ящики, просмотрите [часто задаваемые вопросы по использованию отправляемых сети для импорта PST-файлов](faqimporting-pst-files-to-office-365.md#using-network-upload-to-import-pst-files).
  
[Шаг 1: Скопируйте URL-адрес SAS и установить Azure AzCopy](#step-1-copy-the-sas-url-and-install-azure-azcopy)

[Шаг 2: Отправка PST-файлов в Office 365](#step-2-upload-your-pst-files-to-office-365)

[(Необязательно) Шаг 3: Представление списка файлов PST-файлов было выгрузить в Office 365](#optional-step-3-view-a-list-of-the-pst-files-uploaded-to-office-365)

[Этап 4: Создание файла сопоставления Импорт PST-файлов](#step-4-create-the-pst-import-mapping-file)

[Действие 5. В Office 365 создайте задание на импорт PST-файлов.](#step-5-create-a-pst-import-job-in-office-365)

[Шаг 6: Фильтровать данные и запустите задание импорта PST-файлов](#step-6-filter-data-and-start-the-pst-import-job)

Обратите внимание, что вам необходимо выполнить только один раз шаг 1 для импорта PST-файлов в Office 365 почтовые ящики. После выполнения этих действий, выполните шаг 2 — шаг 6 каждый раз, когда требуется отправить и Импорт пакета PST-файлов.

## <a name="before-you-begin"></a>Перед началом работы
  
- Необходимо назначить роль Импорт экспорт почтового ящика в Exchange Online Импорт PST-файлов в Office 365 почтовые ящики. По умолчанию эта роль не будет назначен группе ролей в Exchange Online. Роль Импорт и экспорт почтового ящика можно добавить в группу ролей управления организацией. Или можно создать новую группу ролей, назначение роли почтового ящика Импорт и экспорт и добавьте себя в качестве члена. Для получения дополнительных сведений см. «Добавить роли, группы ролей» или «Создать группу ролей» разделов в [Управление группами ролей](https://go.microsoft.com/fwlink/p/?LinkId=730688).
    
    Кроме того, чтобы создать импорта заданий в безопасности Office 365 &amp; должны иметь положительный ответ центре соответствия требованиям, одно из следующих действий:
    
  - Необходимо назначить роль получателей почты в Exchange Online. По умолчанию эта роль назначается группы ролей управления организацией и управления получателя.
    
    или
    
  - Необходимо быть глобальным администратором в организации Office 365.
    
  > [!TIP]
    > Рассмотрите возможность создания новой группы ролей в Exchange Online, специально предназначенный для импорта PST-файлов в Office 365. Для минимальный уровень привилегий, необходимым для импорта PST-файлов, назначение ролей получателей почты и импорт экспорт почтового ящика в новую группу ролей, а затем добавьте членов. 
  
- Единственным поддерживаемым способом Импорт PST-файлов в Office 365 — это использовать средство Azure AzCopy, как описано в этом разделе. Для загрузки файлов PST-файлов непосредственно в область Azure хранения нельзя использовать Explorer хранилища Azure.
    
- Необходимо хранить PST-файлов, которые необходимо импортировать в Office 365 на файловом сервере или в общей папке в вашей организации. В шаге 2 будет запустить средство Azure AzCopy, которая будет загрузить PST-файлов, которые хранятся на файловом сервере или в общей папке в Office 365.
    
- Эта процедура состоит из копирования и сохранения копии URL-адрес, содержащий ключ доступа. Эта информация будет использоваться в шаге 2, чтобы отправить файлы PST-файлов и в шаге 3 Если вы хотите просмотреть список PST-файлы, загруженные в Office 365. Убедитесь, что предпринять меры предосторожности, чтобы защитить этот URL-адрес, как бы защиты паролей и другие сведения, связанные с безопасностью. Для примера вы может сохранить документ Microsoft Word, защищенных паролем или зашифрованные USB-диска. Увидите, что в разделе [Дополнительные сведения](#more-information) в качестве примера в сочетании URL-адрес и ключа. 
    
- Можно импортировать PST-файлов для неактивного почтового ящика в Office 365. Это делается путем указания идентификатора GUID неактивного почтового ящика в `Mailbox` параметр в файле сопоставления Импорт PST-файлов. На вкладке **инструкциям** в данном разделе приведены сведения см. 
    
- В гибридном развертывании Exchange можно импортировать PST-файлов в почтовый ящик архива облачной для пользователя основной почтовый ящик которого находится в локальной. Это можно сделать, выполнив следующие действия в файле сопоставления Импорт PST-файлов:
    
  - Укажите адрес электронной почты для пользователя локального почтового ящика в `Mailbox` параметр. 
    
  - Укажите значение **TRUE** в `IsArchive` параметр. 
    
    [Для получения дополнительных сведений см.](#step-4-create-the-pst-import-mapping-file) 
    
- После импорта PST-файлов в почтовый ящик Office 365 удержания хранения, задание для почтового ящика включена неограниченное время. Это означает, что политики хранения, назначенные для не будут обрабатываться до выключения удержание хранения или задайте дату, чтобы отключить удержания. Зачем мы это сделать? Если старые сообщения, импортированные в почтовый ящик, они могут удалены (очищены) истек срок их хранения на основании параметров хранения, настроенных для почтового ящика. Помещение почтового ящика на удержание хранения позволит получить времени владелец почтового ящика для управления эти сообщения только что импортированный или присвойте времени для изменения параметров хранения для почтового ящика. Просмотрите **Дополнительные** сведения в данном разделе приведены рекомендации по управлению удержания хранения. 
    
- По умолчанию максимальный размер сообщения, могут быть получены по почтовый ящик Office 365 — 35 МБ. Это связано с того, что значение по умолчанию для свойства *MaxReceiveSize* для почтового ящика 35 МБ. Тем не менее ограничение для приема сообщений максимальный размер в Office 365 — 150 МБ. Таким образом, если импорт PST-файл, содержащий элемент, размер которых превышает 35 МБ, службы Office 365 импортировать, мы автоматически изменится значение свойства *MaxReceiveSize* на целевой почтовый ящик на 150 МБ. Это позволяет сообщения до 150 МБ для импорта для почтовых ящиков пользователей. 
    
    > [!TIP]
    > Определить размер сообщения для почтового ящика, эту команду можно выполнить в Exchange Online PowerShell: `Get-Mailbox <user mailbox> | FL MaxReceiveSize`. 

## <a name="step-1-copy-the-sas-url-and-install-azure-azcopy"></a>Шаг 1: Скопируйте URL-адрес SAS и установить Azure AzCopy

Сначала необходимо загрузить и установить средство Azure AzCopy, которое — средство, которое будет выполняться в шаге 2, чтобы отправить файлы PST-файлов в Office 365. Также будет скопируйте URL-адрес SAS для вашей организации. Этот URL-адрес состоит из URL-адрес сетевого расположения хранилища Azure в облаке Майкрософт для вашей организации и общего доступа к подписи (SAS) ключ. Этот раздел содержит необходимые разрешения для загрузки файлов PST места хранения Azure. Убедитесь, что предпринять меры предосторожности, чтобы защитить URL-адрес SAS. Он является уникальным для вашей организации и будет использоваться в шаге 2.

> [!IMPORTANT]
> Импорт PST-файлов способ загрузки файлов с помощью сети, мы рекомендуем использовать версии AzCopy Azure, который можно загрузить на шаге 6b в следующей процедуре.
  
1. Последовательно выберите пункты [https://protection.office.com](https://protection.office.com) и выполнить вход с использованием учетных данных для учетной записи администратора в организации Office 365. 
    
2. В левой области безопасности &amp; центре соответствия требованиям, нажмите кнопку **управления данными** \> **импорта**.
    
    > [!NOTE]
    > Необходимо назначить соответствующие разрешения на доступ к странице **импорта** в системы &amp; центре соответствия требованиям. Для получения дополнительных сведений в разделе **перед началом работы** . 
    
3. На странице " **Импорт** " нажмите кнопку ![добавить значок](media/ITPro-EAC-AddIcon.gif) **Создать задание импорта**.
    
    Появится мастер задание импорта.
    
4. Введите имя задания импорта PST-файлов и нажмите кнопку **Далее**. Используйте строчные буквы, числа, дефисы и символы подчеркивания. Нельзя использовать буквы в верхнем регистре или содержать пробелы в имени.
    
5. На **вы хотите отправить или имеющимся данных?** страницы, нажмите кнопку **Отправить данные** и нажмите кнопку **Далее**.
    
    ![Щелкните отправить задание импорта данных для создания сети передачи](media/e59f9dc3-ccde-44ff-ac38-c4e39d76ae85.png)
  
6. На странице **Импорт данных** выполните следующие две вещи: 
    
    ![Скопируйте URL-адрес SAS и загрузите средство Azure AzCopy на странице "Импорт данных"](media/74411014-ec4b-4e25-9065-404c934cce17.png)
  
    а. на шаге 2 нажмите кнопку **Показать сети передачи URL-адрес SAS**. После отображения URL-адрес SAS нажмите кнопку **Копировать в буфер обмена** и вставьте его и сохраните его в файл, чтобы работать более поздней версии.
    
    б. на шаге 3 нажмите кнопку **Загрузить AzCopy Azure** , чтобы загрузить и установить средство Azure AzCopy. Во всплывающем окне нажмите кнопку **запустить** для установки AzCopy. 
    
> [!NOTE]
> Вы может не закрывайте странице **Импорт данных** (в случае необходимо снова скопировать URL-адрес SAS) или нажмите кнопку **Отмена** , чтобы закрыть его. 
 
## <a name="step-2-upload-your-pst-files-to-office-365"></a>Шаг 2: Отправка PST-файлов в Office 365

Теперь можно использовать средство AzCopy.exe Отправка PST-файлов в Office 365. Это средство загружает и сохраняет их в Azure хранилище в облаке Майкрософт. Как объяснялось ранее расположение хранилища Azure, отправляемый PST-файлов для находится в же региональных datacenter Microsoft, где расположена организации Office 365. Чтобы выполнить это действие, PST-файлов обязательно должна находиться в общей папке или на файловом сервере в вашей организации. Это называется исходного каталога в следующей процедуре. Каждый раз при запуске средства AzCopy можно указать разные исходного каталога. 
  
1. Откройте окно командной строки на локальном компьютере.
    
2. Перейдите в каталог, где установлено средство AzCopy.exe на шаге 1. Если средство установлено в расположение по умолчанию, перейдите к разделу `%ProgramFiles(x86)%\Microsoft SDKs\Azure\AzCopy`.
    
3. Выполните следующую команду, чтобы загрузить PST-файлов в Office 365.

    ```
    AzCopy.exe /Source:<Location of PST files> /Dest:<SAS URL> /V:<Log file location> /Y
  
    ```
 
    В следующей таблице описываются параметры и их требуемые значения. Обратите внимание на то, что сведения, которые вы получили на предыдущем шаге используется в значения для этих параметров.
    
    |**Параметр**|**Описание**|**Пример**|
    |:-----|:-----|:-----|
    | `/Source:` <br/> |Задает исходного каталога в вашей организации, содержащий PST-файлов, которые будут отправлены в Office 365.  <br/> Обязательно заключите значение этого параметра в кавычки (" ").  <br/> | `/Source:"\\FILESERVER01\PSTs"` <br/> |
    | `/Dest:` <br/> |URL-адрес SAS, полученное на шаге 1.  <br/> Обязательно заключите значение этого параметра в кавычки (" ").  <br/> **Совет:** (Необязательно) Можно указать вложенную папку в расположение хранилища Azure для PST-файлов для загрузки. Это делается путем добавления расположение вложенную папку (после «ingestiondata») в URL-адрес SAS. В первом примере не указывается вложенной папке; Это означает, что PST-файлов будет отправлен в корневой каталог (с именем *ingestiondata* ) расположения хранилища Azure. Во втором примере загружает PST-файлов в папке (с именем *PSTFiles* ) в корне расположение хранилища Azure.<br/> | `/Dest:"https://3c3e5952a2764023ad14984.blob.core.windows.net/ingestiondata?sv=2012-02-12&amp;se=9999-12-31T23%3A59%3A59Z&amp;sr=c&amp;si=IngestionSasForAzCopy201601121920498117&amp;sig=Vt5S4hVzlzMcBkuH8bH711atBffdrOS72TlV1mNdORg%3D"` <br/> или  <br/>  `/Dest:"https://3c3e5952a2764023ad14984.blob.core.windows.net/ingestiondata/PSTFiles?sv=2012-02-12&amp;se=9999-12-31T23%3A59%3A59Z&amp;sr=c&amp;si=IngestionSasForAzCopy201601121920498117&amp;sig=Vt5S4hVzlzMcBkuH8bH711atBffdrOS72TlV1mNdORg%3D"` <br/> |
    | `/V:` <br/> |Отправляет подробные сообщения о состоянии в файл журнала. По умолчанию подробный файл журнала имеет имя AzCopyVerbose.log и размещается в папке %LocalAppData%\Microsoft\Azure\AzCopy. Если для этого параметра указать существующее расположение файла, подробный журнал будет добавлен в этот файл.  <br/> Обязательно заключите значение этого параметра в кавычки (" ").  <br/> | `/V:"c:\Users\Admin\Desktop\Uploadlog.log"` <br/> |
    | `/S` <br/> |Этот дополнительный параметр указывает режим рекурсивный, чтобы средство AzCopy копирует файлы PST-файлы, расположенные в подпапках в исходный каталог, который указан с `/Source:` параметр.  <br/> **Примечание:** Если включить этот параметр, PST-файлов в подпапках будут иметь pathname другой файл в расположение хранилища Azure после их передачи. Необходимо указать путь к файлу точное в CSV-файл, созданный на шаге 4.<br/> | `/S` <br/> |
    | `/Y` <br/> |Это обязательный параметр позволяет использовать только для записи маркеров SAS при отправке PST-файлов в расположение хранилища Azure. URL-адрес SAS, полученный на шаге 1 (и указано в `/Dest:` параметра) — только для записи SAS URL-адрес, поэтому необходимо включить этот параметр. Обратите внимание, что только для записи SAS URL-адрес не будет препятствовать можно с помощью проводника хранилища Azure для просмотра списка PST-файлов, выгрузить в папку хранилища Azure.<br/> | `/Y` <br/> |
   
Вот пример синтаксиса для средства AzCopy.exe, в котором использованы действительные значения для каждого параметра:
    
```
  AzCopy.exe /Source:"\\FILESERVER1\PSTs" /Dest:"https://3c3e5952a2764023ad14984.blob.core.windows.net/ingestiondata?sv=2012-02-12&amp;se=9999-12-31T23%3A59%3A59Z&amp;sr=c&amp;si=IngestionSasForAzCopy201601121920498117&amp;sig=Vt5S4hVzlzMcBkuH8bH711atBffdrOS72TlV1mNdORg%3D" /V:"c:\Users\Admin\Desktop\AzCopy1.log" /Y
  
```

После того как вы запустите команду, будут отображаться сообщения о состоянии, показывающие ход отправки PST-файлов. В окончательном сообщении о состоянии будет отображено общее количество успешно отправленных файлов. 

> [!TIP]
> После успешного выполнения команды AzCopy.exe и проверьте правильность всех параметров, сохранить копию синтаксис командной строки в файл (с защитой), где были скопированы сведения вы получили на шаге 1. Затем можно скопируйте и вставьте следующую команду в командной строке каждый раз, чтобы запустить средство AzCopy.exe Отправка PST-файлов в Office 365. Может потребоваться изменить только одно значение являются те, для `/Source:` параметр. Это зависит от исходного каталога, где расположены файлы PST-файлов.

## <a name="optional-step-3-view-a-list-of-the-pst-files-uploaded-to-office-365"></a>(Необязательно) Шаг 3: Представление списка файлов PST-файлов было выгрузить в Office 365

При желании могут устанавливать и использовать Microsoft Azure хранилища Explorer (который — это средство бесплатно, открытый код) для просмотра списка PST-файлов, загруженный в Azure больших двоичных объектов. Существует два веских причин, чтобы это сделать.
  
- Убедитесь в том, что PST-файлы из общей папки или файлового сервера в организации были успешно загружен на Azure больших двоичных объектов.
    
- Проверьте имя файла (и путь к вложенной папке, если вы включили один) для каждого PST-файл выгрузить в Azure больших двоичных объектов. Это очень полезно при создании файла на следующем этапе сопоставления, так как требуется указать путь к папке и имя файла для каждого PST-файл PST-файлов. Проверка эти имена позволит уменьшить потенциальных ошибок в PST-файл сопоставления.
    
Проводник хранилищ Microsoft Azure — в режиме предварительного просмотра.
  
> [!IMPORTANT]
> Проводник хранилищ Azure нельзя использовать для передача или изменение PST-файлов. Для использования AzCopy является единственным поддерживаемым способом Импорт PST-файлов в Office 365. Кроме того нельзя удалять PST-файлов, загруженный в Azure больших двоичных объектов. При попытке удалить в PST-файл, вы получите ошибка, не создавая соответствующие разрешения. Обратите внимание, что все файлы PST-файлов, автоматически удаляются из области вашей Azure хранилища. При наличии не задания импорта в процессе выполнения, выберите все PST-файлов в контейнере **ingestiondata** удаляются 30 дней после создания последней задание импорта.
  
Установка Explorer хранилища Azure и подключиться к вашей области Azure хранения:
  
1. Загрузите и установите [средство Microsoft Azure хранилища Explorer](https://go.microsoft.com/fwlink/p/?LinkId=544842).
    
2. Запустите обозреватель Microsoft Azure хранилища, в левой области щелкните правой кнопкой мыши **Хранилище учетных записей** и выберите команду **подключиться к хранилища Azure**.
    
    ![Щелкните правой кнопкой мыши хранилище учетных записей и нажмите кнопку Подключить для хранилища Azure](media/75b80cc3-c336-4f96-ad32-54ac9b96a7af.png)
  
3. Нажмите кнопку **используется строка подключения или URI подписи (SAS) совместный доступ** и нажмите кнопку **Далее**.
    
4. Щелкните **использовать SAS URI**, вставьте URL-адрес SAS, полученный на шаге 1 в поле в разделе **URI**и нажмите кнопку **Далее**.
    
5. На странице **сводки подключения** можно просмотреть сведения о подключении и нажмите кнопку **Подключить**.
    
    Контейнер **ingestiondata** открывается; он содержит PST-файлы, загруженные в шаге 2. Контейнер **ingestiondata** расположен в области **Хранилища учетных записей** \> **(SAS-Attached Services)** \> **Контейнеров больших двоичных объектов**. 
    
    ![Список отправленных файлов PST в окне обозревателя хранилищ Azure](media/12376fed-13a5-4a09-8fe6-e819e011b334.png)
  
6. После завершения работы с помощью проводника хранилищ Microsoft Azure, щелкните правой кнопкой мыши **ingestiondata**и нажмите кнопку **Отсоединить** для отключения от вашей области хранилища Azure. В противном случае вы получите ошибку в следующий раз при попытке присоединить. 
    
    ![Щелкните правой кнопкой мыши элемент "ingestion" и нажмите кнопку "Отсоединить", чтобы отключиться от области хранения данных Azure](media/1e8e5e95-4215-4ce4-a13d-ab5f826a0510.png)
  
## <a name="step-4-create-the-pst-import-mapping-file"></a>Этап 4: Создание файла сопоставления Импорт PST-файлов

После передачи расположение хранилища Azure для своей организации Office 365 PST-файлов следующим шагом является создание запятыми, разделенных виде CSV-файла, который указывает, какие PST-файлы будут импортированы в почтовые ящики пользователей. В этом CSV-файл на следующем этапе будет отправить при создании задания импорта PST-файлов.
  
1. [Загрузить копию файла сопоставления Импорт PST -файлов](https://go.microsoft.com/fwlink/p/?LinkId=544717).
    
2. Откройте или сохраните этот CSV-файл на локальный компьютер. В примере ниже показан готовый файл сопоставления для импорта PST-файлов (открытый в Блокноте). Для редактирования CSV-файла намного удобнее использовать Microsoft Excel.


    ```
    Workload,FilePath,Name,Mailbox,IsArchive,TargetRootFolder,ContentCodePage,SPFileContainer,SPManifestContainer,SPSiteUrl
    Exchange,,annb.pst,annb@contoso.onmicrosoft.com,FALSE,/,,,,
    Exchange,,annb_archive.pst,annb@contoso.onmicrosoft.com,TRUE,,,,,
    Exchange,,donh.pst,donh@contoso.onmicrosoft.com,FALSE,/,,,,
    Exchange,,donh_archive.pst,donh@contoso.onmicrosoft.com,TRUE,,,,,
    Exchange,PSTFiles,pilarp.pst,pilarp@contoso.onmicrosoft.com,FALSE,/,,,,
    Exchange,PSTFiles,pilarp_archive.pst,pilarp@contoso.onmicrosoft.com,TRUE,/ImportedPst,,,,
    Exchange,PSTFiles,tonyk.pst,tonyk@contoso.onmicrosoft.com,FALSE,,,,,
    Exchange,PSTFiles,tonyk_archive.pst,tonyk@contoso.onmicrosoft.com,TRUE,/ImportedPst,,,,
    Exchange,PSTFiles,zrinkam.pst,zrinkam@contoso.onmicrosoft.com,FALSE,,,,,
    Exchange,PSTFiles,zrinkam_archive.pst,zrinkam@contoso.onmicrosoft.com,TRUE,/ImportedPst,,,,
    ```
    Первую строку или строки заголовка, в CSV-файле перечислены параметры, которые будут использоваться службой Импорт PST-файлов для импорта PST-файлов для почтовых ящиков пользователей. Имя каждого параметра разделенных запятыми. Каждая строка в строке заголовков представляет значения параметров для импорта в PST-файл для определенного почтового ящика. Необходимо строку для каждого PST-файл, который требуется импортировать в почтовый ящик пользователя. Обязательно замените местозаполнители в файле сопоставления фактические данные.

   **Примечание:** Не изменяйте другие данные в строке заголовков, включая параметры SharePoint; они будут игнорироваться во время импорта PST-файлов. 

 3. Для заполнения CSV-файла необходимой информацией воспользуйтесь сведениями из таблицы ниже.


    |**Параметр**|**Описание**|**Пример**|
    |:-----|:-----|:-----|
    | `Workload` <br/> |Служба Office 365, которая будет импортирована данных. Чтобы импортировать PST-файлов для почтовых ящиков пользователей, используйте `Exchange`.<br/> | `Exchange` <br/> |
    | `FilePath` <br/> |Указывает местоположение папки в месте хранения Azure, отправленный PST-файлов для на шаге 2.  <br/> Если не включать имя необязательно вложенную папку в URL-адрес SAS в `/Dest:` параметр в шаге 2, это значение параметра не указано в CSV-файл. Если вы включили имя папки, укажите его в этом параметре (см). Значение этого параметра с учетом регистра.<br/> В любом случае *не* добавляйте в значение «ingestiondata» `FilePath` параметр.  <br/><br/> **Важные:** История в пользу путь к файлу должен быть таким же, как можно использовать, если вы включили имени необязательно вложенную папку в URL-адрес SAS в случае `/Dest:` параметр в шаге 2. Например, если вы использовали `PSTFiles` для вложенной папке имя на шаге 2, а затем использовать `pstfiles` в `FilePath` параметр в CSV-файла импорта для PST-файл завершится ошибкой. Убедитесь, что же варианта использования в обоих случаях.<br/> |(Оставьте пустым)  <br/> Или  <br/>  `PSTFiles` <br/> |
    | `Name` <br/> |Указывает имя PST-файл, который будет импортирован в почтовый ящик пользователя. Значение этого параметра с учетом регистра.<br/> <br/>**Важные:** История в пользу имени файла PST-файлов в CSV-файл должен совпадать с PST-файл, который был загружен на место хранения Azure в шаге 2. Например, если вы используете `annb.pst` в `Name` параметр в CSV-файл, однако имя фактического PST-файл является `AnnB.pst`, произойдет ошибка импорта для PST-файл. Убедитесь, что имя PST-файлов в CSV-файл использует строчные как фактический PST-файл.<br/> | `annb.pst` <br/> |
    | `Mailbox` <br/> |Указывает адрес электронной почты из почтового ящика, которая будет импортирована PST-файл. Обратите внимание, что нельзя указать общедоступных папок, так как служба Импорт PST-файлов не поддерживает импорт PST-файлы в общих папках.<br/> Чтобы импортировать в PST-файл в неактивного почтового ящика, необходимо указать идентификатор GUID почтового ящика для этого параметра. Чтобы получить идентификатор GUID, выполните следующую команду PowerShell в Exchange Online: "Get-Mailbox <identity of inactive mailbox> - InactiveMailboxOnly | Идентификатор Guid FL` <br/> <br/>**Note:** In some cases, you might have multiple mailboxes with the same email address, where one mailbox is an active mailbox and the other mailbox is in a soft-deleted (or inactive) state. In these situations, you have to specify the mailbox GUID to uniquely identify the mailbox to import the PST file to. To obtain this GUID for active mailboxes, run the following PowerShell command:  `Get-Mailbox<identity of active mailbox> | Идентификатор Guid FL`. To obtain the GUID for soft-deleted (or inactive) mailboxes, run this command  `Get-Mailbox <identity of soft-deleted or inactive mailbox> - SoftDeletedMailbox | Идентификатор Guid FL ".  <br/> | `annb@contoso.onmicrosoft.com` <br/> или  <br/>  `2d7a87fe-d6a2-40cc-8aff-1ebea80d4ae7` <br/> |
    | `IsArchive` <br/> | Указывает, следует ли импортировать PST-файл в архивный почтовый ящик пользователя. Возможны два указанных ниже значения параметра.<br/><br/>**FALSE** — импортирует PST-файл в основной почтовый ящик пользователя.  <br/> **Значение TRUE,** - импортирует PST-файл в архивный почтовый ящик пользователя. Предполагается, что [включен архивном почтовом ящике пользователя](enable-archive-mailboxes.md).<br/><br/>Если значение этого параметра `TRUE` и архивного почтового ящика пользователя не подключена, произойдет ошибка импорта для этого пользователя. Обратите внимание, что в случае сбоя импорта для одного пользователя (из-за их архив не включена, это свойство задано значение `TRUE`), не повлияет на других пользователей в задание импорта.<br/>  Если этот параметр оставить пустым, PST-файл импортируется в основной почтовый ящик пользователя.  <br/> <br/>**Примечание:** Чтобы импортировать в PST-файл в почтовый ящик архива облачной для пользователя основной почтовый ящик которого находится в локальной, просто укажите `TRUE` для этого параметра, укажите адрес электронной почты для пользователя локального почтового ящика для `Mailbox` параметр.  <br/> | `FALSE` <br/> или  <br/>  `TRUE` <br/> |
    | `TargetRootFolder` <br/> | Папка почтового ящика, импортируемый в PST-файл.  <br/>  Если этот параметр оставить пустым, PST будут импортированы в новую папку именованные **импортированные** находится на корневом уровне почтового ящика (уровень папки "Входящие" и другие папки почтового ящика по умолчанию).  <br/>  При указании `/`, элементов в PST-файл будет импортирован непосредственно в папку "Входящие.  <br/><br/>  При указании `/<foldername>`, будет импортирован элементов в PST-файл в папку с именем * \<foldername\> * . Например, если вы используете `/ImportedPst`, элементы будут импортированы в папку с именем **ImportedPst**. Эта папка будет находиться в почтовый ящик пользователя на том же уровне, в папке "Входящие".<br/><br/> **Совет:** Рассмотрите возможность выполнения несколько тестовых пакетов экспериментировать с помощью этого параметра, можно определить наиболее местоположение папки для файлов PST-файлов для импорта.  <br/> |(Оставьте пустым)  <br/> Или  <br/>  `/` <br/> или  <br/>  `/ImportedPst` <br/> |
    | `ContentCodePage` <br/> |Этот дополнительный параметр задает числовое значение кодовой страницы для импорта PST-файлов в формате ANSI. Этот параметр используется для импорта PST-файлов из китайский, японский и Корейского организаций, так как эти языки обычно используется набор двухбайтовых знаков (DBCS) для кодировки. Если этот параметр не используется для импорта PST-файлы для языков, использующих DBCS для имена папок почтового ящика, имена папок часто повреждены после их импорта.<br/><br/> Список поддерживаемых значений для этого параметра в разделе [Идентификаторы страницы кода](https://go.microsoft.com/fwlink/p/?LinkId=328514).  <br/> <br/>**Примечание:** Как уже указано, это необязательный параметр и не нужно включить его в CSV-файл. Или можно включить его и оставьте поле пустым для одного или нескольких строк.<br/> |(Оставьте пустым)  <br/> Или  <br/>  `932`(это идентификатор кодовой страницы для японского языка ANSI/ПВТ)  <br/> |
    | `SPFileContainer` <br/> |При импорте PST-файлов оставьте этот параметр пустым.   <br/> |Неприменимо  <br/> |
    | `SPManifestContainer` <br/> |При импорте PST-файлов оставьте этот параметр пустым.   <br/> |Неприменимо  <br/> |
    | `SPSiteUrl` <br/> |При импорте PST-файлов оставьте этот параметр пустым.   <br/> |Неприменимо  <br/> |

## <a name="step-5-create-a-pst-import-job-in-office-365"></a>Действие 5. В Office 365 создайте задание на импорт PST-файлов.

Следующим шагом является создание задание импорта PST-файлов в службе импорта в Office 365. Как объяснялось ранее будут отправлять файл сопоставления Импорт PST-файлов, созданной на шаге 4. После создания нового задания служит для анализа данных в PST-файлов и дает возможность фильтрации данных, который фактически возвращает импортированы почтовые ящики, указанные в файле сопоставления Импорт PST-файлов Office 365 (см. [Шаг 6](#step-6-filter-data-and-start-the-pst-import-job)).
  
1. Последовательно выберите пункты [https://protection.office.com](https://protection.office.com) и выполнить вход с использованием учетных данных для учетной записи администратора в организации Office 365. 
    
2. В левой области безопасности &amp; центре соответствия требованиям, нажмите кнопку **управления данными** и нажмите кнопку **Импорт**.
    
3. На странице " **Импорт** " нажмите кнопку ![добавить значок](media/ITPro-EAC-AddIcon.gif) **Создать задание импорта**.
    
    **Примечание:** Необходимо назначить соответствующие разрешения на доступ к странице **Импорт** в системы &amp; центре соответствия требованиям для создания нового задания импорта. Для получения дополнительных сведений в разделе **перед началом работы** . 
    
4. Введите имя задания импорта PST-файлов и нажмите кнопку **Далее**. Используйте строчные буквы, числа, дефисы и символы подчеркивания. Нельзя использовать буквы в верхнем регистре или содержать пробелы в имени.
    
5. На **вы хотите отправить или имеющимся данных?** страницы, нажмите кнопку **Отправить данные** и нажмите кнопку **Далее**.
    
    ![Щелкните отправить задание импорта данных для создания сети передачи](media/e59f9dc3-ccde-44ff-ac38-c4e39d76ae85.png)
  
6. На шаге 4 на странице " **Импорт данных** ", нажмите кнопку **я работаю выполняется отправка файлов** и **я имеют доступ к файлу сопоставления** , а затем нажмите кнопку **Далее**.
    
    ![Нажмите кнопку установите флажки в шаге 4](media/9f2427e8-3af2-4e27-95e6-a9f08430d3d8.png)
  
7. На странице " **выберите файл сопоставления** " нажмите кнопку **выбрать файл сопоставления** для отправки файла сопоставления Импорт PST-файлов, созданной на шаге 4. 
    
    ![Откройте меню Файл выберите сопоставления для отправки CSV-файл, созданный для задания импорта](media/d30b1d73-80bb-491e-a642-a21673d06889.png)
  
8. После имени CSV файл, который отображается в разделе **сопоставление имени файла**, нажмите кнопку **Проверить** , чтобы проверить наличие ошибок CSV-файл. 
    
    ![Нажмите кнопку проверить, чтобы убедиться в CSV-файле ошибки](media/4680999d-5538-4059-b878-2736a5445037.png)
  
    CSV-файл должен быть успешной проверки к созданию задания Импорт PST-файлов. Обратите внимание, что имя файла станет зеленым после успешной проверки. Если не удается выполнить проверку, щелкните ссылку **просмотреть журнал** . Отчет об ошибках проверки открыт с сообщением об ошибке для каждой строки в файл, который не удалось. 
    
9. После успешной проверки сопоставления PST-файл, чтения сроками и условиями, а затем установите флажок.
    
10. Нажмите кнопку **Сохранить** для подтверждения того задания и нажмите кнопку **Закрыть** , после успешного создания задания. 
    
    Отображается страница всплывающее окно состояния с состоянием **анализа в процессе выполнения** и создать задание импорта отображается в списке на странице " **Импорт** ". 
    
11. Нажмите кнопку **Обновить** ![значок обновления](media/O365-MDM-Policy-RefreshIcon.gif) требуется обновить сведения о состоянии, которая отображается в столбце **состояние** . После завершения анализа и данных готова к импортируемому состояние меняется на **завершения анализа**.
    
    Щелкните задание импорта для отображения всплывающих страницу "состояние", который содержит более подробные сведения о задание импорта, такие как состояние каждой PST-файл, перечисленные в файле сопоставления.
 
## <a name="step-6-filter-data-and-start-the-pst-import-job"></a>Шаг 6: Фильтровать данные и запустите задание импорта PST-файлов

После создания задания импорта на шаге 5, Office 365 служит для анализа данных в PST-файлов (в надежным и безопасным способом), определяя срок хранения типов другое сообщение, включенные в PST-файлов и элементов. После завершения анализа и можно импортировать данные, вы можете импортировать все данные, содержащиеся в PST-файлов или можно сократить данные, импортируемые, установив фильтры, которые управляют получает импортированных данных.
  
1. На странице " **Импорт** " в системы &amp; центре соответствия требованиям, нажмите кнопку **Готово к импорту в Office 365** для задания импорта, созданной на шаге 5. 
    
    ![Нажмите кнопку Готово для импорта в Office 365 рядом с пунктом задание импорта, которую вы создали](media/5760aac3-300b-4e31-b894-253c42a4b82b.png)
  
    Во время работы страницы отображается с сведения о файлах PST-файлов и другие сведения о задание импорта.
    
2. На странице "всплывающее окно" щелкните **Импорт в Office 365**.
    
    Откроется страница **фильтрации данных** . Он содержит полезные сведения о данных, связанные с анализа для PST-файлов в Office 365, включая сведения об срок хранения данных. На этом этапе вы можете для фильтрации данных, который будет импортирован или импорт данных как есть. 
    
    ![Вы можете сократить данных в PST-файлов или импортировать все его](media/287fc030-99e9-417b-ace7-f64617ea5d4e.png)
  
3. Выполните одно из следующих действий.
    
    a. для удаления данных, который импортируется, нажмите кнопку **Да, я хочу фильтр перед импортом**.
    
    Подробные пошаговые инструкции по фильтрации данных в PST-файлов и запустите задание импорта в разделе [Фильтрация данных при импорте PST-файлов в Office 365](filter-data-when-importing-pst-files.md).
    
    или
    
    б. Чтобы импортировать все данные в PST-файлов, нажмите кнопку **Нет, чтобы импортировать все данные** и нажмите кнопку **Далее**.
    
4. Если вы хотите импортировать все данные, нажмите кнопку **Импорт данных** для запуска задания импорта. 
    
    Состояние задания импорта отображается на странице " **Импорт** ". Нажмите кнопку ![значок обновления](media/O365-MDM-Policy-RefreshIcon.gif) **Обновить** , чтобы обновить сведения о состоянии, которая отображается в столбце **состояние** . Щелкните задание импорта для отображения страницы всплывающего состояние, которое отображает сведения о состоянии о каждом импортируемого файла PST-файлов. 

## <a name="how-the-import-process-works"></a>Как работает процесс импорта
  
Параметр Отправить сеть и службы Office 365 импортировать можно использовать для массового импорта PST-файлов для почтовых ящиков пользователей. Отправка сети означает, что отправка PST-файлов временная область в облаке Майкрософт. Затем службы Office 365 импорта копирует PST-файлов из области хранилища почтовых ящиков пользователей целевой.
  
Вот, иллюстрации и описание в процессе загрузки сети для импорта PST-файлов для почтовых ящиков в Office 365.
  
![Рабочий процесс сети отправка процесс Импорт PST-файлов в Office 365](media/9e05a19e-1e7a-4f1f-82df-9118f51588c4.png)
  
1. **Файл для загрузки файла PST Импорт средство и место хранения для закрытого ключа Azure** - первый шаг заключается в загрузить средство командной строки Azure AzCopy и ключ доступа, используемый для загрузки файлов PST-файлов в расположение хранилища Azure в облаке Майкрософт. Получить на странице **Импорт** безопасности Office 365 &amp; центре соответствия требованиям. Ключ (называется ключом безопасного доступа подписи (SAS), предоставляет необходимые разрешения для файлов PST-файлов, передача к частной и защите расположение хранилища Azure. Этот ключ доступа является уникальным для вашей организации и помогает предотвратить несанкционированного доступа к PST-файлов после их передачи в облако Майкрософт. Обратите внимание на то, что импорт PST-файлов в Office 365 не требует организации иметь отдельный подпиской Azure. 
    
2. **Отправка PST-файлов в расположение хранилища Azure** - следующим шагом является использование средства AzCopy.exe (загружен на шаге 1) для загрузки и сохранения PST-файлов в Azure хранилище, которое находится в одном региональных обработки данных Microsoft где Office 365 расположена организация. Чтобы отправить их обратно PST-файлов, которые необходимо импортировать в Office 365 обязательно должна находиться в общей папке или на файловом сервере в вашей организации.
    
    Обратите внимание, что необязательный этап, который может выполнять для просмотра списка PST-файлов после их передачи в расположение хранилища Azure.
    
3. **Создать файл сопоставления Импорт PST** - после PST-файлов были загружены в расположение хранилища Azure, следующим шагом является создание значений, разделенных запятыми (CSV) файл, который указывает, какие почтовые ящики пользователей PST-файлы будут импортированы, обратите внимание на то, что в PST-файл может быть  импортированные для почтового ящика пользователя или их архивного почтового ящика. Сведения о будет использоваться службой Office 365 импортировать в CSV-файла для импорта PST-файлов.
    
4. **Задание импорта создать PST** - следующим шагом является создание задание импорта PST-файлов на странице **Импорт** в системы &amp; центре соответствия требованиям и отправки файла сопоставления Импорт PST-файлов, созданных на предыдущем шаге. После создания задания импорта Office 365 служит для анализа данных в PST-файлов и дает возможность установить фильтры, которые управляют, какие данные действительно получает импортированных почтовые ящики, указанные в файле сопоставления Импорт PST-файлов. 
    
5. **Фильтр, который будет импортирован в почтовые ящики данные PST** - после создания и запуска задания импорта, Office 365 служит для анализа данных в PST-файлов (надежно и безопасно), определяя срок хранения элементы и типы другое сообщение, включенные в PST-файлов . После завершения анализа и можно импортировать данные, вы можете импортировать все данные, содержащиеся в PST-файлов или можно сократить данные, импортируемые, установив фильтры, которые управляют получает импортированных данных.
    
6. **Запустите задание импорта PST** - после запуска задания импорта, Office 365 использует сведения в PST-файл сопоставлений импорта для импорта файлов PST-файлов из хранилища Azure расположение почтовых ящиков пользователей. Сведения о состоянии о задание импорта (в том числе сведения о каждом импортируемого файла PST) отображается на странице **Импорт** в системы &amp; центре соответствия требованиям. По завершении задания импорта на **Полный**установлено состояние задания.
  
## <a name="more-information"></a>Дополнительные сведения

- Почему Импорт PST-файлов в Office 365?
    
  - Рекомендуется для импорта данных архивирования обмена сообщениями вашей организации в Office 365.
    
  - Данные доступны пользователю на любых устройствах, так как они хранятся в облаке.
    
  - Это помогает адрес соответствие требованиям вашей организации, предоставляя возможность применения функции контроля соответствия требованиям Office 365 к данным из PST-файлов, которые были импортированы. В том числе:
    
  - Включение [развертываемым архивации](enable-unlimited-archiving.md) для предоставления пользователям дополнительного почтового ящика дискового пространства для хранения данных, который был импортирован и [Архивные почтовые ящики](enable-archive-mailboxes.md) . 
    
  - Помещение почтовых ящиков на [Хранение для судебного разбирательства](https://go.microsoft.com/fwlink/?linkid=856286) хранения данных, который был импортирован. 
    
  - Поиск данных, который был импортирован с помощью Microsoft [средства обнаружения электронных данных](search-for-content.md) . 
    
  - Использование [политик хранения Office 365](retention-policies.md) для управления как долго будут храниться данные, который был импортирован и какое действие необходимо выполнить после срока их хранения. 
    
  - Поиск в [журнале аудита Office 365](search-the-audit-log-in-security-and-compliance.md) для событий, связанных с почтовыми ящиками, влияющие на данные, который был импортирован. 
    
  - Импорт данных [неактивные почтовые ящики](create-and-manage-inactive-mailboxes.md) в архив данных в целях соответствия требованиям. 
    
  - Использование [политик предотвращения потери данных](data-loss-prevention-policies.md) для предотвращения утечки за пределами вашей организации конфиденциальных данных. 
  
- Ниже приведен пример URL-адреса общего доступа к подписи (SAS), полученное на шаге 1. В этом примере также содержит синтаксис для команды, которую можно запускать в средстве AzCopy.exe отправить файлы PST-файлов в Office 365. Убедитесь, что предпринять меры предосторожности, чтобы защитить URL-адрес SAS так же, как бы защиты паролей и другие сведения, связанные с безопасностью.

    ```
    SAS URL: https://3c3e5952a2764023ad14984.blob.core.windows.net/ingestiondata?sv=2012-02-12&amp;se=9999-12-31T23%3A59%3A59Z&amp;sr=c&amp;si=IngestionSasForAzCopy201601121920498117&amp;sig=Vt5S4hVzlzMcBkuH8bH711atBffdrOS72TlV1mNdORg%3D

    AzCopy.exe /Source:<Location of PST files> /Dest:<SAS URL> /V:<Log file location> /Y

    EXAMPLES

    This example uploads PST files to the root of the Azure storage location:

    AzCopy.exe /Source:"\\FILESERVER1\PSTs" /Dest:"https://3c3e5952a2764023ad14984.blob.core.windows.net/ingestiondata?sv=2012-02-12&amp;se=9999-12-31T23%3A59%3A59Z&amp;sr=c&amp;si=IngestionSasForAzCopy201601121920498117&amp;sig=Vt5S4hVzlzMcBkuH8bH711atBffdrOS72TlV1mNdORg%3D" /V:"c:\Users\Admin\Desktop\AzCopy1.log" /Y
    
    This example uploads PST files to a subfolder named PSTFiles  in the Azure storage location:

    AzCopy.exe /Source:"\\FILESERVER1\PSTs" /Dest:"https://3c3e5952a2764023ad14984.blob.core.windows.net/ingestiondata/PSTFiles?sv=2012-02-12&amp;se=9999-12-31T23%3A59%3A59Z&amp;sr=c&amp;si=IngestionSasForAzCopy201601121920498117&amp;sig=Vt5S4hVzlzMcBkuH8bH711atBffdrOS72TlV1mNdORg%3D" /V:"c:\Users\Admin\Desktop\AzCopy1.log" /Y
``

- As previously explained, the Office 365 Import service turns on the retention hold setting (for an indefinite duration) after PST files are imported to a mailbox. This means the  *RetentionHoldEnabled*  property is set to  **True** so that the retention policy assigned to the mailbox won't be processed. This gives the mailbox owner time to manage the newly-imported messages by preventing a deletion or archive policy from deleting or archiving older messages. Here are some steps you can take to manage this retention hold: 
    
    - After a certain period of time, you can turn off the retention hold by running the **Set-Mailbox -RetentionHoldEnabled $false** command. For instructions, see [Place a mailbox on retention hold](https://go.microsoft.com/fwlink/p/?LinkId=544749).
    
   - You can configure the retention hold so that it's turned off on some date in the future. You do this by running the **Set-Mailbox -EndDateForRetentionHold *date*** command. For example, assuming that today's date is July 1, 2016 and you want the retention hold turned off in 30 days, you would run the following command:  **Set-Mailbox -EndDateForRetentionHold 8/1/2016**. In this scenario, you would leave the  **RetentionHoldEnabled**  property set to  *True*. For more information, see [Set-Mailbox](https://go.microsoft.com/fwlink/p/?LinkId=150317).
    
   - You can change the settings for the retention policy that's assigned to the mailbox so that older items that were imported won't be immediately deleted or moved to the user's archive mailbox. For example, you could lengthen the retention age for a deletion or archive policy that's assigned to the mailbox. In this scenario, you would turn off the retention hold on the mailbox after you changed the settings of the retention policy. For more information, see [Set up an archive and deletion policy for mailboxes in your Office 365 organization](set-up-an-archive-and-deletion-policy-for-mailboxes.md).
    
