---
title: Развертывание соединителя для архивации данных Facebook в Office 365
ms.author: markjjo
author: markjjo
manager: laurawi
ms.date: ''
audience: Admin
ms.topic: article
ms.service: O365-seccomp
localization_priority: Normal
ms.collection: M365-security-compliance
ROBOTS: NOINDEX, NOFOLLOW
description: Администраторы могут настроить собственный соединитель для импорта и архивации бизнес-страниц Facebook в Office 365. После импорта этих данных в Office 365 вы можете использовать такие функции обеспечения соответствия, как судебное удержание, поиск контента и политики хранения, для управления управлением данными Facebook Организации.
ms.openlocfilehash: b0ec46cea2dd5722633e7fc302cdd0d03cd5d56d
ms.sourcegitcommit: 9d67cb52544321a430343d39eb336112c1a11d35
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/17/2019
ms.locfileid: "34150561"
---
# <a name="deploy-a-connector-to-archive-facebook-data-in-office-365"></a>Развертывание соединителя для архивации данных Facebook в Office 365

В этой статье представлено пошаговое руководство по развертыванию соединителя, использующего службу импорта Office 365 для импорта данных из бизнес-страниц Facebook в Office 365. Общий обзор этого процесса и список необходимых компонентов, необходимых для развертывания соединителя Facebook, приведены в статье [Использование примера соединителя для архивации данных Facebook в Office 365 (Предварительная версия)](archive-facebook-data-with-sample-connector.md). 

## <a name="step-1-download-the-package"></a>Шаг 1: Загрузка пакета

Скачайте готовый пакет из раздела Release в репозитории GitHub по адресу <https://github.com/Microsoft/m365-sample-connector-csharp-aspnet/releases>. В последнем выпуске Скачайте ZIP-файл с именем **самплеконнектор. zip**. Вы будете отправлять этот ZIP-файл в Azure на шаге 4.

## <a name="step-2-create-an-app-in-azure-active-directory"></a>Шаг 2: создание приложения в Azure Active Directory

1. Перейдите на <https://portal.azure.com> страницу и войдите, используя учетные данные глобального администратора Office 365.

    ![Создание приложения в AAD](media/FBCimage1.png)

2. В области навигации слева выберите **Azure Active Directory**.

    ![](media/FBCimage2.png)

3. В левой области навигации щелкните **Регистрация приложений (Предварительная версия)** , а затем нажмите кнопку **создать регистрацию**.

    ![](media/FBCimage3.png)

4. Зарегистрируйте приложение. В разделе URI перенаправления выберите пункт веб-сайт в раскрывающемся списке Тип <https://portal.azure.com> приложения, а затем введите в поле для URI.

   ![](media/FBCimage4.png)

5. Скопируйте идентификатор **приложения (идентификатор клиента)** и **идентификатор каталога (клиента)** и сохраните их в текстовый файл или другое надежное расположение. Эти идентификаторы будут использоваться на последующих этапах.

   ![](media/FBCimage5.png)

6. Перейдите в раздел **Сертификаты _амп_ секреты для нового приложения.**

   ![](media/FBCimage6.png)

7. Щелкните **новый секрет клиента**

   ![](media/FBCimage7.png)

8. Создайте новый секрет. В поле Описание введите секрет, а затем выберите срок действия. 

    ![](media/FBCimage8.png)

9. Скопируйте значение секрета и сохраните его в текстовый файл или другое место хранения. Это секрет приложения AAD, который вы будете использовать на последующих этапах.

   ![](media/FBCimage9.png)

10. Перейдите к **манифесту** и скопируйте с identifieruris (который также называется URI приложения AAD), выделенный на следующем снимке экрана. Скопируйте универсальный код ресурса (URI) приложения AAD в текстовый файл или другое место хранения. Вы будете использовать его в действии 6.

   ![](media/FBCimage10.png)

## <a name="step-3-create-an-azure-storage-account"></a>Шаг 3: создание учетной записи хранения Azure

1. Перейдите на домашнюю страницу Azure для своей организации.

    ![](media/FBCimage11.png)

2. Выберите **создать ресурс** и введите учетную **запись хранения** в поле поиска.

    ![](media/FBCimage12.png)

3. Щелкните **хранилище**, а затем выберите **учетная запись хранилища**.

    ![](media/FBCimage13.png)

4. На странице " **Создание учетной записи хранения** " в поле подписка выберите вариант **Оплата от имени** или **бесплатной пробной версии** в зависимости от того, какой тип подписки Azure вы используете. Затем выберите или создайте группу ресурсов.

    ![](media/FBCimage14.png)

5. Введите имя учетной записи хранения.

    ![](media/FBCimage15.png)

6. Просмотрите, а затем нажмите кнопку **создать** , чтобы создать учетную запись хранения.

    ![](media/FBCimage16.png)

7. Через несколько секунд нажмите кнопку **Обновить** , а затем выберите **Перейти** к ресурсу, чтобы перейти к учетной записи хранения.

    ![](media/FBCimage17.png)

8. Нажмите **клавиши доступа** в левой области навигации.

    ![](media/FBCimage18.png)

9. Скопируйте **строку подключения** и сохраните ее в текстовый файл или другое место хранения. Этот параметр используется при создании ресурса веб-приложения.

    ![](media/FBCimage19.png)

## <a name="step-4-create-a-new-web-app-resource-in-azure"></a>Шаг 4: создание нового ресурса веб-приложения в Azure

1. На **домашней** странице на портале Azure выберите **создать веб-приложение " \> все \> ресурсы**". На странице **веб-приложение** нажмите кнопку **создать**. 

   ![](media/FBCimage20.png)

2. Заполните сведения (как показано ниже) и создайте веб-приложение. Обратите внимание, что имя, введенное в поле **имя приложения** , будет использоваться для создания URL-адреса службы приложений Azure; Например, fbconnector.azurewebsites.net.

   ![](media/FBCimage21.png)

3. Перейдите к только что созданному ресурсу веб-приложения, щелкните **Параметры приложения** в левой области навигации. В разделе Параметры приложения щелкните Добавить новый параметр и добавьте следующие три параметра. Используйте значения (скопированные в текстовый файл из предыдущих шагов): 

    - **Аписекреткэй** — в качестве секрета можно ввести любое значение. Он будет использоваться для доступа к веб-приложению Connector на шаге 7.

    - **Сторажеаккаунтконнектионстринг** — универсальный код ресурса (URI) строки подключения, скопированный после создания учетной записи хранилища Azure на шаге 3.

    - **tenantId** — идентификатор клиента организации Office 365, который вы скопировали после создания приложения соединителя Facebook в Azure Active Directory в действии 2.

    ![](media/FBCimage22.png)

4. В разделе **Общие параметры**нажмите **** кнопку рядом с параметром **Always On (включено**). В верхней части страницы нажмите кнопку **сохранить** , чтобы сохранить параметры приложения.

   ![](media/FBCimage23.png)

5. Последним шагом является отправка исходного кода приложения соединителя в Azure, который был загружен в действии 1. В веб-браузере перейдите по адресу<AzureAppResourceName>https://. SCM.azurewebsites.NET/ZipDeployUi. Например, если имя ресурса приложения Azure (с именем, указанным в шаге 2 в этом разделе) — **фбконнектор**, перейдите на https://fbconnector.scm.azurewebsites.net/ZipDeployUiстраницу. 

6. Перетащите Самплеконнектор. zip (, скачанный на шаге 1) на эту страницу. После отправки файлов и успешного развертывания страница будет выглядеть примерно так, как показано на следующем снимке экрана.

   ![](media/FBCimage24.png)

## <a name="step-5-register-the-facebook-app"></a>Шаг 5: регистрация приложения Facebook

1. Перейдите к <https://developers.facebook.com> , войдите в систему, используя учетные данные для учетной записи для бизнес-страниц Facebook вашей организации, а затем щелкните **Добавить новое приложение**.

   ![](media/FBCimage25.png)

2. Создайте идентификатор нового приложения.

   ![](media/FBCimage26.png)

3. В левой области навигации щелкните **Добавить продукты** , а затем — **Настройка** на плитке **входа Facebook** .

   ![](media/FBCimage27.png)

4. На странице Интеграция входа в Facebook нажмите кнопку **веб**.

   ![](media/FBCimage28.png)

5. Добавьте URL-адрес службы приложений Azure; например https://fbconnector.azurewebsites.net:.

   ![](media/FBCimage29.png)

6. Заполните раздел Краткое руководство по настройке входа в Facebook.

   ![](media/FBCimage30.png)

7. В левой области навигации в разделе **Login Facebook**щелкните **Параметры**, а затем добавьте URI перенаправления OAuth в поле **допустимые URI перенаправления OAuth** ; Используйте формат ** \<коннекторсервицеури_гт_/views/фацебукоаус**, где значением коннекторсервицеури является URL-адрес службы приложений Azure для вашей организации; например https://fbconnector.azurewebsites.net:.

   ![](media/FBCimage31.png)

8. В левой области навигации щелкните **Добавить продукты** и выберите **веб-перехватчики.** В раскрывающемся меню **Page (страница** ) выберите пункт **Page (страница**). 

   ![](media/FBCimage32.png)

9. Добавьте URL-адрес обратного вызова для веб-перехватчиков и добавьте маркер проверки. Формат URL-адреса обратного вызова, используйте формат ** <connectorserviceuri>/АПИ/фбпажевебхук**, где значение параметра коннекторсервицеури — это URL-адрес службы приложений Azure для вашей организации; например https://fbconnector.azurewebsites.net:. 

    Маркер проверки должен быть похож на надежный пароль. Скопируйте токен проверки в текстовый файл или другое место хранения.

     ![](media/FBCimage33.png)

10. Протестируйте и подпишитесь на конечную точку для веб-канала.

    ![](media/FBCimage34.png)

11. Добавьте URL-адрес конфиденциальности, значок приложения и использование для бизнеса. Кроме того, скопируйте идентификатор приложения и секрет приложения в текстовый файл или другое место хранения.

    ![](media/FBCimage35.png)

12. Сделайте приложение общедоступным.

    ![](media/FBCimage36.png)

13. Добавьте пользователя к роли администратора или тестера.

    ![](media/FBCimage37.png)

14. Добавьте разрешение на **доступ к общему содержимому страницы** .

    ![](media/FBCimage38.png)

15. Разрешение "добавить Управление страницами".

    ![](media/FBCimage39.png)

16. Получение приложения, проверенного Facebook.

    ![](media/FBCimage40.png)

## <a name="step-6-configure-the-connector-web-app"></a>Шаг 6: Настройка соединительного веб-приложения

1. Перейдите в раздел\<HTTPS://азуреаппресаурценаме_гт_. азуревебситес. NET (где азуреаппресаурценаме — это имя ресурса приложения Azure, которое вы назвали на шаге 4) например, если имя имеет значение **фбконнектор**, перейдите на https://fbconnector.azurewebsites.netстраницу. Домашняя страница приложения будет выглядеть так, как показано на следующем снимке экрана.


   ![](media/FBCimage41.png)

2. Нажмите кнопку **настроить** , чтобы отобразить страницу входа.
 
   ![](media/FBCimage42.png)

3. В поле Идентификатор клиента введите или вставьте идентификатор клиента (полученный на шаге 2). В поле Пароль введите или вставьте Аписекреткэй (полученное в действии 2), а затем нажмите кнопку **Настройка параметров конфигурации** , чтобы отобразить страницу **сведений о конфигурации** .

    ![](media/FBCimage43.png)


4. В разделе **сведения о конфигурации**введите следующие параметры конфигурации. 

   - **Application ID Application ID** — идентификатор приложения для приложения Facebook, полученного в шаге 5.
   - **Секрет приложения Facebook** — секрет приложения для приложения Facebook, полученного в действии 5.
   - **Веб-перехватчики Facebook проверьте токен** — маркер проверки, созданный на шаге 5.
   - **Идентификатор приложения AAD** — идентификатор приложения для приложения Azure Active Directory, созданного в шаге 2.
   - **Секрет приложения AAD** — значение для секрета аписекреткэй, созданного на шаге 4.
   - **URI приложения AAD** — URI приложения AAD, полученный в шаге 2. Пример: https://microsoft.onmicrosoft.com/2688yu6n-12q3-23we-e3ee-121111123213.
   - **Ключ инструментирования Application Insights** — оставьте это поле пустым.

5. Нажмите кнопку **сохранить** , чтобы сохранить параметры соединителя.

## <a name="step-7-set-up-a-custom-connector-in-the-security--compliance-center"></a>Шаг 7: Настройка настраиваемого соединителя в центре безопасности _Амп_ соответствия требованиям

1. Перейдите в <https://protection.office.com> раздел **Управление \> данными и выберите пункт \> архивы импорта данных сторонних поставщиков**.

   ![](media/FBCimage44.png)

2.  Нажмите кнопку **Добавить соединитель** , а затем выберите **страницы Facebook**.

    ![](media/FBCimage46.png)

3.  На странице **Добавление приложения соединителя** введите следующие сведения и нажмите кнопку **проверить соединитель**.

    - В первом поле введите имя соединителя, например **Facebook**.
    - Во втором поле введите или вставьте значение Аписекреткэй, добавленное на шаге 4.
    - В третьем поле введите или вставьте URL-адрес службы приложений Azure; например **https://fbconnector.azurewebsites.net**:.
 
    После успешной проверки соединителя нажмите кнопку **Далее**.
    
    ![](media/FBCimage47.png)

4.  Щелкните **имя входа с приложением Connector Connector**.

    ![](media/FBCimage45.png)

5. Введите или вставьте Аписекреткэй еще раз, а затем щелкните **Вход в службу соединителя**.

   ![](media/FBCimage48.png)


6. Выберите **Вход с помощью Facebook.**

   ![](media/FBCimage49.png)

7. На странице **Вход в Facebook** Войдите в систему, используя учетные данные для учетной записи для бизнес-страниц Facebook вашей организации. Убедитесь, что учетной записи Facebook, в которой вы вошли в систему, назначена роль администратора для бизнес-страниц Facebook Организации.

   ![](media/FBCimage50.png)

8. Нажмите кнопку **Выбор страниц** , чтобы выбрать деловые страницы Организации, которые нужно архивировать в Office 365.

   ![](media/FBCimage51.png)

9. Отображается список бизнес-страниц, управляемых учетной записью Facebook, в которой выполнен вход. Выберите страницу для архивации и нажмите кнопку **сохранить**.

    ![](media/FBCimage52.png)

10. Нажмите кнопку **Готово** , чтобы выйти из программы установки приложения службы соединителя.

    ![](media/FBCimage53.png)

11. На странице " **Настройка фильтров** " можно применить фильтр для импорта (и архивирования) элементов с определенным сроком хранения. Нажмите кнопку **Далее**.

    ![](media/FBCimage54.png)

12. На странице " **Настройка учетной записи хранения** " выберите почтовый ящик Office 365, в который будут импортированы элементы из ранее выбранных страниц Facebook бизнес-страниц.

    ![](media/FBCimage55.png)

13. Проверьте параметры и нажмите кнопку **Готово** , чтобы завершить настройку соединителя в центре безопасности _Амп_ соответствия требованиям.

    ![](media/FBCimage56.png)

14. Перейдите на страницу **архивации сторонних данных** , чтобы просмотреть ход процесса импорта.

    ![](media/FBCimage58.png)
