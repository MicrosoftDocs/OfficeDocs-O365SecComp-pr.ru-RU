---
title: Исследование частично индексированных элементов в функции обнаружения электронных данных в Office 365
ms.author: markjjo
author: markjjo
manager: laurawi
ms.date: 1/26/2018
ms.audience: Admin
ms.topic: article
ms.service: o365-administration
localization_priority: Normal
search.appverid: MOE150
ms.assetid: 4e8ff113-6361-41e2-915a-6338a7e2a1ed
description: Частично индексированных элементов (также вызов неиндексированные элементов) являются элементы почтовых ящиков Exchange и документами в SharePoint и OneDrive сайтов, для какой-либо причине не были полностью индексироваться для поиска контента. В этой статье можно Узнайте, почему элементы не могут быть индексированы для поиска и возвращаются в виде частично индексированных элементов, обнаружения ошибок поиска для частично индексированных элементов и использовать сценарий PowerShell для определения наличия вашей организации в частично индексированных электронной почты элементы.
ms.openlocfilehash: c1003f9907fffa37042ba62d01e4d938250cf570
ms.sourcegitcommit: 30faa3ba91cab4c36e3d8d8ed5858d5269ea8a56
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2019
ms.locfileid: "27749343"
---
# <a name="investigating-partially-indexed-items-in-office-365-ediscovery"></a>Исследование частично индексированных элементов в функции обнаружения электронных данных в Office 365

Поиск контента, которую можно запускать из безопасности Office 365 &amp; центре соответствия требованиям автоматически включает в себя частично индексированных элементов в оценке результатов поиска при выполнении поиска. Частично индексированных элементов, элементы почтовых ящиков Exchange и документов на сервере SharePoint и OneDrive для бизнеса сайтов, для какой-либо причине не были полностью индексироваться для поиска. Большинство сообщений электронной почты и документы сайта успешно индексируются, так как они попадают в [индексирования ограничения для сообщений электронной почты](limits-for-content-search.md#indexing-limits-for-email-messages). Тем не менее некоторые элементы может превысить эти ограничения для индексирования и частично индекс. Ниже перечислены другие и по следующим причинам элементов не могут быть индексированы для поиска возвращаются в виде частично индексированных элементов при выполнении поиска контента:
  
- Сообщения электронной почты у вложенного файла типа файлов, не могут быть индексированы; в большинстве случаев тип файла имеет значение [нераспознанный или не поддерживается для индексации](partially-indexed-items-in-content-search.md#file-types-not-indexed-for-search)
    
- Сообщения электронной почты имеют вложенный файл без допустимого обработчика, такие как файлы изображений; Это является самой распространенной причиной частично индексированных электронной почты
    
- Слишком много файлов, вложенных в сообщение электронной почты
    
- Файл, вложенный в сообщение электронной почты слишком велико
    
- Тип файла поддерживает индексирование, но произошла ошибка индексирования определенного файла
    
Несмотря на то, что она может изменяться большинство организаций клиентов Office 365 иметь не более 1% контента меньше, чем 12% контента и его по размеру, частично индексируются. Причина различие между тома и размер является то, что большие файлы выше вероятность содержащий данные, которые не могут быть индексированы полностью.
  
## <a name="why-does-the-partially-indexed-item-count-change-for-a-search"></a>Почему изменить число частично индексированных элементов для поиска

После выполнения поиска контента в Office 365 безопасность &amp; в статистику результатов поиска, которая отображается в подробную статистику по перечислены центре соответствия требованиям, общее число и размер частично индексированных элементов в папках поиска поиск. Обратите внимание, что они называются *неиндексированные элементов* в Статистика поиска. Вот несколько вещей, которые влияют на количество частично индексированных элементов, возвращаемых в результатах поиска. 
  
- Если элемент частично индексируются и отвечающей поисковому запросу, он включен в count (и размер) элементов результатов поиска и частично индексированных элементов. Тем не менее при экспорте результатов, что же поиск элемент включен только с набором результатов поиска; он не включен как частично индексированных элементов.
    
- Если указать диапазон дат для поискового запроса (в том числе его в запрос) или используя условия, любой частично индексированный элемент, который не совпадает с диапазон дат не включена в подсчет частично индексированных элементов. В число частично индексированных элементов включены только частично индексированных элементов, попадающих в интервал дат.
    
 **Примечание:** Частично индексированных элементов, размещенных в SharePoint и OneDrive сайты *, не* включены в оценку частично индексированных элементов, отображаемых в статистика для поиска. Тем не менее частично индексированных элементов можно экспортировать, если экспортировать результаты поиска контента. Например если можно только поиск сайтов в поиск контента, расчетное частично индексированных элементов будет равен нулю. 
  
## <a name="calculating-the-ratio-of-partially-indexed-items-in-your-organization"></a>Вычисление соотношение частично индексированных элементов в вашей организации

Понять воздействие частично индексированных элементов вашей организации, можно запустить поиска для всего контента в всех почтовых ящиков (с помощью запроса ключевого слова пустым). В следующем примере существует 56,208 (4,830 МБ) полностью индексированных элементов и 470 (316 МБ) частично индексированных элементов.
  
![Пример поиска отображение статистики частично индексированных элементов](media/0f6a5cf7-4c98-44a0-a0dd-5aed67124641.png)
  
Можно определить процент частично индексированных элементов с помощью следующих методов вычисления.
  
 **Для расчета коэффициента частично индексированных элементов в вашей организации:**

`(Total number of partially indexed items/Total number of items) x 100`


`(470/56,208) x 100 = 0.84%`
 
С помощью результаты поиска из предыдущего примера. 84% всех элементов почтовых ящиков, частично индексируются.
  
 **Чтобы вычислить процент размер частично индексированных элементов в вашей организации:**

`(Size of all partially indexed items/Size of all items) x 100`

`(316 MB/4830 MB) x 100 = 6.54%`

Так что в предыдущем примере 6.54% от общего объема элементов почтового ящика являются из частично индексированных элементов. Как уже указано, большинство организаций Office 365, клиенты могут не более 1% контента и меньше, чем 12% содержимого по размеру, частично индексированы.

## <a name="working-with-partially-indexed-items"></a>Работа с частично индексированных элементов

В тех случаях, когда следует просмотреть частично элементов, чтобы убедиться, что они не содержат информацию, можно [экспортировать отчет поиска контента](export-a-content-search-report.md) , который содержит сведения о частично индексированных элементов. При экспорте отчета поиска контента, обязательно выберите один из параметров экспорта, включает в себя частично индексированных элементов. 
  
![Выберите параметр 2 или 3 для экспорта частично индексированных элементов](media/624a62b4-78f7-4329-ab5d-e62e3b369885.png)
  
При экспорте результаты поиска контента или отчет поиска контента, с помощью одного из этих параметров экспорта включает в себя отчет с именем неиндексированные Items.csv. В этом отчете включает большинство те же данные, где находится файл ResultsLog.csv; Тем не менее, файл неиндексированные Items.csv также включает в себя два поля, связанные с частично индексированных элементов: **Ошибка теги** и **Свойства об ошибках**. Эти поля содержат информацию о ошибка индексирования для каждого частично индексированных элементов. С помощью сведений, эти два поля, которые помогут определить ли ошибка индексирования для определенного влияет на изучение. Если это так, можно выполнить поиск целевого контента и извлечение и экспорта определенных сообщений и документы SharePoint и OneDrive, чтобы вы их можно проверить, чтобы определить, если они важны для расследования. Для получения пошаговых инструкций см. [Подготовка CSV-файл для целевого контента поиска в Office 365](csv-file-for-an-id-list-content-search.md).
  
 **Примечание:** Файл неиндексированные Items.csv также содержит поля с именем **Тип ошибки** и **Сообщение об ошибке**. Это прежних версий полей, которые содержат данные, похожие на сведения в полях **Ошибка теги** и **Свойства об ошибке** , но с более подробными сведениями. Эти устаревшие поля можно игнорировать. 
  
## <a name="errors-related-to-partially-indexed-items"></a>Ошибки, связанные с частично индексированных элементов

Ошибка тегов состоят из двух частей данных, ошибки и тип файла. Например в данной паре ошибка/filetype:

```
 parseroutputsize_xls
```

   
 `parseroutputsize`— Это ошибки и `xls` — это тип файла, возникла ошибка. В тех случаях, которые были тип файла не был распознан или тип файла был не применяется к ошибке появится значение `noformat` вместо типа файла. 
  
Ниже приведен список индексирования ошибки и описание возможных причин ошибки.
  
|**Ошибка тега**|**Описание**|
|:-----|:-----|
| `attachmentcount` <br/> |Сообщение электронной почты было слишком много вложений, а некоторые из этих вложений не были обработаны.  <br/> |
| `attachmentdepth` <br/> |Контента синтаксического анализа об изменениях и документа найдено слишком много уровней вложения, вложенных в другие вложения. Некоторые из этих вложений не были обработаны.  <br/> |
| `attachmentrms` <br/> |Вложение не удается декодировать за защитой службы управления правами.  <br/> |
| `attachmentsize` <br/> |Файл, вложенный в сообщение электронной почты слишком велико и не удается обработать.  <br/> |
| `indexingtruncated` <br/> |При составлении сообщения электронной почты обработанные в индекс, одного из индексируемых свойств слишком велико и усечено. Усеченных свойства перечислены в поле свойства об ошибках.  <br/> |
| `invalidunicode` <br/> |Сообщение электронной почты содержит текст, который не удалось обработать как Юникода. Индексирование для этого элемента может быть неполным.  <br/> |
| `parserencrypted` <br/> |Шифрования содержимого вложения или сообщение электронной почты и Office 365 не удалось расшифровать содержимое.  <br/> |
| `parsererror` <br/> |Неизвестная ошибка во время синтаксического анализа. Обычно это происходит при программного обеспечения ошибки или сбоя службы.  <br/> |
| `parserinputsize` <br/> |Вложение слишком велик для синтаксического анализа для обработки и синтаксического анализа вложение не произойти или не был завершен.  <br/> |
| `parsermalformed` <br/> |Вложение сформирован и не может обрабатываться средство синтаксического анализа. В этом результатов из старого файла могут получать форматов, файлы, созданные несовместимое программное обеспечение или вирусов, изображающий командлет что-то отличное от собственностью.  <br/> |
| `parseroutputsize` <br/> |Выходные данные анализа вложения слишком велико и были вынуждены усечено.  <br/> |
| `parserunknowntype` <br/> |Вложение имеет тип файла, который не удалось обнаружить Office 365.  <br/> |
| `parserunsupportedtype` <br/> |Вложение имеет тип файла, обнаруживать Office 365could, но синтаксический анализ данного типа файлов не поддерживается.  <br/> |
| `propertytoobig` <br/> |Значение свойства электронной почты в Exchange Store слишком велик нужно вернуть и не удается обработать сообщение. Это обычно происходит только свойства текста сообщения электронной почты.  <br/> |
| `retrieverrms` <br/> |Не удалось расшифровать сообщение защищенных контента об изменениях.  <br/> |
| `wordbreakertruncated` <br/> |Слишком много слова обнаружены в документе во время индексирования. После достижения предела прекращена обработка свойства и свойства урезается.  <br/> |
   
Ошибка поля описываются поля, которые затрагиваются указанной в поле метки ошибки обработки ошибки. При поиске свойства, такие как `subject` или `participants`, ошибки в тексте сообщения не будут влиять на результаты поиска. Это может быть полезен при определении точно какие частично индексированных элементов, может потребоваться дальнейшего изучения.
  
## <a name="using-a-powershell-script-to-determine-your-organizations-exposure-to-partially-indexed-email-items"></a>С помощью скрипта PowerShell для определения наличия вашей организации в электронной почты частично индексированных элементов

Далее показано, как запустить сценарий PowerShell, который выполняет поиск всех элементов в всех почтовых ящиков Exchange и создает отчет о вашей организации соотношение частично индексированных электронной почты (число и размер) и отображает число элементов (и их типа) для каждого индексирования Ошибка выполнения. Используйте тег описания ошибок в предыдущем разделе для идентификации ошибка индексирования.
  
1. Сохраните следующий текст в файл сценария Windows PowerShell с помощью суффикса имени файла .ps1; например `PartiallyIndexedItems.ps1`.

```
  write-host "**************************************************"
  write-host "     Office 365 Security &amp; Compliance Center      " -foregroundColor yellow -backgroundcolor darkgreen
  write-host "   eDiscovery Partially Indexed Item Statistics   " -foregroundColor yellow -backgroundcolor darkgreen
  write-host "**************************************************"
  " " 
  # Create a search with Error Tags Refinders enabled
  Remove-ComplianceSearch "RefinerTest" -Confirm:$false -ErrorAction 'SilentlyContinue'
  New-ComplianceSearch -Name "RefinerTest" -ContentMatchQuery "size>0" -RefinerNames ErrorTags -ExchangeLocation ALL
  Start-ComplianceSearch "RefinerTest"
  # Loop while search is in progress
  do{
      Write-host "Waiting for search to complete..."
      Start-Sleep -s 5
      $complianceSearch = Get-ComplianceSearch "RefinerTest"
  }while ($complianceSearch.Status -ne 'Completed')
  $refiners = $complianceSearch.Refiners | ConvertFrom-Json
  $errorTagProperties = $refiners.Entries | Get-Member -MemberType NoteProperty
  $partiallyIndexedRatio = $complianceSearch.UnindexedItems / $complianceSearch.Items
  $partiallyIndexedSizeRatio = $complianceSearch.UnindexedSize / $complianceSearch.Size
  " "
  "===== Partially indexed items ====="
  "         Total          Ratio"
  "Count    {0:N0}{1:P2}" -f $complianceSearch.Items.ToString("N0").PadRight(15, " "), $partiallyIndexedRatio
  "Size(GB) {0:N2}{1:P2}" -f ($complianceSearch.Size / 1GB).ToString("N2").PadRight(15, " "), $partiallyIndexedSizeRatio
  " "
  Write-Host ===== Reasons for partially indexed items =====
  foreach($errorTagProperty in $errorTagProperties)
  {
      $name = $refiners.Entries.($errorTagProperty.Name).Name
      $count = $refiners.Entries.($errorTagProperty.Name).TotalCount
      $frag = $name.Split("{_}")
      $errorTag = $frag[0]
      $fileType = $frag[1]
      if ($errorTag -ne $lastErrorTag)
      {
          $errorTag
      }
      "    " + $fileType + " => " + $count
      $lastErrorTag = $errorTag
  }
  
```
   
2. [Подключение к Office 365: безопасность &amp; PowerShell центре соответствия требованиям](https://go.microsoft.com/fwlink/p/?linkid=627084).
    
3. В разделе Безопасность &amp; PowerShell центр соответствия требованиям, перейдите к папке, где был сохранен сценарий на шаге 1, а затем запустите сценарий; Например:

    ```
    .\PartiallyIndexedItems.ps1
    ```
   
Ниже приведен пример опубликованные выходных данных, возвращаемое скриптом.
  
![Пример выходных данных из скрипта, который создает отчет в вашей организации доступом частично индексированных элементов электронной почты](media/aeab5943-c15d-431a-bdb2-82f135abc2f3.png)
  
Обратите внимание на следующее:
  
1. Общее число и размер элементов электронной почты и отношение вашей организации электронной почты частично индексированных элементов (число и размер)
    
2. Теги ошибка списков и соответствующие типы файлов, для которых произошла ошибка.
  
## <a name="see-also"></a>См. также

[Частично индексированные элементы в средстве "Поиск контента" в Office 365](partially-indexed-items-in-content-search.md)
