---
title: Формирование запроса для поиска конфиденциальных данных, которые хранятся на сайтах
ms.author: stephow
author: stephow-MSFT
manager: laurawi
ms.date: 6/29/2018
ms.audience: Admin
ms.topic: article
ms.service: O365-seccomp
localization_priority: Normal
search.appverid:
- MOE150
- MET150
ms.assetid: 3019fbc5-7f15-4972-8d0e-dc182dc7f836
description: С предотвращением потери данных (DLP) в SharePoint Online вы можете находить документы, содержащие конфиденциальные данные в клиенте. После обнаружения документов можно работать с владельцами документов для защиты данных. Эта статья поможет вам сформировать запрос на поиск конфиденциальных данных.
ms.openlocfilehash: 3dc1081d4627f1a26c50eed84f733c31a3f6c194
ms.sourcegitcommit: f57b4001ef1327f0ea622e716a4d7d78f1769b49
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/23/2019
ms.locfileid: "30217239"
---
# <a name="form-a-query-to-find-sensitive-data-stored-on-sites"></a><span data-ttu-id="21212-105">Формирование запроса для поиска конфиденциальных данных, которые хранятся на сайтах</span><span class="sxs-lookup"><span data-stu-id="21212-105">Form a query to find sensitive data stored on sites</span></span>

<span data-ttu-id="21212-p102">Пользователи часто хранят конфиденциальные данные, такие как номера кредитных карт, номера социального страхования или личные, на своих сайтах, а также с течением времени это может привести к существенному риску потери данных в Организации. Документы, хранящиеся на сайтах, в том числе сайты OneDrive для бизнеса, могут быть предоставлены пользователям за пределами Организации, у которых нет доступа к данным. С предотвращением потери данных (DLP) в SharePoint Online вы можете находить документы, содержащие конфиденциальные данные в клиенте. После обнаружения документов можно работать с владельцами документов для защиты данных. Эта статья поможет вам сформировать запрос на поиск конфиденциальных данных.</span><span class="sxs-lookup"><span data-stu-id="21212-p102">Users often store sensitive data, such as credit card numbers, social security numbers, or personal, on their sites, and over time this can expose an organization to significant risk of data loss. Documents stored on sites—including OneDrive for Business sites—could be shared with people outside the organization who shouldn't have access to the information. With data loss prevention (DLP) in SharePoint Online, you can discover documents that contain sensitive data throughout your tenant. After discovering the documents, you can work with the document owners to protect the data. This topic can help you form a query to search for sensitive data.</span></span>
  
> [!NOTE]
> <span data-ttu-id="21212-111">Электронное обнаружение, обнаружение электронных данных и защита от потери данных являются расширенными функциями, для которых требуется [SharePoint Online (план 2](https://go.microsoft.com/fwlink/?LinkId=510080)).</span><span class="sxs-lookup"><span data-stu-id="21212-111">Electronic discovery, or eDiscovery, and DLP are premium features that require [SharePoint Online Plan 2](https://go.microsoft.com/fwlink/?LinkId=510080).</span></span> 
  
## <a name="forming-a-basic-dlp-query"></a><span data-ttu-id="21212-112">Формирование базового запроса защиты от потери данных</span><span class="sxs-lookup"><span data-stu-id="21212-112">Forming a basic DLP query</span></span>

<span data-ttu-id="21212-p103">Базовый запрос DLP состоит из трех частей: SensitiveType, диапазона счетчика и диапазона доверия. Как показано на приведенном ниже рисунке, **SensitiveType: "\<тип\>"** является обязательным, а**|\<диапазон\> \*\* и допустимый**|\<\> \*\* диапазон и диапазон допустимых значений являются необязательными.</span><span class="sxs-lookup"><span data-stu-id="21212-p103">There are three parts that make up a basic DLP query: SensitiveType, count range, and confidence range. As illustrated in the following graphic, **SensitiveType:"\<type\>"** is required, and both**|\<count range\>** and**|\<confidence range\>** are optional.</span></span> 
  
![Пример запроса, разделенный на обязательную и необязательную части](media/DLP-query-example-text.png)
  
### <a name="sensitive-type---required"></a><span data-ttu-id="21212-116">Тип конфиденциальной информации — обязательная часть</span><span class="sxs-lookup"><span data-stu-id="21212-116">Sensitive type - required</span></span>

<span data-ttu-id="21212-p104">В чем состоит каждая часть? Обычно запросы DLP в SharePoint начинаются с свойства `SensitiveType:"` и имени типа данных из [описи типов конфиденциальной информации](https://go.microsoft.com/fwlink/?LinkID=509999)и заканчиваются на `"`. Кроме того, можно использовать имя настраиваемого [типа конфиденциальной информации](create-a-custom-sensitive-information-type.md) , созданного для Организации. Например, вы можете найти документы, содержащие номера кредитных карт. В таком экземпляре необходимо использовать следующий формат: `SensitiveType:"Credit Card Number"`. Так как вы не включили диапазон счетчиков или диапазон достоверности, запрос возвращает каждый документ, в котором обнаружен номер кредитной карты. Это самый простой запрос, который можно запустить, и он возвращает самые результаты. Имейте в виду, что проверка орфографии и пробелов в конфиденциальном типе имеет значение.</span><span class="sxs-lookup"><span data-stu-id="21212-p104">So what is each part? SharePoint DLP queries typically begin with the property  `SensitiveType:"` and an information type name from the [sensitive information types inventory](https://go.microsoft.com/fwlink/?LinkID=509999), and end with a  `"`. You can also use the name of a [custom sensitive information type](create-a-custom-sensitive-information-type.md) that you created for your organization. For example, you might be looking for documents that contain credit card numbers. In such an instance, you'd use the following format:  `SensitiveType:"Credit Card Number"`. Because you didn't include count range or confidence range, the query returns every document in which a credit card number is detected. This is the simplest query that you can run, and it returns the most results. Keep in mind that the spelling and spacing of the sensitive type matters.</span></span> 
  
### <a name="ranges---optional"></a><span data-ttu-id="21212-125">Диапазоны — необязательная часть.</span><span class="sxs-lookup"><span data-stu-id="21212-125">Ranges - optional</span></span>

<span data-ttu-id="21212-p105">Обе следующие две части являются диапазонами, поэтому мы быстро рассмотрим, как выглядит диапазон. В запросах DLP от потери данных в SharePoint базовый диапазон представлен двумя числами, разделенными двумя точками, которые выглядят `[number]..[number]`следующим образом:. Например, если `10..20` используется, этот диапазон будет записывать числа от 10 до 20. В этом разделе рассматривается множество различных комбинаций диапазонов и несколько.</span><span class="sxs-lookup"><span data-stu-id="21212-p105">Both of the next two parts are ranges, so let's quickly examine what a range looks like. In SharePoint DLP queries, a basic range is represented by two numbers separated by two periods, which looks like this:  `[number]..[number]`. For instance, if  `10..20` is used, that range would capture numbers from 10 through 20. There are many different range combinations and several are covered in this topic.</span></span> 
  
<span data-ttu-id="21212-p106">Давайте добавим в запрос диапазон счетчика. Можно использовать диапазон счетчиков, чтобы определить количество вхождений конфиденциальной информации, которую должен содержать документ, прежде чем он будет включен в результаты запроса. Например, если необходимо, чтобы в запросе возвращались только документы, содержащие только пять номеров кредитных карт, используйте следующую команду `SensitiveType:"Credit Card Number|5"`:. Диапазон подСчета также может помочь определить документы, которые создают высокую степень риска. Например, Организация может расдумать документы с пятью или более номерами кредитных карт с большой степенью риска. Для поиска документов, использующих этот критерий, используйте следующий `SensitiveType:"Credit Card Number|5.."`запрос:. Кроме того, вы можете найти документы с пятью или меньшими номерами кредитных карт с помощью `SensitiveType:"Credit Card Number|..5"`следующего запроса:.</span><span class="sxs-lookup"><span data-stu-id="21212-p106">Let's add a count range to the query. You can use count range to define the number of occurrences of sensitive information a document needs to contain before it's included in the query results. For example, if you want your query to return only documents that contain exactly five credit card numbers, use this:  `SensitiveType:"Credit Card Number|5"`. Count range can also help you identify documents that pose high degrees of risk. For example, your organization might consider documents with five or more credit card numbers a high risk. To find documents fitting this criterion, you would use this query:  `SensitiveType:"Credit Card Number|5.."`. Alternatively, you can find documents with five or fewer credit card numbers by using this query:  `SensitiveType:"Credit Card Number|..5"`.</span></span> 
  
#### <a name="confidence-range"></a><span data-ttu-id="21212-137">диапазон доверия;</span><span class="sxs-lookup"><span data-stu-id="21212-137">Confidence range</span></span>

<span data-ttu-id="21212-p107">Наконец, диапазон надежности — это уровень уверенности, в котором обнаруженный конфиденциальный тип фактически является совпадением. Значения для диапазона вероятности работают аналогично диапазону Count. Вы можете создать запрос без включения диапазона счетчика. Например, чтобы найти документы с любым количеством номеров кредитных карт, если диапазон вероятности составляет 85 процентов или выше, используйте следующий запрос: `SensitiveType:"Credit Card Number|*|85.."`.</span><span class="sxs-lookup"><span data-stu-id="21212-p107">Finally, confidence range is the level of confidence that the detected sensitive type is actually a match. The values for confidence range work similarly to count range. You can form a query without including a count range. For example, to search for documents with any number of credit card numbers—as long as the confidence range is 85 percent or higher—you would use this query:  `SensitiveType:"Credit Card Number|*|85.."`.</span></span> 
  
> [!IMPORTANT]
> <span data-ttu-id="21212-p108">Звездочка ( `*`) — это подстановочный знак, который означает, что любое значение работает. Можно использовать подстановочный знак ( `*`) либо в диапазоне счетчика, либо в диапазоне достоверности, но не в конфиденциальном типе.</span><span class="sxs-lookup"><span data-stu-id="21212-p108">The asterisk ( `*`) is a wildcard character that means any value works. You can use the wildcard character ( `*`) either in the count range or in the confidence range, but not in a sensitive type.</span></span> 
  
### <a name="additional-query-properties-and-search-operators-available-in-the-ediscovery-center"></a><span data-ttu-id="21212-144">Дополнительные свойства запросов и операторы поиска, доступные в центре обнаружения электронных данных</span><span class="sxs-lookup"><span data-stu-id="21212-144">Additional query properties and search operators available in the eDiscovery Center</span></span>

<span data-ttu-id="21212-p109">Защита от потери данных в SharePoint также содержит свойство Ластсенситивеконтентскан, которое позволяет искать файлы, проверенные в течение определенного периода времени. Примеры запросов со `LastSensitiveContentScan` свойством приведены в примерах [сложных запросов](form-a-query-to-find-sensitive-data-stored-on-sites.md#BKMK_ExamplesOfComplexQueries) в следующем разделе.</span><span class="sxs-lookup"><span data-stu-id="21212-p109">DLP in SharePoint also introduces the LastSensitiveContentScan property, which can help you search for files scanned within a specific timeframe. For query examples with the  `LastSensitiveContentScan` property, see the [Examples of complex queries](form-a-query-to-find-sensitive-data-stored-on-sites.md#BKMK_ExamplesOfComplexQueries) in the next section.</span></span> 
  
<span data-ttu-id="21212-p110">Для создания запроса можно использовать не только свойства DLP, но и стандартные свойства поиска обнаружения электронных данных SharePoint, такие как `Author` или. `FileExtension` С помощью операторов можно создавать сложные запросы. Список доступных свойств и операторов представлен в статье [использование свойств и операторов поиска с](https://go.microsoft.com/fwlink/?LinkId=510093) записью блога обнаружения электронных данных.</span><span class="sxs-lookup"><span data-stu-id="21212-p110">You can use not only DLP-specific properties to create a query, but also standard SharePoint eDiscovery search properties such as  `Author` or  `FileExtension`. You can use operators to build complex queries. For the list of available properties and operators, see the [Using Search Properties and Operators with eDiscovery](https://go.microsoft.com/fwlink/?LinkId=510093) blog post.</span></span> 
  
## <a name="examples-of-complex-queries"></a><span data-ttu-id="21212-150">Примеры</span><span class="sxs-lookup"><span data-stu-id="21212-150">Examples of complex queries</span></span>

<span data-ttu-id="21212-151">В следующих примерах используются различные конфиденциальные типы, свойства и операторы, чтобы продемонстрировать, как можно уточнить запросы, чтобы найти именно то, что вы искали.</span><span class="sxs-lookup"><span data-stu-id="21212-151">The following examples use different sensitive types, properties, and operators to illustrate how you can refine your queries to find exactly what you're looking for.</span></span>
  
|<span data-ttu-id="21212-152">**Подчинен**</span><span class="sxs-lookup"><span data-stu-id="21212-152">**Query**</span></span>|<span data-ttu-id="21212-153">**Описание**</span><span class="sxs-lookup"><span data-stu-id="21212-153">**Explanation**</span></span>|
|:-----|:-----|
| `SensitiveType:"International Banking Account Number (IBAN)"` <br/> |<span data-ttu-id="21212-p111">Имя может показаться странным, так как это длинное имя, но это правильное имя для этого типа конфиденциальной информации. Обязательно используйте точные имена из [перечня типов конфиденциальной информации](https://go.microsoft.com/fwlink/?LinkID=509999). Кроме того, можно использовать имя настраиваемого [типа конфиденциальной информации](create-a-custom-sensitive-information-type.md) , созданного для Организации.</span><span class="sxs-lookup"><span data-stu-id="21212-p111">The name might seem strange because it's so long, but it's the correct name for that sensitive type. Make sure to use exact names from the [sensitive information types inventory](https://go.microsoft.com/fwlink/?LinkID=509999). You can also use the name of a [custom sensitive information type](create-a-custom-sensitive-information-type.md) that you created for your organization.  </span></span><br/> |
| `SensitiveType:"Credit Card Number|1..4294967295|1..100"` <br/> |<span data-ttu-id="21212-p112">Возвращает документы, имеющие по крайней мере одно согласование с конфиденциальным типом "номер кредитной карты". Значения для каждого диапазона являются соответствующими минимальным и максимальным значениями. Проще всего написать этот запрос, но где `SensitiveType:"Credit Card Number"`это удобно?</span><span class="sxs-lookup"><span data-stu-id="21212-p112">This returns documents with at least one match to the sensitive type "Credit Card Number." The values for each range are the respective minimum and maximum values. A simpler way to write this query is  `SensitiveType:"Credit Card Number"`, but where's the fun in that?  </span></span><br/> |
| `SensitiveType:"Credit Card Number| 5..25" AND LastSensitiveContentScan:"8/11/2018..8/13/2018"` <br/> |<span data-ttu-id="21212-160">Это возвращает документы с номерами кредитных карт 5-25, которые были проверены с 11 августа 2018 до 13 августа 2018.</span><span class="sxs-lookup"><span data-stu-id="21212-160">This returns documents with 5-25 credit card numbers that were scanned from August 11, 2018 through August 13, 2018.</span></span>  <br/> |
| `SensitiveType:"Credit Card Number| 5..25" AND LastSensitiveContentScan:"8/11/2018..8/13/2018" NOT FileExtension:XLSX` <br/> |<span data-ttu-id="21212-p113">Это возвращает документы с номерами кредитных карт 5-25, которые были проверены с 11 августа 2018 до 13 августа 2018. Файлы с расширением XLSX не включаются в результаты запроса.  `FileExtension` — это одно из многих свойств, которые можно включить в запрос. Дополнительные сведения см. в статье [использование свойств и операторов поиска с обнаружением электронных](https://go.microsoft.com/fwlink/?LinkId=510093)данных.</span><span class="sxs-lookup"><span data-stu-id="21212-p113">This returns documents with 5-25 credit card numbers that were scanned from August 11, 2018 through August 13, 2018. Files with an XLSX extension aren't included in the query results.  `FileExtension` is one of many properties that you can include in a query. For more information, see [Using Search Properties and Operators with eDiscovery](https://go.microsoft.com/fwlink/?LinkId=510093).  </span></span><br/> |
| `SensitiveType:"Credit Card Number" OR SensitiveType:"U.S. Social Security Number (SSN)"` <br/> |<span data-ttu-id="21212-165">Возвращаются документы, содержащие номер кредитной карты или страховой номер (SSN).</span><span class="sxs-lookup"><span data-stu-id="21212-165">This returns documents that contain either a credit card number or a social security number.</span></span>  <br/> |
   
## <a name="examples-of-queries-to-avoid"></a><span data-ttu-id="21212-166">Примеры</span><span class="sxs-lookup"><span data-stu-id="21212-166">Examples of queries to avoid</span></span>

<span data-ttu-id="21212-p114">Не все запросы создаются равными. В следующей таблице приведены примеры запросов, которые не работают с DLP в SharePoint, а также объясняется, почему.</span><span class="sxs-lookup"><span data-stu-id="21212-p114">Not all queries are created equal. The following table gives examples of queries that don't work with DLP in SharePoint and describes why.</span></span>
  
|<span data-ttu-id="21212-169">**Неподдерживаемый запрос**</span><span class="sxs-lookup"><span data-stu-id="21212-169">**Unsupported query**</span></span>|<span data-ttu-id="21212-170">**Reason**</span><span class="sxs-lookup"><span data-stu-id="21212-170">**Reason**</span></span>|
|:-----|:-----|
| `SensitiveType:"Credit Card Number|.."` <br/> |<span data-ttu-id="21212-171">Необходимо добавить хотя бы один номер.</span><span class="sxs-lookup"><span data-stu-id="21212-171">You must add at least one number.</span></span>  <br/> |
| `SensitiveType:"NotARule"` <br/> |<span data-ttu-id="21212-p115">"Нотаруле" не является допустимым именем конфиденциального типа. В запросах DLP работают только имена в [типах конфиденциальной информации](https://go.microsoft.com/fwlink/?LinkID=509999) .</span><span class="sxs-lookup"><span data-stu-id="21212-p115">"NotARule" isn't a valid sensitive type name. Only names in the [sensitive information types inventory](https://go.microsoft.com/fwlink/?LinkID=509999) work in DLP queries.  </span></span><br/> |
| `SensitiveType:"Credit Card Number|0"` <br/> |<span data-ttu-id="21212-174">Ноль не является допустимым как минимальное значение или максимальное значение в диапазоне.</span><span class="sxs-lookup"><span data-stu-id="21212-174">Zero isn't valid as either the minimum value or the maximum value in a range.</span></span>  <br/> |
| `SensitiveType:"Credit Card Number"` <br/> |<span data-ttu-id="21212-p116">Это может быть затруднительно, но между "кредитом" и "картой" есть лишние пробелы, что делает запрос недопустимым. Используйте строго конфиденциальные имена типов из [перечня конфиденциальной информации](https://go.microsoft.com/fwlink/?LinkID=509999).</span><span class="sxs-lookup"><span data-stu-id="21212-p116">It's might be difficult to see, but there's extra white space between "Credit" and "Card" that makes the query invalid. Use exact sensitive type names from the [sensitive information types inventory](https://go.microsoft.com/fwlink/?LinkID=509999).  </span></span><br/> |
| `SensitiveType:"Credit Card Number|1. .3"` <br/> |<span data-ttu-id="21212-177">Две точки не должны быть разделены пробелом.</span><span class="sxs-lookup"><span data-stu-id="21212-177">The two-period portion shouldn't be separated by a space.</span></span>  <br/> |
| `SensitiveType:"Credit Card Number| |1..|80.."` <br/> |<span data-ttu-id="21212-178">Слишком много разделителей каналов (</span><span class="sxs-lookup"><span data-stu-id="21212-178">There are too many pipe delimiters (</span></span>|<span data-ttu-id="21212-p117">). Используйте этот формат:`SensitiveType: "Credit Card Number|1..|80.."`</span><span class="sxs-lookup"><span data-stu-id="21212-p117">). Follow this format instead: `SensitiveType: "Credit Card Number|1..|80.."`</span></span> <br/> |
| `SensitiveType:"Credit Card Number|1..|80..101"` <br/> |<span data-ttu-id="21212-p118">Так как значения вероятности представляют процентные значения, они не могут превышать 100. Вместо этого выберите число от 1 до 100.</span><span class="sxs-lookup"><span data-stu-id="21212-p118">Because confidence values represent a percentage, they can't exceed 100. Choose a number from 1 through 100 instead.</span></span>  <br/> |
   
## <a name="for-more-information"></a><span data-ttu-id="21212-183">Дополнительные сведения</span><span class="sxs-lookup"><span data-stu-id="21212-183">For more information</span></span>

[<span data-ttu-id="21212-184">Что позволяют искать типы конфиденциальной информации</span><span class="sxs-lookup"><span data-stu-id="21212-184">What the sensitive information types look for</span></span>](what-the-sensitive-information-types-look-for.md)
  
[<span data-ttu-id="21212-185">Запуск поиска контента в центре безопасности &amp; и соответствия требованиям Office 365</span><span class="sxs-lookup"><span data-stu-id="21212-185">Run a Content Search in the Office 365 Security &amp; Compliance Center</span></span>](run-a-content-search-in-the-security-and-compliance-center.md)
  
[<span data-ttu-id="21212-186">Запросы ключевых слов и условия поиска контента</span><span class="sxs-lookup"><span data-stu-id="21212-186">Keyword queries and search conditions for Content Search</span></span>](keyword-queries-and-search-conditions.md)
  

