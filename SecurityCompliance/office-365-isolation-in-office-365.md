---
title: Изоляция и управление доступом в Office 365 в Office 365
ms.author: robmazz
author: robmazz
manager: laurawi
audience: ITPro
ms.topic: article
ms.service: O365-seccomp
localization_priority: Normal
search.appverid:
- MET150
ms.collection:
- Strat_O365_IP
- M365-security-compliance
description: Сводка. Описание изоляции и управления доступом в различных приложениях Office 365.
ms.openlocfilehash: 748da21f5b5048bb4ae4c14700ed482fd6d0058c
ms.sourcegitcommit: e23b84ef4eee9cccec7205826b71ddfe9aaac2f8
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/28/2019
ms.locfileid: "33402897"
---
# <a name="isolation-and-access-control-in-office-365"></a><span data-ttu-id="21f68-103">Изоляция и управление доступом в Office 365</span><span class="sxs-lookup"><span data-stu-id="21f68-103">Isolation and Access Control in Office 365</span></span>

<span data-ttu-id="21f68-104">Azure Active Directory и Office 365 используют очень сложную модель данных, включающую десятки служб, сотни сущностей, тысячи отношений и десятки тысяч атрибутов.</span><span class="sxs-lookup"><span data-stu-id="21f68-104">Azure Active Directory and Office 365 use a highly complex data model that includes tens of services, hundreds of entities, thousands of relationships, and tens of thousands of attributes.</span></span> <span data-ttu-id="21f68-105">На высоком уровне, Azure Active Directory и каталогах служб — это контейнеры клиентов и получателей, которые синхронизируются с использованием протоколов репликации на основе состояния.</span><span class="sxs-lookup"><span data-stu-id="21f68-105">At a high level, Azure Active Directory and the service directories are the containers of tenants and recipients kept in sync using state-based replication protocols.</span></span> <span data-ttu-id="21f68-106">Кроме сведений о каталоге, хранящихся в Azure Active Directory, у каждой рабочей нагрузки службы есть своя инфраструктура служб каталогов.</span><span class="sxs-lookup"><span data-stu-id="21f68-106">In addition to the directory information held within Azure Active Directory, each of the service workloads have their own directory services infrastructure.</span></span>
 
![Синхронизация данных клиента Office 365](media/office-365-isolation-tenant-data-sync.png)

<span data-ttu-id="21f68-108">В этой модели нет единого источника данных каталога.</span><span class="sxs-lookup"><span data-stu-id="21f68-108">Within this model, there is no single source of directory data.</span></span> <span data-ttu-id="21f68-109">Конкретные системы принадлежат отдельным частям данных, но ни одна система не содержит все данные.</span><span class="sxs-lookup"><span data-stu-id="21f68-109">Specific systems own individual pieces of data, but no single system holds all the data.</span></span> <span data-ttu-id="21f68-110">Службы Office 365 сотрудничают с Azure Active Directory в этой модели данных.</span><span class="sxs-lookup"><span data-stu-id="21f68-110">Office 365 services cooperate with Azure Active Directory in this data model.</span></span> <span data-ttu-id="21f68-111">Azure Active Directory — это «система истинности» для общих данных, которая обычно представляет собой небольшие и статические данные, используемые каждой службой.</span><span class="sxs-lookup"><span data-stu-id="21f68-111">Azure Active Directory is the "system of truth" for shared data, which is typically small and static data used by every service.</span></span> <span data-ttu-id="21f68-112">Федеративная модель, используемая в Office 365 и Azure Active Directory, предоставляет общее представление данных.</span><span class="sxs-lookup"><span data-stu-id="21f68-112">The federated model used within Office 365 and Azure Active Directory provides the shared view of the data.</span></span>

<span data-ttu-id="21f68-113">Office 365 использует как физическое хранилище, так и облачное хранилище Azure.</span><span class="sxs-lookup"><span data-stu-id="21f68-113">Office 365 uses both physical storage and Azure cloud storage.</span></span> <span data-ttu-id="21f68-114">Exchange Online (включая Exchange Online Protection) и Skype для бизнеса используют собственное хранилище для данных клиентов.</span><span class="sxs-lookup"><span data-stu-id="21f68-114">Exchange Online (including Exchange Online Protection) and Skype for Business use their own storage for customer data.</span></span> <span data-ttu-id="21f68-115">SharePoint Online использует как хранилище данных SQL Server, так и хранилище Azure, поэтому потребность в дополнительной изоляции данных клиентов на уровне хранения.</span><span class="sxs-lookup"><span data-stu-id="21f68-115">SharePoint Online uses both SQL Server storage and Azure Storage, hence the need for additional isolation of customer data at the storage level.</span></span>

## <a name="exchange-online"></a><span data-ttu-id="21f68-116">Exchange Online</span><span class="sxs-lookup"><span data-stu-id="21f68-116">Exchange Online</span></span>

<span data-ttu-id="21f68-117">Exchange Online хранит данные клиентов в почтовых ящиках.</span><span class="sxs-lookup"><span data-stu-id="21f68-117">Exchange Online stores customer data within mailboxes.</span></span> <span data-ttu-id="21f68-118">ПоЧтовые ящики размещаются в базах данных расширенного обработчика хранилищ (ESE) под названием databases.</span><span class="sxs-lookup"><span data-stu-id="21f68-118">Mailboxes are hosted within Extensible Storage Engine (ESE) databases called mailbox databases.</span></span> <span data-ttu-id="21f68-119">Сюда входят почтовые ящики пользователей, связанные почтовые ящики, общие почтовые ящики и почтовые</span><span class="sxs-lookup"><span data-stu-id="21f68-119">This includes user mailboxes, linked mailboxes, shared mailboxes, and public folder mailboxes.</span></span> <span data-ttu-id="21f68-120">Почтовые ящики пользователей включают сохраненный контент Skype для бизнеса, например историю бесед.</span><span class="sxs-lookup"><span data-stu-id="21f68-120">User mailboxes include saved Skype for Business content, such as conversation histories.</span></span>

<span data-ttu-id="21f68-121">Содержимое почтового ящика пользователя включает:</span><span class="sxs-lookup"><span data-stu-id="21f68-121">User mailbox content includes:</span></span>

- <span data-ttu-id="21f68-122">Сообщения электронной почты и вложения электронной почты</span><span class="sxs-lookup"><span data-stu-id="21f68-122">Emails and email attachments</span></span>
- <span data-ttu-id="21f68-123">Сведения о календаре и занятости</span><span class="sxs-lookup"><span data-stu-id="21f68-123">Calendaring and free/busy information</span></span>
- <span data-ttu-id="21f68-124">Contacts</span><span class="sxs-lookup"><span data-stu-id="21f68-124">Contacts</span></span>
- <span data-ttu-id="21f68-125">Задачи</span><span class="sxs-lookup"><span data-stu-id="21f68-125">Tasks</span></span>
- <span data-ttu-id="21f68-126">Заметки</span><span class="sxs-lookup"><span data-stu-id="21f68-126">Notes</span></span>
- <span data-ttu-id="21f68-127">Groups</span><span class="sxs-lookup"><span data-stu-id="21f68-127">Groups</span></span>
- <span data-ttu-id="21f68-128">Данные вывода</span><span class="sxs-lookup"><span data-stu-id="21f68-128">Inference data</span></span>

<span data-ttu-id="21f68-129">Каждая база данных почтовых ящиков в Exchange Online содержит почтовые ящики нескольких клиентов.</span><span class="sxs-lookup"><span data-stu-id="21f68-129">Each mailbox database within Exchange Online contains mailboxes from multiple tenants.</span></span> <span data-ttu-id="21f68-130">Код авторизации обеспечивает защиту каждого почтового ящика, в том числе в рамках клиента.</span><span class="sxs-lookup"><span data-stu-id="21f68-130">An authorization code secures each mailbox, including within a tenancy.</span></span> <span data-ttu-id="21f68-131">По умолчанию доступ к почтовому ящику имеют только назначенный пользователь.</span><span class="sxs-lookup"><span data-stu-id="21f68-131">By default, only the assigned user has access to a mailbox.</span></span> <span data-ttu-id="21f68-132">Список управления доступом (ACL), обеспечивающий защиту почтового ящика, содержит удостоверение, прошедшее проверку подлинности Azure Active Directory на уровне клиента.</span><span class="sxs-lookup"><span data-stu-id="21f68-132">The access control list (ACL) that secures a mailbox contains an identity authenticated by Azure Active Directory at the tenant level.</span></span> <span data-ttu-id="21f68-133">Почтовые ящики для каждого клиента ограничены удостоверениями, проверенными в поставщике проверки подлинности клиента, который включает в себя только пользователей этого клиента.</span><span class="sxs-lookup"><span data-stu-id="21f68-133">The mailboxes for each tenant are limited to identities authenticated against the tenant's authentication provider, which includes only users from that tenant.</span></span> <span data-ttu-id="21f68-134">Контент в клиенте А не может быть получен пользователями в клиенте Б, если только он явно не утвержден клиентом A.</span><span class="sxs-lookup"><span data-stu-id="21f68-134">Content in tenant A cannot in any way be obtained by users in tenant B, unless explicitly approved by tenant A.</span></span>

## <a name="skype-for-business"></a><span data-ttu-id="21f68-135">Skype для бизнеса</span><span class="sxs-lookup"><span data-stu-id="21f68-135">Skype for Business</span></span>

<span data-ttu-id="21f68-136">Skype для бизнеса хранит данные в различных местах:</span><span class="sxs-lookup"><span data-stu-id="21f68-136">Skype for Business stores data in various places:</span></span>

- <span data-ttu-id="21f68-137">Сведения о пользователях и учетных записях, включая конечные точки подключений, идентификаторы клиентов, абонентские группы, параметры роуминга, состояние присутствия, списки контактов и т. д., хранятся на серверах Active Directory Skype для бизнеса и на различных серверах баз данных Skype для бизнеса.</span><span class="sxs-lookup"><span data-stu-id="21f68-137">User and account information, which includes connection endpoints, tenant IDs, dial plans, roaming settings, presence state, contact lists, etc., is stored in the Skype for Business Active Directory servers, and in various Skype for Business database servers.</span></span> <span data-ttu-id="21f68-138">Списки контактов хранятся в почтовом ящике Exchange Online пользователя, если пользователь включен для обеих продуктов, или на серверах Skype для бизнеса, если пользователь не работает.</span><span class="sxs-lookup"><span data-stu-id="21f68-138">Contact lists are stored in the user's Exchange Online mailbox if the user is enabled for both products, or on Skype for Business servers if the user is not.</span></span> <span data-ttu-id="21f68-139">Серверы баз данных Skype для бизнеса не разбиты на несколько клиентов, но изоляция данных с несколькими клиентами обеспечивается с помощью управления доступом на основе ролей (RBAC).</span><span class="sxs-lookup"><span data-stu-id="21f68-139">Skype for Business database servers are not partitioned per-tenant, but multi-tenancy isolation of data is enforced through role-based access control (RBAC).</span></span>
- <span data-ttu-id="21f68-140">Содержимое собраний и отправленные данные хранятся в общих папках распределенной файловой системы (DFS).</span><span class="sxs-lookup"><span data-stu-id="21f68-140">Meeting content and uploaded data is stored on Distributed File System (DFS) shares.</span></span> <span data-ttu-id="21f68-141">Этот контент также можно архивировать в Exchange Online, если он включен.</span><span class="sxs-lookup"><span data-stu-id="21f68-141">This content can also be archived in Exchange Online if enabled.</span></span> <span data-ttu-id="21f68-142">Общие ресурсы DFS не разбиты на разделы для каждого клиента.</span><span class="sxs-lookup"><span data-stu-id="21f68-142">The DFS shares are not partitioned per-tenant.</span></span> <span data-ttu-id="21f68-143">содержимое защищено с помощью списков управления доступом (ACL) и с поддержкой нескольких клиентов с помощью RBAC.</span><span class="sxs-lookup"><span data-stu-id="21f68-143">the content is secured with ACLs and multi-tenancy is enforced through RBAC.</span></span>
- <span data-ttu-id="21f68-144">Записи о вызовах, являющиеся журналом активности, например журнал вызовов, сеансы обмена МГНОВЕНными СООБЩЕНИЯми, общий доступ к приложениям, журнал МГНОВЕНных сообщений и т. д., также могут храниться в Exchange Online, но большинство записей сведений о вызовах временно хранятся на серверах записи сведений о вызовах (CDR).</span><span class="sxs-lookup"><span data-stu-id="21f68-144">Call detail records, which are the activity history, such as call history, IM sessions, application sharing, IM history, etc., can also be stored in Exchange Online, but most call detail records are temporarily stored on call detail record (CDR) servers.</span></span> <span data-ttu-id="21f68-145">Содержимое не секционировано для каждого клиента, но с помощью RBAC применяется мультитенантность.</span><span class="sxs-lookup"><span data-stu-id="21f68-145">Content is not partitioned per tenant, but multi-tenancy is enforced through RBAC.</span></span>

## <a name="sharepoint-online"></a><span data-ttu-id="21f68-146">SharePoint Online</span><span class="sxs-lookup"><span data-stu-id="21f68-146">SharePoint Online</span></span>

<span data-ttu-id="21f68-147">В SharePoint Online есть несколько независимых механизмов, обеспечивающих изоляцию данных.</span><span class="sxs-lookup"><span data-stu-id="21f68-147">SharePoint Online has several independent mechanisms that provide data isolation.</span></span> <span data-ttu-id="21f68-148">В базах данных приложений хранятся объекты в виде абстрактного кода.</span><span class="sxs-lookup"><span data-stu-id="21f68-148">It stores objects as abstracted code within application databases.</span></span> <span data-ttu-id="21f68-149">Например, когда пользователь отправляет файл в SharePoint Online, файл разбивается, преобразуется в код приложения и хранится в нескольких таблицах нескольких баз данных.</span><span class="sxs-lookup"><span data-stu-id="21f68-149">For example, when a user uploads a file to SharePoint Online, the file is disassembled, translated into application code, and stored in multiple tables across multiple databases.</span></span>

<span data-ttu-id="21f68-150">Если пользователь может получить прямой доступ к хранилищу, содержащему данные, содержимое не будет интерпретировано для человека или любой другой системы, отличной от SharePoint Online.</span><span class="sxs-lookup"><span data-stu-id="21f68-150">If a user could gain direct access to the storage containing the data, the content is not interpretable to a human or any system other than SharePoint Online.</span></span> <span data-ttu-id="21f68-151">Эти механизмы включают управление доступом и свойства.</span><span class="sxs-lookup"><span data-stu-id="21f68-151">These mechanisms include security access control and properties.</span></span> <span data-ttu-id="21f68-152">Все ресурсы SharePoint Online защищаются с помощью кода авторизации и политики RBAC, в том числе в рамках клиента.</span><span class="sxs-lookup"><span data-stu-id="21f68-152">All SharePoint Online resources are secured by the authorization code and RBAC policy, including within a tenancy.</span></span> <span data-ttu-id="21f68-153">Список управления доступом (ACL), защищающий ресурс, содержит удостоверение, прошедшее проверку подлинности на уровне клиента.</span><span class="sxs-lookup"><span data-stu-id="21f68-153">The access control list (ACL) that secures a resource contains an identity authenticated at the tenant level.</span></span> <span data-ttu-id="21f68-154">Данные SharePoint Online для клиента ограничены удостоверениями, прошедших проверку с помощью поставщика проверки подлинности для клиента.</span><span class="sxs-lookup"><span data-stu-id="21f68-154">SharePoint Online data for a tenant is limited to identities authenticated by the authentication provider for the tenant.</span></span>

<span data-ttu-id="21f68-155">В дополнение к ACL, свойство уровня клиента, задающее поставщика проверки подлинности (то есть Azure Active Directory для определенного клиента), записывается один раз и не может быть изменен после установки.</span><span class="sxs-lookup"><span data-stu-id="21f68-155">In addition to the ACLs, a tenant level property that specifies the authentication provider (which is the tenant-specific Azure Active Directory), is written once and cannot be changed once set.</span></span> <span data-ttu-id="21f68-156">После настройки свойства клиента поставщика проверки подлинности для клиента его нельзя изменить с помощью интерфейсов API, предоставленных клиенту.</span><span class="sxs-lookup"><span data-stu-id="21f68-156">Once the authentication provider tenant property has been set for a tenant, it cannot be changed using any APIs exposed to a tenant.</span></span>

<span data-ttu-id="21f68-157">Для каждого клиента используется уникальный идентификатор *подписки* .</span><span class="sxs-lookup"><span data-stu-id="21f68-157">A unique *SubscriptionId* is used for each tenant.</span></span> <span data-ttu-id="21f68-158">Всем сайтам клиентов владеет клиент и ему назначен идентификатор *подписки* , уникальный для клиента.</span><span class="sxs-lookup"><span data-stu-id="21f68-158">All customer sites are owned by a tenant and assigned a *SubscriptionId* unique to the tenant.</span></span> <span data-ttu-id="21f68-159">Свойство *SubscriptionId* на сайте записывается один раз и является постоянным.</span><span class="sxs-lookup"><span data-stu-id="21f68-159">The *SubscriptionId* property on a site is written once and is permanent.</span></span> <span data-ttu-id="21f68-160">После назначения клиенту сайт невозможно переместить в другой клиент.</span><span class="sxs-lookup"><span data-stu-id="21f68-160">Once assigned to a tenant, a site cannot be moved to a different tenant.</span></span> <span data-ttu-id="21f68-161">Значение *SubscriptionId* — это ключ, используемый для создания области безопасности для поставщика проверки подлинности и привязанного к клиенту.</span><span class="sxs-lookup"><span data-stu-id="21f68-161">The *SubscriptionId* is the key used to create the security scope for the authentication provider and is tied to the tenant.</span></span>

<span data-ttu-id="21f68-162">SharePoint Online использует SQL Server и хранилище Azure для хранения метаданных контента.</span><span class="sxs-lookup"><span data-stu-id="21f68-162">SharePoint Online uses SQL Server and Azure Storage for content metadata storage.</span></span> <span data-ttu-id="21f68-163">Ключ раздела для хранилища контента — код *сайта* в SQL.</span><span class="sxs-lookup"><span data-stu-id="21f68-163">The partition key for the content store is *SiteId* in SQL.</span></span> <span data-ttu-id="21f68-164">При выполнении запроса SQL SharePoint Online использует идентификатор *сайта* , проверенный как часть проверки на уровне клиента *SubscriptionId* .</span><span class="sxs-lookup"><span data-stu-id="21f68-164">When running a SQL query, SharePoint Online uses a *SiteId* verified as part of a tenant-level *SubscriptionId* check.</span></span>

<span data-ttu-id="21f68-165">SharePoint Online хранит зашифрованное содержимое файлов в больших двоичных объектов Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="21f68-165">SharePoint Online stores encrypted file content in Microsoft Azure blobs.</span></span> <span data-ttu-id="21f68-166">Каждая ферма SharePoint Online обладает собственной учетной записью Microsoft Azure, а все большие двоичные объекты, сохраненные в Azure, шифруются по отдельности с помощью ключа, хранящегося в хранилище контента SQL.</span><span class="sxs-lookup"><span data-stu-id="21f68-166">Each SharePoint Online farm has its own Microsoft Azure account and all the blobs saved in Azure are encrypted individually with a key stored in the SQL content store.</span></span> <span data-ttu-id="21f68-167">Ключ шифрования, защищенный в коде уровнем авторизации и не предоставленный непосредственно конечному пользователю.</span><span class="sxs-lookup"><span data-stu-id="21f68-167">The encryption key protected in code by the authorization layer and not exposed directly to the end user.</span></span> <span data-ttu-id="21f68-168">В SharePoint Online есть мониторинг в режиме реального времени, чтобы определить, когда HTTP-запрос считывает или записывает данные для нескольких клиентов.</span><span class="sxs-lookup"><span data-stu-id="21f68-168">SharePoint Online has real-time monitoring to detect when an HTTP request reads or writes data for more than one tenant.</span></span> <span data-ttu-id="21f68-169">Идентификатор запроса *SubscriptionId* отслеживается на основании *идентификатора подписки* доступного ресурса.</span><span class="sxs-lookup"><span data-stu-id="21f68-169">The request identity *SubscriptionId* is tracked against the *SubscriptionId* of the accessed resource.</span></span> <span data-ttu-id="21f68-170">Запросы на доступ к ресурсам нескольких клиентов никогда не должны выполняться конечными пользователями.</span><span class="sxs-lookup"><span data-stu-id="21f68-170">Requests to access resources of more than one tenant should never happen by end users.</span></span> <span data-ttu-id="21f68-171">Запросы службы в среде с несколькими клиентами являются единственным исключением.</span><span class="sxs-lookup"><span data-stu-id="21f68-171">Service requests in a multi-tenant environment are the only exception.</span></span> <span data-ttu-id="21f68-172">Например, программа-обходчик собирает все изменения контента для всей базы данных одновременно.</span><span class="sxs-lookup"><span data-stu-id="21f68-172">For example, the search crawler pulls content changes for an entire database all at once.</span></span> <span data-ttu-id="21f68-173">Обычно это включает запросы сайтов нескольких клиентов в одном запросе службы, которые выполняются в целях повышения эффективности.</span><span class="sxs-lookup"><span data-stu-id="21f68-173">This usually involves querying sites of more than one tenant in a single service request, which is done for efficiency reasons.</span></span>
