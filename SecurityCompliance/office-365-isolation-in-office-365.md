---
title: Изоляция и управление доступом в Office 365 в Office 365
ms.author: robmazz
author: robmazz
manager: laurawi
audience: ITPro
ms.topic: article
ms.service: O365-seccomp
localization_priority: Normal
search.appverid:
- MET150
ms.collection:
- Strat_O365_IP
- M365-security-compliance
description: Сводка. Описание изоляции и управления доступом в различных приложениях Office 365.
ms.openlocfilehash: 748da21f5b5048bb4ae4c14700ed482fd6d0058c
ms.sourcegitcommit: e23b84ef4eee9cccec7205826b71ddfe9aaac2f8
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/28/2019
ms.locfileid: "33402897"
---
# <a name="isolation-and-access-control-in-office-365"></a>Изоляция и управление доступом в Office 365

Azure Active Directory и Office 365 используют очень сложную модель данных, включающую десятки служб, сотни сущностей, тысячи отношений и десятки тысяч атрибутов. На высоком уровне, Azure Active Directory и каталогах служб — это контейнеры клиентов и получателей, которые синхронизируются с использованием протоколов репликации на основе состояния. Кроме сведений о каталоге, хранящихся в Azure Active Directory, у каждой рабочей нагрузки службы есть своя инфраструктура служб каталогов.
 
![Синхронизация данных клиента Office 365](media/office-365-isolation-tenant-data-sync.png)

В этой модели нет единого источника данных каталога. Конкретные системы принадлежат отдельным частям данных, но ни одна система не содержит все данные. Службы Office 365 сотрудничают с Azure Active Directory в этой модели данных. Azure Active Directory — это «система истинности» для общих данных, которая обычно представляет собой небольшие и статические данные, используемые каждой службой. Федеративная модель, используемая в Office 365 и Azure Active Directory, предоставляет общее представление данных.

Office 365 использует как физическое хранилище, так и облачное хранилище Azure. Exchange Online (включая Exchange Online Protection) и Skype для бизнеса используют собственное хранилище для данных клиентов. SharePoint Online использует как хранилище данных SQL Server, так и хранилище Azure, поэтому потребность в дополнительной изоляции данных клиентов на уровне хранения.

## <a name="exchange-online"></a>Exchange Online

Exchange Online хранит данные клиентов в почтовых ящиках. ПоЧтовые ящики размещаются в базах данных расширенного обработчика хранилищ (ESE) под названием databases. Сюда входят почтовые ящики пользователей, связанные почтовые ящики, общие почтовые ящики и почтовые Почтовые ящики пользователей включают сохраненный контент Skype для бизнеса, например историю бесед.

Содержимое почтового ящика пользователя включает:

- Сообщения электронной почты и вложения электронной почты
- Сведения о календаре и занятости
- Contacts
- Задачи
- Заметки
- Groups
- Данные вывода

Каждая база данных почтовых ящиков в Exchange Online содержит почтовые ящики нескольких клиентов. Код авторизации обеспечивает защиту каждого почтового ящика, в том числе в рамках клиента. По умолчанию доступ к почтовому ящику имеют только назначенный пользователь. Список управления доступом (ACL), обеспечивающий защиту почтового ящика, содержит удостоверение, прошедшее проверку подлинности Azure Active Directory на уровне клиента. Почтовые ящики для каждого клиента ограничены удостоверениями, проверенными в поставщике проверки подлинности клиента, который включает в себя только пользователей этого клиента. Контент в клиенте А не может быть получен пользователями в клиенте Б, если только он явно не утвержден клиентом A.

## <a name="skype-for-business"></a>Skype для бизнеса

Skype для бизнеса хранит данные в различных местах:

- Сведения о пользователях и учетных записях, включая конечные точки подключений, идентификаторы клиентов, абонентские группы, параметры роуминга, состояние присутствия, списки контактов и т. д., хранятся на серверах Active Directory Skype для бизнеса и на различных серверах баз данных Skype для бизнеса. Списки контактов хранятся в почтовом ящике Exchange Online пользователя, если пользователь включен для обеих продуктов, или на серверах Skype для бизнеса, если пользователь не работает. Серверы баз данных Skype для бизнеса не разбиты на несколько клиентов, но изоляция данных с несколькими клиентами обеспечивается с помощью управления доступом на основе ролей (RBAC).
- Содержимое собраний и отправленные данные хранятся в общих папках распределенной файловой системы (DFS). Этот контент также можно архивировать в Exchange Online, если он включен. Общие ресурсы DFS не разбиты на разделы для каждого клиента. содержимое защищено с помощью списков управления доступом (ACL) и с поддержкой нескольких клиентов с помощью RBAC.
- Записи о вызовах, являющиеся журналом активности, например журнал вызовов, сеансы обмена МГНОВЕНными СООБЩЕНИЯми, общий доступ к приложениям, журнал МГНОВЕНных сообщений и т. д., также могут храниться в Exchange Online, но большинство записей сведений о вызовах временно хранятся на серверах записи сведений о вызовах (CDR). Содержимое не секционировано для каждого клиента, но с помощью RBAC применяется мультитенантность.

## <a name="sharepoint-online"></a>SharePoint Online

В SharePoint Online есть несколько независимых механизмов, обеспечивающих изоляцию данных. В базах данных приложений хранятся объекты в виде абстрактного кода. Например, когда пользователь отправляет файл в SharePoint Online, файл разбивается, преобразуется в код приложения и хранится в нескольких таблицах нескольких баз данных.

Если пользователь может получить прямой доступ к хранилищу, содержащему данные, содержимое не будет интерпретировано для человека или любой другой системы, отличной от SharePoint Online. Эти механизмы включают управление доступом и свойства. Все ресурсы SharePoint Online защищаются с помощью кода авторизации и политики RBAC, в том числе в рамках клиента. Список управления доступом (ACL), защищающий ресурс, содержит удостоверение, прошедшее проверку подлинности на уровне клиента. Данные SharePoint Online для клиента ограничены удостоверениями, прошедших проверку с помощью поставщика проверки подлинности для клиента.

В дополнение к ACL, свойство уровня клиента, задающее поставщика проверки подлинности (то есть Azure Active Directory для определенного клиента), записывается один раз и не может быть изменен после установки. После настройки свойства клиента поставщика проверки подлинности для клиента его нельзя изменить с помощью интерфейсов API, предоставленных клиенту.

Для каждого клиента используется уникальный идентификатор *подписки* . Всем сайтам клиентов владеет клиент и ему назначен идентификатор *подписки* , уникальный для клиента. Свойство *SubscriptionId* на сайте записывается один раз и является постоянным. После назначения клиенту сайт невозможно переместить в другой клиент. Значение *SubscriptionId* — это ключ, используемый для создания области безопасности для поставщика проверки подлинности и привязанного к клиенту.

SharePoint Online использует SQL Server и хранилище Azure для хранения метаданных контента. Ключ раздела для хранилища контента — код *сайта* в SQL. При выполнении запроса SQL SharePoint Online использует идентификатор *сайта* , проверенный как часть проверки на уровне клиента *SubscriptionId* .

SharePoint Online хранит зашифрованное содержимое файлов в больших двоичных объектов Microsoft Azure. Каждая ферма SharePoint Online обладает собственной учетной записью Microsoft Azure, а все большие двоичные объекты, сохраненные в Azure, шифруются по отдельности с помощью ключа, хранящегося в хранилище контента SQL. Ключ шифрования, защищенный в коде уровнем авторизации и не предоставленный непосредственно конечному пользователю. В SharePoint Online есть мониторинг в режиме реального времени, чтобы определить, когда HTTP-запрос считывает или записывает данные для нескольких клиентов. Идентификатор запроса *SubscriptionId* отслеживается на основании *идентификатора подписки* доступного ресурса. Запросы на доступ к ресурсам нескольких клиентов никогда не должны выполняться конечными пользователями. Запросы службы в среде с несколькими клиентами являются единственным исключением. Например, программа-обходчик собирает все изменения контента для всей базы данных одновременно. Обычно это включает запросы сайтов нескольких клиентов в одном запросе службы, которые выполняются в целях повышения эффективности.
