---
title: Изоляция и управление доступом в Office 365 в Office 365
ms.author: robmazz
author: robmazz
manager: laurawi
ms.date: 8/21/2018
audience: ITPro
ms.topic: article
ms.service: O365-seccomp
localization_priority: None
search.appverid:
- MET150
ms.collection:
- Strat_O365_IP
- M365-security-compliance
description: Сводка. Описание изоляции и управления доступом в различных приложениях Office 365.
ms.openlocfilehash: 734c92a6f3185a25faf9aade1ba235444ed762da
ms.sourcegitcommit: f57b4001ef1327f0ea622e716a4d7d78f1769b49
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/23/2019
ms.locfileid: "30216859"
---
# <a name="isolation-and-access-control-in-office-365"></a>Изоляция и управление доступом в Office 365

Azure Active Directory и Office 365 используют очень сложную модель данных, включающую десятки служб, сотни сущностей, тысячи отношений и десятки тысяч атрибутов (сущности, отношения и атрибуты часто ориентированы на приложения). На высоком уровне Azure Active Directory и каталоги служб являются контейнерами клиентов и получателей, которые синхронизируются с использованием протоколов репликации на основе состояния. Помимо сведений о каталоге, хранящихся в Azure Active Directory, каждая из этих служб также имеет собственную инфраструктуру служб каталогов (например, службы каталогов Exchange Online, службы каталогов SharePoint Online и т. д.). 
 
![Синхронизация данных клиента Office 365](media/office-365-isolation-tenant-data-sync.png)

В этой модели нет единого источника данных каталога. Каждая отдельная часть данных принадлежит определенной системе, но ни одна система не содержит все данные. Службы Office 365 сотрудничают с Azure Active Directory для реализации модели данных. Azure Active Directory — это «система истинности» для общих данных, которая обычно представляет собой небольшие и статические данные, часто используемые каждой службой. Федеративная модель, используемая в Office 365 и Azure Active Directory, предоставляет общее представление данных.

Office 365 использует как физическое хранилище, так и облачное хранилище Azure. Exchange Online (включая Exchange Online Protection) и Skype для бизнеса используют собственное хранилище для данных клиентов. SharePoint Online использует как хранилище SQL Server, так и хранилище Azure, что требует дополнительной изоляции данных клиентов на уровне хранилища.

## <a name="exchange-online"></a>Exchange Online
Exchange Online хранит данные клиентов в почтовых ящиках, размещенных в базах данных с ESE, которые называются базами данных почтовых ящиков. К ним относятся почтовые ящики пользователей, связанные почтовые ящики, общие почтовые ящики и общие Почтовые ящики пользователей также могут включать сохраненный контент Skype для бизнеса, например, истории бесед. Содержимое почтового ящика пользователя включает в себя электронную почту и вложения электронной почты, календари и сведения о занятости, контакты, задачи, заметки, группы и данные вывода.

Каждая база данных почтовых ящиков в Exchange Online содержит почтовые ящики нескольких клиентов. Все почтовые ящики защищаются с помощью кода авторизации, в том числе в рамках клиента. Как и в случае локального развертывания Exchange, по умолчанию доступ к почтовому ящику имеют только назначенный пользователь. Список управления доступом (ACL), обеспечивающий защиту почтового ящика, содержит удостоверение, прошедшее проверку подлинности Azure Active Directory на уровне клиента. Почтовые ящики для данного клиента ограничены удостоверениями, которые проходят проверку подлинности у поставщика проверки подлинности клиента, который включает в себя только пользователей из этого клиента. Содержимое, принадлежащее клиенту а, не может быть получено пользователями в Тенантб, если оно явно не утверждено клиентом.

## <a name="skype-for-business"></a>Skype для бизнеса
Skype для бизнеса хранит данные в различных местах:
- Сведения о пользователях и учетных записях, включая конечные точки подключений, идентификаторы клиентов, абонентские группы, параметры роуминга, состояние присутствия, списки контактов и т. д., хранятся на серверах Active Directory Skype для бизнеса, а также в различных базах данных Skype для бизнеса. серверами. Списки контактов хранятся в почтовом ящике Exchange Online пользователя, если пользователь включен для обеих продуктов, или на серверах Skype для бизнеса, если пользователь не работает. Серверы баз данных Skype для бизнеса не разделены на клиента, но изоляция данных с несколькими клиентами обеспечивается с помощью RBAC.
- Содержимое собраний, например пользователи контента, отправляемые во время собраний Skype для бизнеса, хранятся в распределенных ресурсах распределенной файловой системы. Этот контент также можно архивировать в Exchange Online, если включена функция архивации. Общие ресурсы DFS не разбиты на несколько клиентов, но содержимое защищено с помощью списков управления доступом (ACL) и с поддержкой нескольких клиентов с помощью параметра RBAC.
- Записи о вызовах, являющиеся журналом активности, например журнал вызовов, сеансы обмена МГНОВЕНными СООБЩЕНИЯми, общий доступ к приложениям, журнал МГНОВЕНных сообщений и т. д., также могут храниться в Exchange Online, но большинство записей сведений о вызовах временно хранятся на серверах записи сведений о вызовах (CDR). Содержимое не секционировано для каждого клиента, но с помощью RBAC применяется мультитенантность.

## <a name="sharepoint-online"></a>SharePoint Online
Существует несколько независимых механизмов, уникальных для SharePoint Online, которые обеспечивают изоляцию данных. SharePoint Online хранит объекты в виде абстрактного кода в базах данных приложений. Например, когда пользователь отправляет файл в SharePoint Online, этот файл разбивается и преобразуется в код приложения и хранится в нескольких таблицах нескольких баз данных.

Если пользователь может получить прямой доступ к хранилищу, содержащему данные, он не будет интерпретирован для человека или любой другой системы, отличной от SharePoint Online. Эти механизмы включают управление доступом и свойства. Как было сказано выше, все ресурсы SharePoint Online защищаются с помощью кода авторизации и политики RBAC, в том числе в рамках клиента. Список управления доступом (ACL), защищающий ресурс, содержит удостоверение, прошедшее проверку подлинности на уровне клиента. Как и в Exchange Online, в SharePoint Online данные для определенного клиента ограничены удостоверениями, проверенными с помощью поставщика проверки подлинности этого клиента, который включает в себя только пользователей из этого клиента.

В дополнение к ACL, свойство уровня клиента, задающее поставщика проверки подлинности (то есть Azure Active Directory для определенного клиента), записывается один раз и не может быть изменен после установки. После настройки свойства клиента поставщика проверки подлинности для клиента его нельзя изменить с помощью интерфейсов API, предоставленных клиенту.

Уникальный идентификатор *SubscriptionId* также используется для каждого клиента. Все сайты клиентов принадлежат клиенту и им назначается идентификатор *подписки* , уникальный для клиента. Свойство *SubscriptionId* на сайте записывается один раз и не может быть изменено. После назначения сайта клиенту он не может быть перемещен в другой клиент позже с помощью API хранилища контента. *SubscriptionId* также это ключ, который используется для создания области безопасности для поставщика проверки подлинности и связана с клиентом.

SharePoint Online использует SQL Server и хранилище Azure для хранения контента. На уровне SQL ключ раздела для хранилища контента является идентификатором *сайта*. При выполнении запроса SQL SharePoint Online использует идентификатор *сайта* , проверенный как часть проверки на уровне клиента *SubscriptionId* .

SharePoint Online хранит двоичные файлы BLOB (например, потоки файлов) в Microsoft Azure. Каждая ферма SharePoint Online обладает собственной учетной записью Microsoft Azure, а все большие двоичные объекты, сохраненные в Azure, шифруются по отдельности с помощью ключа, хранящегося в хранилище контента SQL. Ключ шифрования не предоставляется непосредственно конечному пользователю и защищен в коде уровнем авторизации. Наконец, SharePoint Online имеет мониторинг в режиме реального времени на месте, чтобы определить, когда HTTP-запрос считывает или записывает данные для нескольких клиентов. Для этого Отслеживайте значение *SubscriptionId* идентификатора запроса в отношении идентификатора *подписки* ресурса, к которому осуществляется доступ. Запрос на доступ к ресурсам нескольких клиентов никогда не должен выполняться конечными пользователями. Тем не менее, это может произойти для запросов службы в среде с несколькими клиентами. Например, программа-обходчик собирает все изменения контента для всей базы данных одновременно. Обычно это включает запросы сайтов нескольких клиентов в одном запросе службы, которые выполняются в целях повышения эффективности.
