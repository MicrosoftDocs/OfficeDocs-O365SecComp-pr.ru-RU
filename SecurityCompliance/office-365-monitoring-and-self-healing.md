---
title: Мониторинг и самоВосстановление Office 365
ms.author: robmazz
author: robmazz
manager: laurawi
audience: ITPro
ms.topic: article
ms.service: O365-seccomp
localization_priority: Normal
search.appverid:
- MET150
ms.collection:
- Strat_O365_IP
- M365-security-compliance
description: Сведения о функциях мониторинга и самостоятельной восстановления Office 365.
ms.openlocfilehash: 6a7753fbd1e20c690c45b670240afa36baf9ffdb
ms.sourcegitcommit: 0017dc6a5f81c165d9dfd88be39a6bb17856582e
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2019
ms.locfileid: "32262501"
---
# <a name="office-365-monitoring-and-self-healing"></a><span data-ttu-id="31f9e-103">Мониторинг и самоВосстановление Office 365</span><span class="sxs-lookup"><span data-stu-id="31f9e-103">Office 365 Monitoring and Self-Healing</span></span>
<span data-ttu-id="31f9e-104">С учетом масштаба Office 365 вы не сможете хранить данные клиентов как надежные и безопасных от вредоносных программ без встроенных средств мониторинга, которые являются исчерпывающим и надежным, что является быстрым и надежным.</span><span class="sxs-lookup"><span data-stu-id="31f9e-104">Given the scale of Office 365, it would be impossible to keep customer data resilient and safe from malware without built-in monitoring that is comprehensive, alerting that is intelligent, and self-healing that is fast and reliable.</span></span> <span data-ttu-id="31f9e-105">Мониторинг набора служб в масштабе Office 365 очень проблематично.</span><span class="sxs-lookup"><span data-stu-id="31f9e-105">Monitoring a set of services at the scale of Office 365 is very challenging.</span></span> <span data-ttu-id="31f9e-106">Новые методологии и методологии, которые необходимо представить, и все новые наборы технологий, которые необходимо создать для работы и управления службой в подключенной глобальной среде.</span><span class="sxs-lookup"><span data-stu-id="31f9e-106">New mindsets and methodologies needed to be introduced, and whole new sets of technology needed to be created to operate and manage the service in a connected global environment.</span></span> <span data-ttu-id="31f9e-107">Мы перешли с традиционного средства мониторинга сбора и фильтрации данных, чтобы создавать оповещения для подхода, основанного на анализе данных; получение сигналов и создание уверенности в этих данных, а затем использование автоматизации для восстановления или устранения проблемы.</span><span class="sxs-lookup"><span data-stu-id="31f9e-107">We have moved away from the traditional monitoring approach of data collection and filtering to create alerts to an approach that is based on data analysis; taking signals and building confidence in that data and then using automation to recover or resolve the issue.</span></span> <span data-ttu-id="31f9e-108">Такой подход помогает отвлекаться от использования уравнения восстановления, что в свою очередь делает операции менее дорогостоящими, быстрее и менее подверженными ошибкам.</span><span class="sxs-lookup"><span data-stu-id="31f9e-108">This approach helps take humans out of the recovery equation, which in turn makes operations less expensive, faster, and less error prone.</span></span> 

<span data-ttu-id="31f9e-109">Основные сведения о мониторинге Office 365 — это набор технологий, включающих нашу подСистему анализа данных, основанный на Azure, SQL Azure и [технологии обработки баз данных с открытым кодом](http://cassandra.apache.org/).</span><span class="sxs-lookup"><span data-stu-id="31f9e-109">Fundamental to Office 365 monitoring is a collection of technologies that comprise our Data Insights Engine, which is built on Azure, SQL Azure, and [open-source streaming database technology](http://cassandra.apache.org/).</span></span> <span data-ttu-id="31f9e-110">Он предназначен для сбора и агрегирования данных, а также для достижения вызываемых данных.</span><span class="sxs-lookup"><span data-stu-id="31f9e-110">It is designed to collect and aggregate data and reach conclusions.</span></span> <span data-ttu-id="31f9e-111">В настоящее время он обрабатывает более 500 000 000 событий в час с более чем 100 000 серверов (~ 15 ТБ в день), разбитых на десятки центров обработки данных во многих регионах, и эти номера растут.</span><span class="sxs-lookup"><span data-stu-id="31f9e-111">Currently, it processes more than 500 million events per hour from more than 100,000 servers (~15 TB per day) scattered across dozens of datacenters in many regions, and these numbers are growing.</span></span> 

<span data-ttu-id="31f9e-112">Office 365 использует *внешний мониторинг*, который включает в себя создание искусственных транзакций для тестирования всех важных компонентов.</span><span class="sxs-lookup"><span data-stu-id="31f9e-112">Office 365 uses *outside-in monitoring*, which involves creating synthetic transactions to test everything that is important.</span></span> <span data-ttu-id="31f9e-113">Например, в Exchange Online каждый сценарий тестирует каждую базу данных по всему миру каждые пять минут в рассеиваниех, предоставляя почти непрерывное покрытие всех компонентов системы.</span><span class="sxs-lookup"><span data-stu-id="31f9e-113">For example, in Exchange Online each scenario is testing every database worldwide every five minutes in a scattered fashion, providing near continuous coverage of everything that lives in the system.</span></span> <span data-ttu-id="31f9e-114">В нескольких расположениях тестовые транзакции 250 000 000 выполняются для создания надежного базового или пульса службы.</span><span class="sxs-lookup"><span data-stu-id="31f9e-114">From multiple locations, 250 million test transactions per day are performed to create a robust baseline or heartbeat for the service.</span></span> 

<span data-ttu-id="31f9e-115">В Office 365 также используется концепция *Красного оповещения*, которая сжимает все сигналы мониторинга со всех компьютеров в наших центрах обработки данных, чтобы что-то управляло человеком.</span><span class="sxs-lookup"><span data-stu-id="31f9e-115">Office 365 also uses the concept of *Red Alert*, which shrinks down all the monitoring signals from all of the machines in our datacenters to something manageable by a human being.</span></span> <span data-ttu-id="31f9e-116">Концепция довольно проста: если что-то происходит между несколькими сигналами, должно быть что-то должно происходить.</span><span class="sxs-lookup"><span data-stu-id="31f9e-116">The concept is quite simple: If something is happening across multiple signals, there must be something going on.</span></span> <span data-ttu-id="31f9e-117">В одном из них нет уверенности в том, что для каждого сигнала существует разумная точность, что обеспечивает более высокую точность.</span><span class="sxs-lookup"><span data-stu-id="31f9e-117">It is not about building confidence in one signal, it is about having reasonable fidelity for each signal so that you get greater accuracy.</span></span> <span data-ttu-id="31f9e-118">Эта система мониторинга настолько эффективна, что у нас не будет нештатно смотреть наши мониторы; все у нас есть оборудование, которое пробуждается, если обнаруживает проблему, в этом случае будет выводиться на экран подходящие сотрудники для звонков или чаще, как это происходит, и решение проблемы.</span><span class="sxs-lookup"><span data-stu-id="31f9e-118">This monitoring system is so powerful that we do not have 24x7 staff watching our monitors; all we have is the machinery that wakes up if it detects a problem, in which case it will page the appropriate on-call personnel, or more often as is the case, it will just go ahead and solve the problem.</span></span> <span data-ttu-id="31f9e-119">После того как вы начнете сбор сигналов и создавать красные оповещения, мы можем начать триангуляцию между всеми разделами служб.</span><span class="sxs-lookup"><span data-stu-id="31f9e-119">Once we start collecting signals and building red alerts off them, we can start triangulating across all our service partitions.</span></span> 

<span data-ttu-id="31f9e-120">В зависимости от сочетания предупреждения о сбое и красных оповещений это предупреждение указывает на то, какие компоненты могут иметь проблемы, а также о том, что система попытается устранить проблему самостоятельно путем перезапуска сервера почтовых ящиков.</span><span class="sxs-lookup"><span data-stu-id="31f9e-120">Based on the combination of the failure alert and the Red Alerts, this alert indicates exactly which components could be having a problem, and that the system is going to try to correct the problem by itself by restarting a mailbox server.</span></span> 

<span data-ttu-id="31f9e-121">В дополнение к функциям самовосстановления, таким как восстановление отдельных страниц, в Exchange Online есть несколько функций, которые приводят к мониторингу и самовосстановлению, что позволяет сохранить взаимодействие с конечными пользователями.</span><span class="sxs-lookup"><span data-stu-id="31f9e-121">In addition to self-healing capabilities such as single page restore, Exchange Online includes several features that take an approach to monitoring and self-healing which focuses on preserving the end-user experience.</span></span> <span data-ttu-id="31f9e-122">Эти функции включают *управляемУю доступность*, которая предоставляет встроенные действия мониторинга и восстановления, а также AutoReseed, которые автоматически восстанавливают избыточность базы данных после сбоя диска.</span><span class="sxs-lookup"><span data-stu-id="31f9e-122">These features include *Managed Availability*, which provides built-in monitoring and recovery actions, and AutoReseed, which automatically restores database redundancy after a disk failure.</span></span> 

## <a name="managed-availability"></a><span data-ttu-id="31f9e-123">Управляемая доступность</span><span class="sxs-lookup"><span data-stu-id="31f9e-123">Managed Availability</span></span> 
<span data-ttu-id="31f9e-124">Управляемая доступность предоставляет решение для проверки работоспособности и восстановления, которое отслеживает и защищает интерфейс конечного пользователя с помощью действий, ориентированных на восстановление.</span><span class="sxs-lookup"><span data-stu-id="31f9e-124">Managed availability provides a native health checking and recovery solution that monitors and protects the end user's experience through recovery-oriented actions.</span></span> <span data-ttu-id="31f9e-125">Управляемая доступность — это интеграция встроенных действий мониторинга и восстановления с платформой высокой доступности Exchange.</span><span class="sxs-lookup"><span data-stu-id="31f9e-125">Managed availability is the integration of built-in monitoring and recovery actions with the Exchange high availability platform.</span></span> <span data-ttu-id="31f9e-126">Она создана для обнаружения проблем и восстановления после них сразу после их возникновения и обнаружения системой.</span><span class="sxs-lookup"><span data-stu-id="31f9e-126">It's designed to detect and recover from problems as soon as they occur and are discovered by the system.</span></span> <span data-ttu-id="31f9e-127">В отличие от предыдущих решений и методов мониторинга для Exchange функция управляемой доступности не пытается определить основную причину проблемы или уведомить о ней пользователей.</span><span class="sxs-lookup"><span data-stu-id="31f9e-127">Unlike previous external monitoring solutions and techniques for Exchange, managed availability doesn't try to identify or communicate the root cause of an issue.</span></span> <span data-ttu-id="31f9e-128">Вместо этого он фокусируется на аспектах восстановления, которые устраняют три основные области взаимодействия конечных пользователей:</span><span class="sxs-lookup"><span data-stu-id="31f9e-128">Instead, it's focused on recovery aspects that address three key areas of the end-user experience:</span></span> 
- <span data-ttu-id="31f9e-129">**Доступность** — могут пользователи получать доступ к службе?</span><span class="sxs-lookup"><span data-stu-id="31f9e-129">**Availability** - Can users access the service?</span></span> 
- <span data-ttu-id="31f9e-130">**Задержка** — как работает пользователь?</span><span class="sxs-lookup"><span data-stu-id="31f9e-130">**Latency** - How is the experience for users?</span></span> 
- <span data-ttu-id="31f9e-131">**Ошибки** — пользователи могут выполнять нужные действия?</span><span class="sxs-lookup"><span data-stu-id="31f9e-131">**Errors** - Are users able to accomplish what they want?</span></span> 

<span data-ttu-id="31f9e-132">Управляемая доступность это внутренний компонент, который выполняется на всех серверах Office 365 с Exchange Online.</span><span class="sxs-lookup"><span data-stu-id="31f9e-132">Managed availability is an internal feature that runs on every Office 365 server running Exchange Online.</span></span> <span data-ttu-id="31f9e-133">Он каждую секунду опрашивает и анализирует сотни метрик работоспособности.</span><span class="sxs-lookup"><span data-stu-id="31f9e-133">It polls and analyzes hundreds of health metrics every second.</span></span> <span data-ttu-id="31f9e-134">Если что-то не так, то большая часть времени будет исправлена автоматически.</span><span class="sxs-lookup"><span data-stu-id="31f9e-134">If something is found to be wrong, most of the time it is fixed automatically.</span></span> <span data-ttu-id="31f9e-135">Однако при этом всегда будут возникнет проблемы, связанные с управляемой доступностью.</span><span class="sxs-lookup"><span data-stu-id="31f9e-135">But there will always be issues that managed availability will not be able to fix on its own.</span></span> <span data-ttu-id="31f9e-136">В таких случаях управляемая доступность будет расширять уязвимость в группе поддержки Office 365 с помощью журнала событий.</span><span class="sxs-lookup"><span data-stu-id="31f9e-136">In those cases, managed availability will escalate the issue to an Office 365 support team by means of event logging.</span></span> 

## <a name="autoreseed"></a><span data-ttu-id="31f9e-137">AutoReseed</span><span class="sxs-lookup"><span data-stu-id="31f9e-137">AutoReseed</span></span> 
<span data-ttu-id="31f9e-138">Серверы Exchange Online развернуты в конфигурации, в которой хранятся несколько баз данных и их потоки журналов на одном диске без RAID.</span><span class="sxs-lookup"><span data-stu-id="31f9e-138">Exchange Online servers are deployed in a configuration that stores multiple databases and their log streams on the same non-RAID disk.</span></span> <span data-ttu-id="31f9e-139">Такая конфигурация часто называется лишь набором *дисков* (JBOD), так как для дублирования данных на диске используются механизмы избыточности хранилища, такие как RAID.</span><span class="sxs-lookup"><span data-stu-id="31f9e-139">This configuration is often referred to as *just a bunch of disks* (JBOD) because no storage redundancy mechanisms, such as RAID, are being used to duplicate the data on the disk.</span></span> <span data-ttu-id="31f9e-140">При сбое диска в среде JBOD данные на этом диске теряются.</span><span class="sxs-lookup"><span data-stu-id="31f9e-140">When a disk fails in a JBOD environment, the data on that disk is lost.</span></span> 

<span data-ttu-id="31f9e-141">С учетом размера Exchange Online и того, что развернута в ней, — миллионы дисковых накопителей, неисправностей жесткого диска является регулярным событием в Exchange Online.</span><span class="sxs-lookup"><span data-stu-id="31f9e-141">Given the size of Exchange Online and the fact that deployed within it are millions of disk drives, disk drive failures are a regular occurrence in Exchange Online.</span></span> <span data-ttu-id="31f9e-142">На самом деле, более 100 ошибок ежедневно.</span><span class="sxs-lookup"><span data-stu-id="31f9e-142">In fact, more than 100 fail every day.</span></span> <span data-ttu-id="31f9e-143">При сбое диска в локальном развертывании предприятия администратор должен вручную заменить неисправный диск и восстановить затронутые данные.</span><span class="sxs-lookup"><span data-stu-id="31f9e-143">When a disk fails in an on-premises enterprise deployment, an administrator must manually replace the failed disk and restore the affected data.</span></span> <span data-ttu-id="31f9e-144">В облачном развертывании размер Office 365 с использованием операторов (облачные администраторы) вручную заменять диски не всегда практично и не економикалли.</span><span class="sxs-lookup"><span data-stu-id="31f9e-144">In a cloud deployment the size of Office 365, having operators (cloud administrators) manually replacing disks is neither practical nor economically feasible.</span></span> 

<span data-ttu-id="31f9e-145">Автоматическое повторное заполнение или *AutoReseed*— это функция, которая заменяет действия, выполняемые на основе оператора в ответ на сбой диска, событие повреждения базы данных или другие проблемы, которые требуют повторного заполнения копии базы данных.</span><span class="sxs-lookup"><span data-stu-id="31f9e-145">Automatic Reseed, or *AutoReseed*, is a feature that is the replacement for what is normally operator-driven action in response to a disk failure, database corruption event, or other issue that necessitates a reseeding of a database copy.</span></span> <span data-ttu-id="31f9e-146">Функция Autoreseed была создана для автоматического восстановления избыточности базы данных после сбоя диска с помощью запасных дисков, настроенных в системе.</span><span class="sxs-lookup"><span data-stu-id="31f9e-146">AutoReseed is designed to automatically restore database redundancy after a disk failure by using spare disks that have been provisioned on the system.</span></span> <span data-ttu-id="31f9e-147">При сбое диска копии базы данных, хранящиеся на этом диске, автоматически перестраиваются на предварительно настроенный запасной диск на сервере, что позволяет восстановить избыточность.</span><span class="sxs-lookup"><span data-stu-id="31f9e-147">If a disk fails, the database copies stored on that disk are automatically reseeded to a preconfigured spare disk on the server, thereby restoring redundancy.</span></span> 